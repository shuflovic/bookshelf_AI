(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const f of l)if(f.type==="childList")for(const d of f.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function i(l){const f={};return l.integrity&&(f.integrity=l.integrity),l.referrerPolicy&&(f.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?f.credentials="include":l.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function o(l){if(l.ep)return;l.ep=!0;const f=i(l);fetch(l.href,f)}})();function _c(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Q0(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var i=function o(){return this instanceof o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(t).forEach(function(o){var l=Object.getOwnPropertyDescriptor(t,o);Object.defineProperty(i,o,l.get?l:{enumerable:!0,get:function(){return t[o]}})}),i}var ku={exports:{}},As={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rp;function Z0(){if(Rp)return As;Rp=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(o,l,f){var d=null;if(f!==void 0&&(d=""+f),l.key!==void 0&&(d=""+l.key),"key"in l){f={};for(var m in l)m!=="key"&&(f[m]=l[m])}else f=l;return l=f.ref,{$$typeof:t,type:o,key:d,ref:l!==void 0?l:null,props:f}}return As.Fragment=e,As.jsx=i,As.jsxs=i,As}var bp;function W0(){return bp||(bp=1,ku.exports=Z0()),ku.exports}var A=W0(),Pu={exports:{}},pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mp;function j0(){if(Mp)return pe;Mp=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.iterator;function S(x){return x===null||typeof x!="object"?null:(x=T&&x[T]||x["@@iterator"],typeof x=="function"?x:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,N={};function L(x,O,K){this.props=x,this.context=O,this.refs=N,this.updater=K||E}L.prototype.isReactComponent={},L.prototype.setState=function(x,O){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,O,"setState")},L.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function q(){}q.prototype=L.prototype;function V(x,O,K){this.props=x,this.context=O,this.refs=N,this.updater=K||E}var U=V.prototype=new q;U.constructor=V,b(U,L.prototype),U.isPureReactComponent=!0;var $=Array.isArray,z={H:null,A:null,T:null,S:null,V:null},Y=Object.prototype.hasOwnProperty;function Z(x,O,K,J,te,ye){return K=ye.ref,{$$typeof:t,type:x,key:O,ref:K!==void 0?K:null,props:ye}}function ue(x,O){return Z(x.type,O,void 0,void 0,void 0,x.props)}function ne(x){return typeof x=="object"&&x!==null&&x.$$typeof===t}function ee(x){var O={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(K){return O[K]})}var ie=/\/+/g;function fe(x,O){return typeof x=="object"&&x!==null&&x.key!=null?ee(""+x.key):O.toString(36)}function ot(){}function $e(x){switch(x.status){case"fulfilled":return x.value;case"rejected":throw x.reason;default:switch(typeof x.status=="string"?x.then(ot,ot):(x.status="pending",x.then(function(O){x.status==="pending"&&(x.status="fulfilled",x.value=O)},function(O){x.status==="pending"&&(x.status="rejected",x.reason=O)})),x.status){case"fulfilled":return x.value;case"rejected":throw x.reason}}throw x}function we(x,O,K,J,te){var ye=typeof x;(ye==="undefined"||ye==="boolean")&&(x=null);var de=!1;if(x===null)de=!0;else switch(ye){case"bigint":case"string":case"number":de=!0;break;case"object":switch(x.$$typeof){case t:case e:de=!0;break;case v:return de=x._init,we(de(x._payload),O,K,J,te)}}if(de)return te=te(x),de=J===""?"."+fe(x,0):J,$(te)?(K="",de!=null&&(K=de.replace(ie,"$&/")+"/"),we(te,O,K,"",function(gn){return gn})):te!=null&&(ne(te)&&(te=ue(te,K+(te.key==null||x&&x.key===te.key?"":(""+te.key).replace(ie,"$&/")+"/")+de)),O.push(te)),1;de=0;var vt=J===""?".":J+":";if($(x))for(var Pe=0;Pe<x.length;Pe++)J=x[Pe],ye=vt+fe(J,Pe),de+=we(J,O,K,ye,te);else if(Pe=S(x),typeof Pe=="function")for(x=Pe.call(x),Pe=0;!(J=x.next()).done;)J=J.value,ye=vt+fe(J,Pe++),de+=we(J,O,K,ye,te);else if(ye==="object"){if(typeof x.then=="function")return we($e(x),O,K,J,te);throw O=String(x),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.")}return de}function B(x,O,K){if(x==null)return x;var J=[],te=0;return we(x,J,"","",function(ye){return O.call(K,ye,te++)}),J}function Q(x){if(x._status===-1){var O=x._result;O=O(),O.then(function(K){(x._status===0||x._status===-1)&&(x._status=1,x._result=K)},function(K){(x._status===0||x._status===-1)&&(x._status=2,x._result=K)}),x._status===-1&&(x._status=0,x._result=O)}if(x._status===1)return x._result.default;throw x._result}var le=typeof reportError=="function"?reportError:function(x){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var O=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof x=="object"&&x!==null&&typeof x.message=="string"?String(x.message):String(x),error:x});if(!window.dispatchEvent(O))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",x);return}console.error(x)};function X(){}return pe.Children={map:B,forEach:function(x,O,K){B(x,function(){O.apply(this,arguments)},K)},count:function(x){var O=0;return B(x,function(){O++}),O},toArray:function(x){return B(x,function(O){return O})||[]},only:function(x){if(!ne(x))throw Error("React.Children.only expected to receive a single React element child.");return x}},pe.Component=L,pe.Fragment=i,pe.Profiler=l,pe.PureComponent=V,pe.StrictMode=o,pe.Suspense=g,pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,pe.__COMPILER_RUNTIME={__proto__:null,c:function(x){return z.H.useMemoCache(x)}},pe.cache=function(x){return function(){return x.apply(null,arguments)}},pe.cloneElement=function(x,O,K){if(x==null)throw Error("The argument must be a React element, but you passed "+x+".");var J=b({},x.props),te=x.key,ye=void 0;if(O!=null)for(de in O.ref!==void 0&&(ye=void 0),O.key!==void 0&&(te=""+O.key),O)!Y.call(O,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&O.ref===void 0||(J[de]=O[de]);var de=arguments.length-2;if(de===1)J.children=K;else if(1<de){for(var vt=Array(de),Pe=0;Pe<de;Pe++)vt[Pe]=arguments[Pe+2];J.children=vt}return Z(x.type,te,void 0,void 0,ye,J)},pe.createContext=function(x){return x={$$typeof:d,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null},x.Provider=x,x.Consumer={$$typeof:f,_context:x},x},pe.createElement=function(x,O,K){var J,te={},ye=null;if(O!=null)for(J in O.key!==void 0&&(ye=""+O.key),O)Y.call(O,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(te[J]=O[J]);var de=arguments.length-2;if(de===1)te.children=K;else if(1<de){for(var vt=Array(de),Pe=0;Pe<de;Pe++)vt[Pe]=arguments[Pe+2];te.children=vt}if(x&&x.defaultProps)for(J in de=x.defaultProps,de)te[J]===void 0&&(te[J]=de[J]);return Z(x,ye,void 0,void 0,null,te)},pe.createRef=function(){return{current:null}},pe.forwardRef=function(x){return{$$typeof:m,render:x}},pe.isValidElement=ne,pe.lazy=function(x){return{$$typeof:v,_payload:{_status:-1,_result:x},_init:Q}},pe.memo=function(x,O){return{$$typeof:p,type:x,compare:O===void 0?null:O}},pe.startTransition=function(x){var O=z.T,K={};z.T=K;try{var J=x(),te=z.S;te!==null&&te(K,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(X,le)}catch(ye){le(ye)}finally{z.T=O}},pe.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},pe.use=function(x){return z.H.use(x)},pe.useActionState=function(x,O,K){return z.H.useActionState(x,O,K)},pe.useCallback=function(x,O){return z.H.useCallback(x,O)},pe.useContext=function(x){return z.H.useContext(x)},pe.useDebugValue=function(){},pe.useDeferredValue=function(x,O){return z.H.useDeferredValue(x,O)},pe.useEffect=function(x,O,K){var J=z.H;if(typeof K=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return J.useEffect(x,O)},pe.useId=function(){return z.H.useId()},pe.useImperativeHandle=function(x,O,K){return z.H.useImperativeHandle(x,O,K)},pe.useInsertionEffect=function(x,O){return z.H.useInsertionEffect(x,O)},pe.useLayoutEffect=function(x,O){return z.H.useLayoutEffect(x,O)},pe.useMemo=function(x,O){return z.H.useMemo(x,O)},pe.useOptimistic=function(x,O){return z.H.useOptimistic(x,O)},pe.useReducer=function(x,O,K){return z.H.useReducer(x,O,K)},pe.useRef=function(x){return z.H.useRef(x)},pe.useState=function(x){return z.H.useState(x)},pe.useSyncExternalStore=function(x,O,K){return z.H.useSyncExternalStore(x,O,K)},pe.useTransition=function(){return z.H.useTransition()},pe.version="19.1.1",pe}var Np;function Sc(){return Np||(Np=1,Pu.exports=j0()),Pu.exports}var se=Sc();const eT=_c(se);var Lu={exports:{}},ws={},qu={exports:{}},Vu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dp;function tT(){return Dp||(Dp=1,(function(t){function e(B,Q){var le=B.length;B.push(Q);e:for(;0<le;){var X=le-1>>>1,x=B[X];if(0<l(x,Q))B[X]=Q,B[le]=x,le=X;else break e}}function i(B){return B.length===0?null:B[0]}function o(B){if(B.length===0)return null;var Q=B[0],le=B.pop();if(le!==Q){B[0]=le;e:for(var X=0,x=B.length,O=x>>>1;X<O;){var K=2*(X+1)-1,J=B[K],te=K+1,ye=B[te];if(0>l(J,le))te<x&&0>l(ye,J)?(B[X]=ye,B[te]=le,X=te):(B[X]=J,B[K]=le,X=K);else if(te<x&&0>l(ye,le))B[X]=ye,B[te]=le,X=te;else break e}}return Q}function l(B,Q){var le=B.sortIndex-Q.sortIndex;return le!==0?le:B.id-Q.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;t.unstable_now=function(){return f.now()}}else{var d=Date,m=d.now();t.unstable_now=function(){return d.now()-m}}var g=[],p=[],v=1,T=null,S=3,E=!1,b=!1,N=!1,L=!1,q=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function $(B){for(var Q=i(p);Q!==null;){if(Q.callback===null)o(p);else if(Q.startTime<=B)o(p),Q.sortIndex=Q.expirationTime,e(g,Q);else break;Q=i(p)}}function z(B){if(N=!1,$(B),!b)if(i(g)!==null)b=!0,Y||(Y=!0,fe());else{var Q=i(p);Q!==null&&we(z,Q.startTime-B)}}var Y=!1,Z=-1,ue=5,ne=-1;function ee(){return L?!0:!(t.unstable_now()-ne<ue)}function ie(){if(L=!1,Y){var B=t.unstable_now();ne=B;var Q=!0;try{e:{b=!1,N&&(N=!1,V(Z),Z=-1),E=!0;var le=S;try{t:{for($(B),T=i(g);T!==null&&!(T.expirationTime>B&&ee());){var X=T.callback;if(typeof X=="function"){T.callback=null,S=T.priorityLevel;var x=X(T.expirationTime<=B);if(B=t.unstable_now(),typeof x=="function"){T.callback=x,$(B),Q=!0;break t}T===i(g)&&o(g),$(B)}else o(g);T=i(g)}if(T!==null)Q=!0;else{var O=i(p);O!==null&&we(z,O.startTime-B),Q=!1}}break e}finally{T=null,S=le,E=!1}Q=void 0}}finally{Q?fe():Y=!1}}}var fe;if(typeof U=="function")fe=function(){U(ie)};else if(typeof MessageChannel<"u"){var ot=new MessageChannel,$e=ot.port2;ot.port1.onmessage=ie,fe=function(){$e.postMessage(null)}}else fe=function(){q(ie,0)};function we(B,Q){Z=q(function(){B(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ue=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_next=function(B){switch(S){case 1:case 2:case 3:var Q=3;break;default:Q=S}var le=S;S=Q;try{return B()}finally{S=le}},t.unstable_requestPaint=function(){L=!0},t.unstable_runWithPriority=function(B,Q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var le=S;S=B;try{return Q()}finally{S=le}},t.unstable_scheduleCallback=function(B,Q,le){var X=t.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?X+le:X):le=X,B){case 1:var x=-1;break;case 2:x=250;break;case 5:x=1073741823;break;case 4:x=1e4;break;default:x=5e3}return x=le+x,B={id:v++,callback:Q,priorityLevel:B,startTime:le,expirationTime:x,sortIndex:-1},le>X?(B.sortIndex=le,e(p,B),i(g)===null&&B===i(p)&&(N?(V(Z),Z=-1):N=!0,we(z,le-X))):(B.sortIndex=x,e(g,B),b||E||(b=!0,Y||(Y=!0,fe()))),B},t.unstable_shouldYield=ee,t.unstable_wrapCallback=function(B){var Q=S;return function(){var le=S;S=Q;try{return B.apply(this,arguments)}finally{S=le}}}})(Vu)),Vu}var Up;function nT(){return Up||(Up=1,qu.exports=tT()),qu.exports}var Bu={exports:{}},rt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ip;function iT(){if(Ip)return rt;Ip=1;var t=Sc();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function f(g,p,v){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:T==null?null:""+T,children:g,containerInfo:p,implementation:v}}var d=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return rt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,rt.createPortal=function(g,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return f(g,p,null,v)},rt.flushSync=function(g){var p=d.T,v=o.p;try{if(d.T=null,o.p=2,g)return g()}finally{d.T=p,o.p=v,o.d.f()}},rt.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,o.d.C(g,p))},rt.prefetchDNS=function(g){typeof g=="string"&&o.d.D(g)},rt.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var v=p.as,T=m(v,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,E=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?o.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:E}):v==="script"&&o.d.X(g,{crossOrigin:T,integrity:S,fetchPriority:E,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},rt.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=m(p.as,p.crossOrigin);o.d.M(g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&o.d.M(g)},rt.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,T=m(v,p.crossOrigin);o.d.L(g,v,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},rt.preloadModule=function(g,p){if(typeof g=="string")if(p){var v=m(p.as,p.crossOrigin);o.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else o.d.m(g)},rt.requestFormReset=function(g){o.d.r(g)},rt.unstable_batchedUpdates=function(g,p){return g(p)},rt.useFormState=function(g,p,v){return d.H.useFormState(g,p,v)},rt.useFormStatus=function(){return d.H.useHostTransitionStatus()},rt.version="19.1.1",rt}var kp;function oT(){if(kp)return Bu.exports;kp=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Bu.exports=iT(),Bu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pp;function sT(){if(Pp)return ws;Pp=1;var t=nT(),e=Sc(),i=oT();function o(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function f(n){var s=n,r=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(r=s.return),n=s.return;while(n)}return s.tag===3?r:null}function d(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function m(n){if(f(n)!==n)throw Error(o(188))}function g(n){var s=n.alternate;if(!s){if(s=f(n),s===null)throw Error(o(188));return s!==n?null:n}for(var r=n,c=s;;){var h=r.return;if(h===null)break;var y=h.alternate;if(y===null){if(c=h.return,c!==null){r=c;continue}break}if(h.child===y.child){for(y=h.child;y;){if(y===r)return m(h),n;if(y===c)return m(h),s;y=y.sibling}throw Error(o(188))}if(r.return!==c.return)r=h,c=y;else{for(var _=!1,C=h.child;C;){if(C===r){_=!0,r=h,c=y;break}if(C===c){_=!0,c=h,r=y;break}C=C.sibling}if(!_){for(C=y.child;C;){if(C===r){_=!0,r=y,c=h;break}if(C===c){_=!0,c=y,r=h;break}C=C.sibling}if(!_)throw Error(o(189))}}if(r.alternate!==c)throw Error(o(190))}if(r.tag!==3)throw Error(o(188));return r.stateNode.current===r?n:s}function p(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=p(n),s!==null)return s;n=n.sibling}return null}var v=Object.assign,T=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),q=Symbol.for("react.provider"),V=Symbol.for("react.consumer"),U=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),ue=Symbol.for("react.lazy"),ne=Symbol.for("react.activity"),ee=Symbol.for("react.memo_cache_sentinel"),ie=Symbol.iterator;function fe(n){return n===null||typeof n!="object"?null:(n=ie&&n[ie]||n["@@iterator"],typeof n=="function"?n:null)}var ot=Symbol.for("react.client.reference");function $e(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===ot?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case b:return"Fragment";case L:return"Profiler";case N:return"StrictMode";case z:return"Suspense";case Y:return"SuspenseList";case ne:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case E:return"Portal";case U:return(n.displayName||"Context")+".Provider";case V:return(n._context.displayName||"Context")+".Consumer";case $:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Z:return s=n.displayName||null,s!==null?s:$e(n.type)||"Memo";case ue:s=n._payload,n=n._init;try{return $e(n(s))}catch{}}return null}var we=Array.isArray,B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},X=[],x=-1;function O(n){return{current:n}}function K(n){0>x||(n.current=X[x],X[x]=null,x--)}function J(n,s){x++,X[x]=n.current,n.current=s}var te=O(null),ye=O(null),de=O(null),vt=O(null);function Pe(n,s){switch(J(de,s),J(ye,n),J(te,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?tp(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=tp(s),n=np(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}K(te),J(te,n)}function gn(){K(te),K(ye),K(de)}function Tr(n){n.memoizedState!==null&&J(vt,n);var s=te.current,r=np(s,n.type);s!==r&&(J(ye,n),J(te,r))}function qs(n){ye.current===n&&(K(te),K(ye)),vt.current===n&&(K(vt),Ts._currentValue=le)}var _r=Object.prototype.hasOwnProperty,Sr=t.unstable_scheduleCallback,Cr=t.unstable_cancelCallback,by=t.unstable_shouldYield,My=t.unstable_requestPaint,zt=t.unstable_now,Ny=t.unstable_getCurrentPriorityLevel,kc=t.unstable_ImmediatePriority,Pc=t.unstable_UserBlockingPriority,Vs=t.unstable_NormalPriority,Dy=t.unstable_LowPriority,Lc=t.unstable_IdlePriority,Uy=t.log,Iy=t.unstable_setDisableYieldValue,Ro=null,Tt=null;function yn(n){if(typeof Uy=="function"&&Iy(n),Tt&&typeof Tt.setStrictMode=="function")try{Tt.setStrictMode(Ro,n)}catch{}}var _t=Math.clz32?Math.clz32:Ly,ky=Math.log,Py=Math.LN2;function Ly(n){return n>>>=0,n===0?32:31-(ky(n)/Py|0)|0}var Bs=256,Gs=4194304;function $n(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Os(n,s,r){var c=n.pendingLanes;if(c===0)return 0;var h=0,y=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var C=c&134217727;return C!==0?(c=C&~y,c!==0?h=$n(c):(_&=C,_!==0?h=$n(_):r||(r=C&~n,r!==0&&(h=$n(r))))):(C=c&~y,C!==0?h=$n(C):_!==0?h=$n(_):r||(r=c&~n,r!==0&&(h=$n(r)))),h===0?0:s!==0&&s!==h&&(s&y)===0&&(y=h&-h,r=s&-s,y>=r||y===32&&(r&4194048)!==0)?s:h}function bo(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function qy(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qc(){var n=Bs;return Bs<<=1,(Bs&4194048)===0&&(Bs=256),n}function Vc(){var n=Gs;return Gs<<=1,(Gs&62914560)===0&&(Gs=4194304),n}function Er(n){for(var s=[],r=0;31>r;r++)s.push(n);return s}function Mo(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Vy(n,s,r,c,h,y){var _=n.pendingLanes;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=r,n.entangledLanes&=r,n.errorRecoveryDisabledLanes&=r,n.shellSuspendCounter=0;var C=n.entanglements,w=n.expirationTimes,I=n.hiddenUpdates;for(r=_&~r;0<r;){var G=31-_t(r),F=1<<G;C[G]=0,w[G]=-1;var k=I[G];if(k!==null)for(I[G]=null,G=0;G<k.length;G++){var P=k[G];P!==null&&(P.lane&=-536870913)}r&=~F}c!==0&&Bc(n,c,0),y!==0&&h===0&&n.tag!==0&&(n.suspendedLanes|=y&~(_&~s))}function Bc(n,s,r){n.pendingLanes|=s,n.suspendedLanes&=~s;var c=31-_t(s);n.entangledLanes|=s,n.entanglements[c]=n.entanglements[c]|1073741824|r&4194090}function Gc(n,s){var r=n.entangledLanes|=s;for(n=n.entanglements;r;){var c=31-_t(r),h=1<<c;h&s|n[c]&s&&(n[c]|=s),r&=~h}}function Ar(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function wr(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Oc(){var n=Q.p;return n!==0?n:(n=window.event,n===void 0?32:Sp(n.type))}function By(n,s){var r=Q.p;try{return Q.p=n,s()}finally{Q.p=r}}var vn=Math.random().toString(36).slice(2),st="__reactFiber$"+vn,ht="__reactProps$"+vn,yi="__reactContainer$"+vn,xr="__reactEvents$"+vn,Gy="__reactListeners$"+vn,Oy="__reactHandles$"+vn,Hc="__reactResources$"+vn,No="__reactMarker$"+vn;function Rr(n){delete n[st],delete n[ht],delete n[xr],delete n[Gy],delete n[Oy]}function vi(n){var s=n[st];if(s)return s;for(var r=n.parentNode;r;){if(s=r[yi]||r[st]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(n=lp(n);n!==null;){if(r=n[st])return r;n=lp(n)}return s}n=r,r=n.parentNode}return null}function Ti(n){if(n=n[st]||n[yi]){var s=n.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return n}return null}function Do(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(o(33))}function _i(n){var s=n[Hc];return s||(s=n[Hc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Qe(n){n[No]=!0}var Fc=new Set,zc={};function Jn(n,s){Si(n,s),Si(n+"Capture",s)}function Si(n,s){for(zc[n]=s,n=0;n<s.length;n++)Fc.add(s[n])}var Hy=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$c={},Jc={};function Fy(n){return _r.call(Jc,n)?!0:_r.call($c,n)?!1:Hy.test(n)?Jc[n]=!0:($c[n]=!0,!1)}function Hs(n,s,r){if(Fy(s))if(r===null)n.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+r)}}function Fs(n,s,r){if(r===null)n.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+r)}}function Zt(n,s,r,c){if(c===null)n.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttributeNS(s,r,""+c)}}var br,Yc;function Ci(n){if(br===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);br=s&&s[1]||"",Yc=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+br+n+Yc}var Mr=!1;function Nr(n,s){if(!n||Mr)return"";Mr=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var F=function(){throw Error()};if(Object.defineProperty(F.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(F,[])}catch(P){var k=P}Reflect.construct(n,[],F)}else{try{F.call()}catch(P){k=P}n.call(F.prototype)}}else{try{throw Error()}catch(P){k=P}(F=n())&&typeof F.catch=="function"&&F.catch(function(){})}}catch(P){if(P&&k&&typeof P.stack=="string")return[P.stack,k.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=c.DetermineComponentFrameRoot(),_=y[0],C=y[1];if(_&&C){var w=_.split(`
`),I=C.split(`
`);for(h=c=0;c<w.length&&!w[c].includes("DetermineComponentFrameRoot");)c++;for(;h<I.length&&!I[h].includes("DetermineComponentFrameRoot");)h++;if(c===w.length||h===I.length)for(c=w.length-1,h=I.length-1;1<=c&&0<=h&&w[c]!==I[h];)h--;for(;1<=c&&0<=h;c--,h--)if(w[c]!==I[h]){if(c!==1||h!==1)do if(c--,h--,0>h||w[c]!==I[h]){var G=`
`+w[c].replace(" at new "," at ");return n.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",n.displayName)),G}while(1<=c&&0<=h);break}}}finally{Mr=!1,Error.prepareStackTrace=r}return(r=n?n.displayName||n.name:"")?Ci(r):""}function zy(n){switch(n.tag){case 26:case 27:case 5:return Ci(n.type);case 16:return Ci("Lazy");case 13:return Ci("Suspense");case 19:return Ci("SuspenseList");case 0:case 15:return Nr(n.type,!1);case 11:return Nr(n.type.render,!1);case 1:return Nr(n.type,!0);case 31:return Ci("Activity");default:return""}}function Kc(n){try{var s="";do s+=zy(n),n=n.return;while(n);return s}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}function bt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Xc(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function $y(n){var s=Xc(n)?"checked":"value",r=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var h=r.get,y=r.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return h.call(this)},set:function(_){c=""+_,y.call(this,_)}}),Object.defineProperty(n,s,{enumerable:r.enumerable}),{getValue:function(){return c},setValue:function(_){c=""+_},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function zs(n){n._valueTracker||(n._valueTracker=$y(n))}function Qc(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var r=s.getValue(),c="";return n&&(c=Xc(n)?n.checked?"true":"false":n.value),n=c,n!==r?(s.setValue(n),!0):!1}function $s(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Jy=/[\n"\\]/g;function Mt(n){return n.replace(Jy,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Dr(n,s,r,c,h,y,_,C){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),s!=null?_==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+bt(s)):n.value!==""+bt(s)&&(n.value=""+bt(s)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),s!=null?Ur(n,_,bt(s)):r!=null?Ur(n,_,bt(r)):c!=null&&n.removeAttribute("value"),h==null&&y!=null&&(n.defaultChecked=!!y),h!=null&&(n.checked=h&&typeof h!="function"&&typeof h!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?n.name=""+bt(C):n.removeAttribute("name")}function Zc(n,s,r,c,h,y,_,C){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(n.type=y),s!=null||r!=null){if(!(y!=="submit"&&y!=="reset"||s!=null))return;r=r!=null?""+bt(r):"",s=s!=null?""+bt(s):r,C||s===n.value||(n.value=s),n.defaultValue=s}c=c??h,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=C?n.checked:!!c,n.defaultChecked=!!c,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_)}function Ur(n,s,r){s==="number"&&$s(n.ownerDocument)===n||n.defaultValue===""+r||(n.defaultValue=""+r)}function Ei(n,s,r,c){if(n=n.options,s){s={};for(var h=0;h<r.length;h++)s["$"+r[h]]=!0;for(r=0;r<n.length;r++)h=s.hasOwnProperty("$"+n[r].value),n[r].selected!==h&&(n[r].selected=h),h&&c&&(n[r].defaultSelected=!0)}else{for(r=""+bt(r),s=null,h=0;h<n.length;h++){if(n[h].value===r){n[h].selected=!0,c&&(n[h].defaultSelected=!0);return}s!==null||n[h].disabled||(s=n[h])}s!==null&&(s.selected=!0)}}function Wc(n,s,r){if(s!=null&&(s=""+bt(s),s!==n.value&&(n.value=s),r==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=r!=null?""+bt(r):""}function jc(n,s,r,c){if(s==null){if(c!=null){if(r!=null)throw Error(o(92));if(we(c)){if(1<c.length)throw Error(o(93));c=c[0]}r=c}r==null&&(r=""),s=r}r=bt(s),n.defaultValue=r,c=n.textContent,c===r&&c!==""&&c!==null&&(n.value=c)}function Ai(n,s){if(s){var r=n.firstChild;if(r&&r===n.lastChild&&r.nodeType===3){r.nodeValue=s;return}}n.textContent=s}var Yy=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ef(n,s,r){var c=s.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?c?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":c?n.setProperty(s,r):typeof r!="number"||r===0||Yy.has(s)?s==="float"?n.cssFloat=r:n[s]=(""+r).trim():n[s]=r+"px"}function tf(n,s,r){if(s!=null&&typeof s!="object")throw Error(o(62));if(n=n.style,r!=null){for(var c in r)!r.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var h in s)c=s[h],s.hasOwnProperty(h)&&r[h]!==c&&ef(n,h,c)}else for(var y in s)s.hasOwnProperty(y)&&ef(n,y,s[y])}function Ir(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ky=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Xy=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Js(n){return Xy.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var kr=null;function Pr(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var wi=null,xi=null;function nf(n){var s=Ti(n);if(s&&(n=s.stateNode)){var r=n[ht]||null;e:switch(n=s.stateNode,s.type){case"input":if(Dr(n,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),s=r.name,r.type==="radio"&&s!=null){for(r=n;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Mt(""+s)+'"][type="radio"]'),s=0;s<r.length;s++){var c=r[s];if(c!==n&&c.form===n.form){var h=c[ht]||null;if(!h)throw Error(o(90));Dr(c,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<r.length;s++)c=r[s],c.form===n.form&&Qc(c)}break e;case"textarea":Wc(n,r.value,r.defaultValue);break e;case"select":s=r.value,s!=null&&Ei(n,!!r.multiple,s,!1)}}}var Lr=!1;function of(n,s,r){if(Lr)return n(s,r);Lr=!0;try{var c=n(s);return c}finally{if(Lr=!1,(wi!==null||xi!==null)&&(Dl(),wi&&(s=wi,n=xi,xi=wi=null,nf(s),n)))for(s=0;s<n.length;s++)nf(n[s])}}function Uo(n,s){var r=n.stateNode;if(r===null)return null;var c=r[ht]||null;if(c===null)return null;r=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(r&&typeof r!="function")throw Error(o(231,s,typeof r));return r}var Wt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qr=!1;if(Wt)try{var Io={};Object.defineProperty(Io,"passive",{get:function(){qr=!0}}),window.addEventListener("test",Io,Io),window.removeEventListener("test",Io,Io)}catch{qr=!1}var Tn=null,Vr=null,Ys=null;function sf(){if(Ys)return Ys;var n,s=Vr,r=s.length,c,h="value"in Tn?Tn.value:Tn.textContent,y=h.length;for(n=0;n<r&&s[n]===h[n];n++);var _=r-n;for(c=1;c<=_&&s[r-c]===h[y-c];c++);return Ys=h.slice(n,1<c?1-c:void 0)}function Ks(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Xs(){return!0}function lf(){return!1}function pt(n){function s(r,c,h,y,_){this._reactName=r,this._targetInst=h,this.type=c,this.nativeEvent=y,this.target=_,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(r=n[C],this[C]=r?r(y):y[C]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Xs:lf,this.isPropagationStopped=lf,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Xs)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Xs)},persist:function(){},isPersistent:Xs}),s}var Yn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qs=pt(Yn),ko=v({},Yn,{view:0,detail:0}),Qy=pt(ko),Br,Gr,Po,Zs=v({},ko,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Po&&(Po&&n.type==="mousemove"?(Br=n.screenX-Po.screenX,Gr=n.screenY-Po.screenY):Gr=Br=0,Po=n),Br)},movementY:function(n){return"movementY"in n?n.movementY:Gr}}),rf=pt(Zs),Zy=v({},Zs,{dataTransfer:0}),Wy=pt(Zy),jy=v({},ko,{relatedTarget:0}),Or=pt(jy),ev=v({},Yn,{animationName:0,elapsedTime:0,pseudoElement:0}),tv=pt(ev),nv=v({},Yn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),iv=pt(nv),ov=v({},Yn,{data:0}),af=pt(ov),sv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function av(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=rv[n])?!!s[n]:!1}function Hr(){return av}var uv=v({},ko,{key:function(n){if(n.key){var s=sv[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Ks(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?lv[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hr,charCode:function(n){return n.type==="keypress"?Ks(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ks(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),cv=pt(uv),fv=v({},Zs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uf=pt(fv),dv=v({},ko,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hr}),hv=pt(dv),pv=v({},Yn,{propertyName:0,elapsedTime:0,pseudoElement:0}),mv=pt(pv),gv=v({},Zs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),yv=pt(gv),vv=v({},Yn,{newState:0,oldState:0}),Tv=pt(vv),_v=[9,13,27,32],Fr=Wt&&"CompositionEvent"in window,Lo=null;Wt&&"documentMode"in document&&(Lo=document.documentMode);var Sv=Wt&&"TextEvent"in window&&!Lo,cf=Wt&&(!Fr||Lo&&8<Lo&&11>=Lo),ff=" ",df=!1;function hf(n,s){switch(n){case"keyup":return _v.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ri=!1;function Cv(n,s){switch(n){case"compositionend":return pf(s);case"keypress":return s.which!==32?null:(df=!0,ff);case"textInput":return n=s.data,n===ff&&df?null:n;default:return null}}function Ev(n,s){if(Ri)return n==="compositionend"||!Fr&&hf(n,s)?(n=sf(),Ys=Vr=Tn=null,Ri=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return cf&&s.locale!=="ko"?null:s.data;default:return null}}var Av={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mf(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Av[n.type]:s==="textarea"}function gf(n,s,r,c){wi?xi?xi.push(c):xi=[c]:wi=c,s=ql(s,"onChange"),0<s.length&&(r=new Qs("onChange","change",null,r,c),n.push({event:r,listeners:s}))}var qo=null,Vo=null;function wv(n){Qh(n,0)}function Ws(n){var s=Do(n);if(Qc(s))return n}function yf(n,s){if(n==="change")return s}var vf=!1;if(Wt){var zr;if(Wt){var $r="oninput"in document;if(!$r){var Tf=document.createElement("div");Tf.setAttribute("oninput","return;"),$r=typeof Tf.oninput=="function"}zr=$r}else zr=!1;vf=zr&&(!document.documentMode||9<document.documentMode)}function _f(){qo&&(qo.detachEvent("onpropertychange",Sf),Vo=qo=null)}function Sf(n){if(n.propertyName==="value"&&Ws(Vo)){var s=[];gf(s,Vo,n,Pr(n)),of(wv,s)}}function xv(n,s,r){n==="focusin"?(_f(),qo=s,Vo=r,qo.attachEvent("onpropertychange",Sf)):n==="focusout"&&_f()}function Rv(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ws(Vo)}function bv(n,s){if(n==="click")return Ws(s)}function Mv(n,s){if(n==="input"||n==="change")return Ws(s)}function Nv(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var St=typeof Object.is=="function"?Object.is:Nv;function Bo(n,s){if(St(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var r=Object.keys(n),c=Object.keys(s);if(r.length!==c.length)return!1;for(c=0;c<r.length;c++){var h=r[c];if(!_r.call(s,h)||!St(n[h],s[h]))return!1}return!0}function Cf(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Ef(n,s){var r=Cf(n);n=0;for(var c;r;){if(r.nodeType===3){if(c=n+r.textContent.length,n<=s&&c>=s)return{node:r,offset:s-n};n=c}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Cf(r)}}function Af(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Af(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function wf(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=$s(n.document);s instanceof n.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)n=s.contentWindow;else break;s=$s(n.document)}return s}function Jr(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var Dv=Wt&&"documentMode"in document&&11>=document.documentMode,bi=null,Yr=null,Go=null,Kr=!1;function xf(n,s,r){var c=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Kr||bi==null||bi!==$s(c)||(c=bi,"selectionStart"in c&&Jr(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Go&&Bo(Go,c)||(Go=c,c=ql(Yr,"onSelect"),0<c.length&&(s=new Qs("onSelect","select",null,s,r),n.push({event:s,listeners:c}),s.target=bi)))}function Kn(n,s){var r={};return r[n.toLowerCase()]=s.toLowerCase(),r["Webkit"+n]="webkit"+s,r["Moz"+n]="moz"+s,r}var Mi={animationend:Kn("Animation","AnimationEnd"),animationiteration:Kn("Animation","AnimationIteration"),animationstart:Kn("Animation","AnimationStart"),transitionrun:Kn("Transition","TransitionRun"),transitionstart:Kn("Transition","TransitionStart"),transitioncancel:Kn("Transition","TransitionCancel"),transitionend:Kn("Transition","TransitionEnd")},Xr={},Rf={};Wt&&(Rf=document.createElement("div").style,"AnimationEvent"in window||(delete Mi.animationend.animation,delete Mi.animationiteration.animation,delete Mi.animationstart.animation),"TransitionEvent"in window||delete Mi.transitionend.transition);function Xn(n){if(Xr[n])return Xr[n];if(!Mi[n])return n;var s=Mi[n],r;for(r in s)if(s.hasOwnProperty(r)&&r in Rf)return Xr[n]=s[r];return n}var bf=Xn("animationend"),Mf=Xn("animationiteration"),Nf=Xn("animationstart"),Uv=Xn("transitionrun"),Iv=Xn("transitionstart"),kv=Xn("transitioncancel"),Df=Xn("transitionend"),Uf=new Map,Qr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qr.push("scrollEnd");function Vt(n,s){Uf.set(n,s),Jn(s,[n])}var If=new WeakMap;function Nt(n,s){if(typeof n=="object"&&n!==null){var r=If.get(n);return r!==void 0?r:(s={value:n,source:s,stack:Kc(s)},If.set(n,s),s)}return{value:n,source:s,stack:Kc(s)}}var Dt=[],Ni=0,Zr=0;function js(){for(var n=Ni,s=Zr=Ni=0;s<n;){var r=Dt[s];Dt[s++]=null;var c=Dt[s];Dt[s++]=null;var h=Dt[s];Dt[s++]=null;var y=Dt[s];if(Dt[s++]=null,c!==null&&h!==null){var _=c.pending;_===null?h.next=h:(h.next=_.next,_.next=h),c.pending=h}y!==0&&kf(r,h,y)}}function el(n,s,r,c){Dt[Ni++]=n,Dt[Ni++]=s,Dt[Ni++]=r,Dt[Ni++]=c,Zr|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function Wr(n,s,r,c){return el(n,s,r,c),tl(n)}function Di(n,s){return el(n,null,null,s),tl(n)}function kf(n,s,r){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r);for(var h=!1,y=n.return;y!==null;)y.childLanes|=r,c=y.alternate,c!==null&&(c.childLanes|=r),y.tag===22&&(n=y.stateNode,n===null||n._visibility&1||(h=!0)),n=y,y=y.return;return n.tag===3?(y=n.stateNode,h&&s!==null&&(h=31-_t(r),n=y.hiddenUpdates,c=n[h],c===null?n[h]=[s]:c.push(s),s.lane=r|536870912),y):null}function tl(n){if(50<fs)throw fs=0,ou=null,Error(o(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Ui={};function Pv(n,s,r,c){this.tag=n,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ct(n,s,r,c){return new Pv(n,s,r,c)}function jr(n){return n=n.prototype,!(!n||!n.isReactComponent)}function jt(n,s){var r=n.alternate;return r===null?(r=Ct(n.tag,s,n.key,n.mode),r.elementType=n.elementType,r.type=n.type,r.stateNode=n.stateNode,r.alternate=n,n.alternate=r):(r.pendingProps=s,r.type=n.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=n.flags&65011712,r.childLanes=n.childLanes,r.lanes=n.lanes,r.child=n.child,r.memoizedProps=n.memoizedProps,r.memoizedState=n.memoizedState,r.updateQueue=n.updateQueue,s=n.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=n.sibling,r.index=n.index,r.ref=n.ref,r.refCleanup=n.refCleanup,r}function Pf(n,s){n.flags&=65011714;var r=n.alternate;return r===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=r.childLanes,n.lanes=r.lanes,n.child=r.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=r.memoizedProps,n.memoizedState=r.memoizedState,n.updateQueue=r.updateQueue,n.type=r.type,s=r.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function nl(n,s,r,c,h,y){var _=0;if(c=n,typeof n=="function")jr(n)&&(_=1);else if(typeof n=="string")_=q0(n,r,te.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case ne:return n=Ct(31,r,s,h),n.elementType=ne,n.lanes=y,n;case b:return Qn(r.children,h,y,s);case N:_=8,h|=24;break;case L:return n=Ct(12,r,s,h|2),n.elementType=L,n.lanes=y,n;case z:return n=Ct(13,r,s,h),n.elementType=z,n.lanes=y,n;case Y:return n=Ct(19,r,s,h),n.elementType=Y,n.lanes=y,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case q:case U:_=10;break e;case V:_=9;break e;case $:_=11;break e;case Z:_=14;break e;case ue:_=16,c=null;break e}_=29,r=Error(o(130,n===null?"null":typeof n,"")),c=null}return s=Ct(_,r,s,h),s.elementType=n,s.type=c,s.lanes=y,s}function Qn(n,s,r,c){return n=Ct(7,n,c,s),n.lanes=r,n}function ea(n,s,r){return n=Ct(6,n,null,s),n.lanes=r,n}function ta(n,s,r){return s=Ct(4,n.children!==null?n.children:[],n.key,s),s.lanes=r,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var Ii=[],ki=0,il=null,ol=0,Ut=[],It=0,Zn=null,en=1,tn="";function Wn(n,s){Ii[ki++]=ol,Ii[ki++]=il,il=n,ol=s}function Lf(n,s,r){Ut[It++]=en,Ut[It++]=tn,Ut[It++]=Zn,Zn=n;var c=en;n=tn;var h=32-_t(c)-1;c&=~(1<<h),r+=1;var y=32-_t(s)+h;if(30<y){var _=h-h%5;y=(c&(1<<_)-1).toString(32),c>>=_,h-=_,en=1<<32-_t(s)+h|r<<h|c,tn=y+n}else en=1<<y|r<<h|c,tn=n}function na(n){n.return!==null&&(Wn(n,1),Lf(n,1,0))}function ia(n){for(;n===il;)il=Ii[--ki],Ii[ki]=null,ol=Ii[--ki],Ii[ki]=null;for(;n===Zn;)Zn=Ut[--It],Ut[It]=null,tn=Ut[--It],Ut[It]=null,en=Ut[--It],Ut[It]=null}var ut=null,Ve=null,Ae=!1,jn=null,$t=!1,oa=Error(o(519));function ei(n){var s=Error(o(418,""));throw Fo(Nt(s,n)),oa}function qf(n){var s=n.stateNode,r=n.type,c=n.memoizedProps;switch(s[st]=n,s[ht]=c,r){case"dialog":Te("cancel",s),Te("close",s);break;case"iframe":case"object":case"embed":Te("load",s);break;case"video":case"audio":for(r=0;r<hs.length;r++)Te(hs[r],s);break;case"source":Te("error",s);break;case"img":case"image":case"link":Te("error",s),Te("load",s);break;case"details":Te("toggle",s);break;case"input":Te("invalid",s),Zc(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),zs(s);break;case"select":Te("invalid",s);break;case"textarea":Te("invalid",s),jc(s,c.value,c.defaultValue,c.children),zs(s)}r=c.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||s.textContent===""+r||c.suppressHydrationWarning===!0||ep(s.textContent,r)?(c.popover!=null&&(Te("beforetoggle",s),Te("toggle",s)),c.onScroll!=null&&Te("scroll",s),c.onScrollEnd!=null&&Te("scrollend",s),c.onClick!=null&&(s.onclick=Vl),s=!0):s=!1,s||ei(n)}function Vf(n){for(ut=n.return;ut;)switch(ut.tag){case 5:case 13:$t=!1;return;case 27:case 3:$t=!0;return;default:ut=ut.return}}function Oo(n){if(n!==ut)return!1;if(!Ae)return Vf(n),Ae=!0,!1;var s=n.tag,r;if((r=s!==3&&s!==27)&&((r=s===5)&&(r=n.type,r=!(r!=="form"&&r!=="button")||_u(n.type,n.memoizedProps)),r=!r),r&&Ve&&ei(n),Vf(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8)if(r=n.data,r==="/$"){if(s===0){Ve=Gt(n.nextSibling);break e}s--}else r!=="$"&&r!=="$!"&&r!=="$?"||s++;n=n.nextSibling}Ve=null}}else s===27?(s=Ve,Pn(n.type)?(n=Au,Au=null,Ve=n):Ve=s):Ve=ut?Gt(n.stateNode.nextSibling):null;return!0}function Ho(){Ve=ut=null,Ae=!1}function Bf(){var n=jn;return n!==null&&(yt===null?yt=n:yt.push.apply(yt,n),jn=null),n}function Fo(n){jn===null?jn=[n]:jn.push(n)}var sa=O(null),ti=null,nn=null;function _n(n,s,r){J(sa,s._currentValue),s._currentValue=r}function on(n){n._currentValue=sa.current,K(sa)}function la(n,s,r){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===r)break;n=n.return}}function ra(n,s,r,c){var h=n.child;for(h!==null&&(h.return=n);h!==null;){var y=h.dependencies;if(y!==null){var _=h.child;y=y.firstContext;e:for(;y!==null;){var C=y;y=h;for(var w=0;w<s.length;w++)if(C.context===s[w]){y.lanes|=r,C=y.alternate,C!==null&&(C.lanes|=r),la(y.return,r,n),c||(_=null);break e}y=C.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(o(341));_.lanes|=r,y=_.alternate,y!==null&&(y.lanes|=r),la(_,r,n),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===n){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function zo(n,s,r,c){n=null;for(var h=s,y=!1;h!==null;){if(!y){if((h.flags&524288)!==0)y=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(o(387));if(_=_.memoizedProps,_!==null){var C=h.type;St(h.pendingProps.value,_.value)||(n!==null?n.push(C):n=[C])}}else if(h===vt.current){if(_=h.alternate,_===null)throw Error(o(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(n!==null?n.push(Ts):n=[Ts])}h=h.return}n!==null&&ra(s,n,r,c),s.flags|=262144}function sl(n){for(n=n.firstContext;n!==null;){if(!St(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ni(n){ti=n,nn=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function lt(n){return Gf(ti,n)}function ll(n,s){return ti===null&&ni(n),Gf(n,s)}function Gf(n,s){var r=s._currentValue;if(s={context:s,memoizedValue:r,next:null},nn===null){if(n===null)throw Error(o(308));nn=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else nn=nn.next=s;return r}var Lv=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(r,c){n.push(c)}};this.abort=function(){s.aborted=!0,n.forEach(function(r){return r()})}},qv=t.unstable_scheduleCallback,Vv=t.unstable_NormalPriority,Je={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function aa(){return{controller:new Lv,data:new Map,refCount:0}}function $o(n){n.refCount--,n.refCount===0&&qv(Vv,function(){n.controller.abort()})}var Jo=null,ua=0,Pi=0,Li=null;function Bv(n,s){if(Jo===null){var r=Jo=[];ua=0,Pi=fu(),Li={status:"pending",value:void 0,then:function(c){r.push(c)}}}return ua++,s.then(Of,Of),s}function Of(){if(--ua===0&&Jo!==null){Li!==null&&(Li.status="fulfilled");var n=Jo;Jo=null,Pi=0,Li=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function Gv(n,s){var r=[],c={status:"pending",value:null,reason:null,then:function(h){r.push(h)}};return n.then(function(){c.status="fulfilled",c.value=s;for(var h=0;h<r.length;h++)(0,r[h])(s)},function(h){for(c.status="rejected",c.reason=h,h=0;h<r.length;h++)(0,r[h])(void 0)}),c}var Hf=B.S;B.S=function(n,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&Bv(n,s),Hf!==null&&Hf(n,s)};var ii=O(null);function ca(){var n=ii.current;return n!==null?n:Ue.pooledCache}function rl(n,s){s===null?J(ii,ii.current):J(ii,s.pool)}function Ff(){var n=ca();return n===null?null:{parent:Je._currentValue,pool:n}}var Yo=Error(o(460)),zf=Error(o(474)),al=Error(o(542)),fa={then:function(){}};function $f(n){return n=n.status,n==="fulfilled"||n==="rejected"}function ul(){}function Jf(n,s,r){switch(r=n[r],r===void 0?n.push(s):r!==s&&(s.then(ul,ul),s=r),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Kf(n),n;default:if(typeof s.status=="string")s.then(ul,ul);else{if(n=Ue,n!==null&&100<n.shellSuspendCounter)throw Error(o(482));n=s,n.status="pending",n.then(function(c){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=c}},function(c){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Kf(n),n}throw Ko=s,Yo}}var Ko=null;function Yf(){if(Ko===null)throw Error(o(459));var n=Ko;return Ko=null,n}function Kf(n){if(n===Yo||n===al)throw Error(o(483))}var Sn=!1;function da(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ha(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Cn(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function En(n,s,r){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(xe&2)!==0){var h=c.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),c.pending=s,s=tl(n),kf(n,null,r),s}return el(n,c,s,r),tl(n)}function Xo(n,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194048)!==0)){var c=s.lanes;c&=n.pendingLanes,r|=c,s.lanes=r,Gc(n,r)}}function pa(n,s){var r=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,r===c)){var h=null,y=null;if(r=r.firstBaseUpdate,r!==null){do{var _={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};y===null?h=y=_:y=y.next=_,r=r.next}while(r!==null);y===null?h=y=s:y=y.next=s}else h=y=s;r={baseState:c.baseState,firstBaseUpdate:h,lastBaseUpdate:y,shared:c.shared,callbacks:c.callbacks},n.updateQueue=r;return}n=r.lastBaseUpdate,n===null?r.firstBaseUpdate=s:n.next=s,r.lastBaseUpdate=s}var ma=!1;function Qo(){if(ma){var n=Li;if(n!==null)throw n}}function Zo(n,s,r,c){ma=!1;var h=n.updateQueue;Sn=!1;var y=h.firstBaseUpdate,_=h.lastBaseUpdate,C=h.shared.pending;if(C!==null){h.shared.pending=null;var w=C,I=w.next;w.next=null,_===null?y=I:_.next=I,_=w;var G=n.alternate;G!==null&&(G=G.updateQueue,C=G.lastBaseUpdate,C!==_&&(C===null?G.firstBaseUpdate=I:C.next=I,G.lastBaseUpdate=w))}if(y!==null){var F=h.baseState;_=0,G=I=w=null,C=y;do{var k=C.lane&-536870913,P=k!==C.lane;if(P?(Se&k)===k:(c&k)===k){k!==0&&k===Pi&&(ma=!0),G!==null&&(G=G.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var ce=n,re=C;k=s;var Ne=r;switch(re.tag){case 1:if(ce=re.payload,typeof ce=="function"){F=ce.call(Ne,F,k);break e}F=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=re.payload,k=typeof ce=="function"?ce.call(Ne,F,k):ce,k==null)break e;F=v({},F,k);break e;case 2:Sn=!0}}k=C.callback,k!==null&&(n.flags|=64,P&&(n.flags|=8192),P=h.callbacks,P===null?h.callbacks=[k]:P.push(k))}else P={lane:k,tag:C.tag,payload:C.payload,callback:C.callback,next:null},G===null?(I=G=P,w=F):G=G.next=P,_|=k;if(C=C.next,C===null){if(C=h.shared.pending,C===null)break;P=C,C=P.next,P.next=null,h.lastBaseUpdate=P,h.shared.pending=null}}while(!0);G===null&&(w=F),h.baseState=w,h.firstBaseUpdate=I,h.lastBaseUpdate=G,y===null&&(h.shared.lanes=0),Dn|=_,n.lanes=_,n.memoizedState=F}}function Xf(n,s){if(typeof n!="function")throw Error(o(191,n));n.call(s)}function Qf(n,s){var r=n.callbacks;if(r!==null)for(n.callbacks=null,n=0;n<r.length;n++)Xf(r[n],s)}var qi=O(null),cl=O(0);function Zf(n,s){n=fn,J(cl,n),J(qi,s),fn=n|s.baseLanes}function ga(){J(cl,fn),J(qi,qi.current)}function ya(){fn=cl.current,K(qi),K(cl)}var An=0,me=null,be=null,Fe=null,fl=!1,Vi=!1,oi=!1,dl=0,Wo=0,Bi=null,Ov=0;function Ge(){throw Error(o(321))}function va(n,s){if(s===null)return!1;for(var r=0;r<s.length&&r<n.length;r++)if(!St(n[r],s[r]))return!1;return!0}function Ta(n,s,r,c,h,y){return An=y,me=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,B.H=n===null||n.memoizedState===null?kd:Pd,oi=!1,y=r(c,h),oi=!1,Vi&&(y=jf(s,r,c,h)),Wf(n),y}function Wf(n){B.H=vl;var s=be!==null&&be.next!==null;if(An=0,Fe=be=me=null,fl=!1,Wo=0,Bi=null,s)throw Error(o(300));n===null||Ze||(n=n.dependencies,n!==null&&sl(n)&&(Ze=!0))}function jf(n,s,r,c){me=n;var h=0;do{if(Vi&&(Bi=null),Wo=0,Vi=!1,25<=h)throw Error(o(301));if(h+=1,Fe=be=null,n.updateQueue!=null){var y=n.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}B.H=Kv,y=s(r,c)}while(Vi);return y}function Hv(){var n=B.H,s=n.useState()[0];return s=typeof s.then=="function"?jo(s):s,n=n.useState()[0],(be!==null?be.memoizedState:null)!==n&&(me.flags|=1024),s}function _a(){var n=dl!==0;return dl=0,n}function Sa(n,s,r){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~r}function Ca(n){if(fl){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}fl=!1}An=0,Fe=be=me=null,Vi=!1,Wo=dl=0,Bi=null}function mt(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?me.memoizedState=Fe=n:Fe=Fe.next=n,Fe}function ze(){if(be===null){var n=me.alternate;n=n!==null?n.memoizedState:null}else n=be.next;var s=Fe===null?me.memoizedState:Fe.next;if(s!==null)Fe=s,be=n;else{if(n===null)throw me.alternate===null?Error(o(467)):Error(o(310));be=n,n={memoizedState:be.memoizedState,baseState:be.baseState,baseQueue:be.baseQueue,queue:be.queue,next:null},Fe===null?me.memoizedState=Fe=n:Fe=Fe.next=n}return Fe}function Ea(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function jo(n){var s=Wo;return Wo+=1,Bi===null&&(Bi=[]),n=Jf(Bi,n,s),s=me,(Fe===null?s.memoizedState:Fe.next)===null&&(s=s.alternate,B.H=s===null||s.memoizedState===null?kd:Pd),n}function hl(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return jo(n);if(n.$$typeof===U)return lt(n)}throw Error(o(438,String(n)))}function Aa(n){var s=null,r=me.updateQueue;if(r!==null&&(s=r.memoCache),s==null){var c=me.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),r===null&&(r=Ea(),me.updateQueue=r),r.memoCache=s,r=s.data[s.index],r===void 0)for(r=s.data[s.index]=Array(n),c=0;c<n;c++)r[c]=ee;return s.index++,r}function sn(n,s){return typeof s=="function"?s(n):s}function pl(n){var s=ze();return wa(s,be,n)}function wa(n,s,r){var c=n.queue;if(c===null)throw Error(o(311));c.lastRenderedReducer=r;var h=n.baseQueue,y=c.pending;if(y!==null){if(h!==null){var _=h.next;h.next=y.next,y.next=_}s.baseQueue=h=y,c.pending=null}if(y=n.baseState,h===null)n.memoizedState=y;else{s=h.next;var C=_=null,w=null,I=s,G=!1;do{var F=I.lane&-536870913;if(F!==I.lane?(Se&F)===F:(An&F)===F){var k=I.revertLane;if(k===0)w!==null&&(w=w.next={lane:0,revertLane:0,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),F===Pi&&(G=!0);else if((An&k)===k){I=I.next,k===Pi&&(G=!0);continue}else F={lane:0,revertLane:I.revertLane,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null},w===null?(C=w=F,_=y):w=w.next=F,me.lanes|=k,Dn|=k;F=I.action,oi&&r(y,F),y=I.hasEagerState?I.eagerState:r(y,F)}else k={lane:F,revertLane:I.revertLane,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null},w===null?(C=w=k,_=y):w=w.next=k,me.lanes|=F,Dn|=F;I=I.next}while(I!==null&&I!==s);if(w===null?_=y:w.next=C,!St(y,n.memoizedState)&&(Ze=!0,G&&(r=Li,r!==null)))throw r;n.memoizedState=y,n.baseState=_,n.baseQueue=w,c.lastRenderedState=y}return h===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function xa(n){var s=ze(),r=s.queue;if(r===null)throw Error(o(311));r.lastRenderedReducer=n;var c=r.dispatch,h=r.pending,y=s.memoizedState;if(h!==null){r.pending=null;var _=h=h.next;do y=n(y,_.action),_=_.next;while(_!==h);St(y,s.memoizedState)||(Ze=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),r.lastRenderedState=y}return[y,c]}function ed(n,s,r){var c=me,h=ze(),y=Ae;if(y){if(r===void 0)throw Error(o(407));r=r()}else r=s();var _=!St((be||h).memoizedState,r);_&&(h.memoizedState=r,Ze=!0),h=h.queue;var C=id.bind(null,c,h,n);if(es(2048,8,C,[n]),h.getSnapshot!==s||_||Fe!==null&&Fe.memoizedState.tag&1){if(c.flags|=2048,Gi(9,ml(),nd.bind(null,c,h,r,s),null),Ue===null)throw Error(o(349));y||(An&124)!==0||td(c,s,r)}return r}function td(n,s,r){n.flags|=16384,n={getSnapshot:s,value:r},s=me.updateQueue,s===null?(s=Ea(),me.updateQueue=s,s.stores=[n]):(r=s.stores,r===null?s.stores=[n]:r.push(n))}function nd(n,s,r,c){s.value=r,s.getSnapshot=c,od(s)&&sd(n)}function id(n,s,r){return r(function(){od(s)&&sd(n)})}function od(n){var s=n.getSnapshot;n=n.value;try{var r=s();return!St(n,r)}catch{return!0}}function sd(n){var s=Di(n,2);s!==null&&Rt(s,n,2)}function Ra(n){var s=mt();if(typeof n=="function"){var r=n;if(n=r(),oi){yn(!0);try{r()}finally{yn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sn,lastRenderedState:n},s}function ld(n,s,r,c){return n.baseState=r,wa(n,be,typeof c=="function"?c:sn)}function Fv(n,s,r,c,h){if(yl(n))throw Error(o(485));if(n=s.action,n!==null){var y={payload:h,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){y.listeners.push(_)}};B.T!==null?r(!0):y.isTransition=!1,c(y),r=s.pending,r===null?(y.next=s.pending=y,rd(s,y)):(y.next=r.next,s.pending=r.next=y)}}function rd(n,s){var r=s.action,c=s.payload,h=n.state;if(s.isTransition){var y=B.T,_={};B.T=_;try{var C=r(h,c),w=B.S;w!==null&&w(_,C),ad(n,s,C)}catch(I){ba(n,s,I)}finally{B.T=y}}else try{y=r(h,c),ad(n,s,y)}catch(I){ba(n,s,I)}}function ad(n,s,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(c){ud(n,s,c)},function(c){return ba(n,s,c)}):ud(n,s,r)}function ud(n,s,r){s.status="fulfilled",s.value=r,cd(s),n.state=r,s=n.pending,s!==null&&(r=s.next,r===s?n.pending=null:(r=r.next,s.next=r,rd(n,r)))}function ba(n,s,r){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=r,cd(s),s=s.next;while(s!==c)}n.action=null}function cd(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function fd(n,s){return s}function dd(n,s){if(Ae){var r=Ue.formState;if(r!==null){e:{var c=me;if(Ae){if(Ve){t:{for(var h=Ve,y=$t;h.nodeType!==8;){if(!y){h=null;break t}if(h=Gt(h.nextSibling),h===null){h=null;break t}}y=h.data,h=y==="F!"||y==="F"?h:null}if(h){Ve=Gt(h.nextSibling),c=h.data==="F!";break e}}ei(c)}c=!1}c&&(s=r[0])}}return r=mt(),r.memoizedState=r.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fd,lastRenderedState:s},r.queue=c,r=Dd.bind(null,me,c),c.dispatch=r,c=Ra(!1),y=Ia.bind(null,me,!1,c.queue),c=mt(),h={state:s,dispatch:null,action:n,pending:null},c.queue=h,r=Fv.bind(null,me,h,y,r),h.dispatch=r,c.memoizedState=n,[s,r,!1]}function hd(n){var s=ze();return pd(s,be,n)}function pd(n,s,r){if(s=wa(n,s,fd)[0],n=pl(sn)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=jo(s)}catch(_){throw _===Yo?al:_}else c=s;s=ze();var h=s.queue,y=h.dispatch;return r!==s.memoizedState&&(me.flags|=2048,Gi(9,ml(),zv.bind(null,h,r),null)),[c,y,n]}function zv(n,s){n.action=s}function md(n){var s=ze(),r=be;if(r!==null)return pd(s,r,n);ze(),s=s.memoizedState,r=ze();var c=r.queue.dispatch;return r.memoizedState=n,[s,c,!1]}function Gi(n,s,r,c){return n={tag:n,create:r,deps:c,inst:s,next:null},s=me.updateQueue,s===null&&(s=Ea(),me.updateQueue=s),r=s.lastEffect,r===null?s.lastEffect=n.next=n:(c=r.next,r.next=n,n.next=c,s.lastEffect=n),n}function ml(){return{destroy:void 0,resource:void 0}}function gd(){return ze().memoizedState}function gl(n,s,r,c){var h=mt();c=c===void 0?null:c,me.flags|=n,h.memoizedState=Gi(1|s,ml(),r,c)}function es(n,s,r,c){var h=ze();c=c===void 0?null:c;var y=h.memoizedState.inst;be!==null&&c!==null&&va(c,be.memoizedState.deps)?h.memoizedState=Gi(s,y,r,c):(me.flags|=n,h.memoizedState=Gi(1|s,y,r,c))}function yd(n,s){gl(8390656,8,n,s)}function vd(n,s){es(2048,8,n,s)}function Td(n,s){return es(4,2,n,s)}function _d(n,s){return es(4,4,n,s)}function Sd(n,s){if(typeof s=="function"){n=n();var r=s(n);return function(){typeof r=="function"?r():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Cd(n,s,r){r=r!=null?r.concat([n]):null,es(4,4,Sd.bind(null,s,n),r)}function Ma(){}function Ed(n,s){var r=ze();s=s===void 0?null:s;var c=r.memoizedState;return s!==null&&va(s,c[1])?c[0]:(r.memoizedState=[n,s],n)}function Ad(n,s){var r=ze();s=s===void 0?null:s;var c=r.memoizedState;if(s!==null&&va(s,c[1]))return c[0];if(c=n(),oi){yn(!0);try{n()}finally{yn(!1)}}return r.memoizedState=[c,s],c}function Na(n,s,r){return r===void 0||(An&1073741824)!==0?n.memoizedState=s:(n.memoizedState=r,n=Rh(),me.lanes|=n,Dn|=n,r)}function wd(n,s,r,c){return St(r,s)?r:qi.current!==null?(n=Na(n,r,c),St(n,s)||(Ze=!0),n):(An&42)===0?(Ze=!0,n.memoizedState=r):(n=Rh(),me.lanes|=n,Dn|=n,s)}function xd(n,s,r,c,h){var y=Q.p;Q.p=y!==0&&8>y?y:8;var _=B.T,C={};B.T=C,Ia(n,!1,s,r);try{var w=h(),I=B.S;if(I!==null&&I(C,w),w!==null&&typeof w=="object"&&typeof w.then=="function"){var G=Gv(w,c);ts(n,s,G,xt(n))}else ts(n,s,c,xt(n))}catch(F){ts(n,s,{then:function(){},status:"rejected",reason:F},xt())}finally{Q.p=y,B.T=_}}function $v(){}function Da(n,s,r,c){if(n.tag!==5)throw Error(o(476));var h=Rd(n).queue;xd(n,h,s,le,r===null?$v:function(){return bd(n),r(c)})}function Rd(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sn,lastRenderedState:le},next:null};var r={};return s.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sn,lastRenderedState:r},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function bd(n){var s=Rd(n).next.queue;ts(n,s,{},xt())}function Ua(){return lt(Ts)}function Md(){return ze().memoizedState}function Nd(){return ze().memoizedState}function Jv(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var r=xt();n=Cn(r);var c=En(s,n,r);c!==null&&(Rt(c,s,r),Xo(c,s,r)),s={cache:aa()},n.payload=s;return}s=s.return}}function Yv(n,s,r){var c=xt();r={lane:c,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},yl(n)?Ud(s,r):(r=Wr(n,s,r,c),r!==null&&(Rt(r,n,c),Id(r,s,c)))}function Dd(n,s,r){var c=xt();ts(n,s,r,c)}function ts(n,s,r,c){var h={lane:c,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(yl(n))Ud(s,h);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var _=s.lastRenderedState,C=y(_,r);if(h.hasEagerState=!0,h.eagerState=C,St(C,_))return el(n,s,h,0),Ue===null&&js(),!1}catch{}finally{}if(r=Wr(n,s,h,c),r!==null)return Rt(r,n,c),Id(r,s,c),!0}return!1}function Ia(n,s,r,c){if(c={lane:2,revertLane:fu(),action:c,hasEagerState:!1,eagerState:null,next:null},yl(n)){if(s)throw Error(o(479))}else s=Wr(n,r,c,2),s!==null&&Rt(s,n,2)}function yl(n){var s=n.alternate;return n===me||s!==null&&s===me}function Ud(n,s){Vi=fl=!0;var r=n.pending;r===null?s.next=s:(s.next=r.next,r.next=s),n.pending=s}function Id(n,s,r){if((r&4194048)!==0){var c=s.lanes;c&=n.pendingLanes,r|=c,s.lanes=r,Gc(n,r)}}var vl={readContext:lt,use:hl,useCallback:Ge,useContext:Ge,useEffect:Ge,useImperativeHandle:Ge,useLayoutEffect:Ge,useInsertionEffect:Ge,useMemo:Ge,useReducer:Ge,useRef:Ge,useState:Ge,useDebugValue:Ge,useDeferredValue:Ge,useTransition:Ge,useSyncExternalStore:Ge,useId:Ge,useHostTransitionStatus:Ge,useFormState:Ge,useActionState:Ge,useOptimistic:Ge,useMemoCache:Ge,useCacheRefresh:Ge},kd={readContext:lt,use:hl,useCallback:function(n,s){return mt().memoizedState=[n,s===void 0?null:s],n},useContext:lt,useEffect:yd,useImperativeHandle:function(n,s,r){r=r!=null?r.concat([n]):null,gl(4194308,4,Sd.bind(null,s,n),r)},useLayoutEffect:function(n,s){return gl(4194308,4,n,s)},useInsertionEffect:function(n,s){gl(4,2,n,s)},useMemo:function(n,s){var r=mt();s=s===void 0?null:s;var c=n();if(oi){yn(!0);try{n()}finally{yn(!1)}}return r.memoizedState=[c,s],c},useReducer:function(n,s,r){var c=mt();if(r!==void 0){var h=r(s);if(oi){yn(!0);try{r(s)}finally{yn(!1)}}}else h=s;return c.memoizedState=c.baseState=h,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:h},c.queue=n,n=n.dispatch=Yv.bind(null,me,n),[c.memoizedState,n]},useRef:function(n){var s=mt();return n={current:n},s.memoizedState=n},useState:function(n){n=Ra(n);var s=n.queue,r=Dd.bind(null,me,s);return s.dispatch=r,[n.memoizedState,r]},useDebugValue:Ma,useDeferredValue:function(n,s){var r=mt();return Na(r,n,s)},useTransition:function(){var n=Ra(!1);return n=xd.bind(null,me,n.queue,!0,!1),mt().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,r){var c=me,h=mt();if(Ae){if(r===void 0)throw Error(o(407));r=r()}else{if(r=s(),Ue===null)throw Error(o(349));(Se&124)!==0||td(c,s,r)}h.memoizedState=r;var y={value:r,getSnapshot:s};return h.queue=y,yd(id.bind(null,c,y,n),[n]),c.flags|=2048,Gi(9,ml(),nd.bind(null,c,y,r,s),null),r},useId:function(){var n=mt(),s=Ue.identifierPrefix;if(Ae){var r=tn,c=en;r=(c&~(1<<32-_t(c)-1)).toString(32)+r,s=""+s+"R"+r,r=dl++,0<r&&(s+="H"+r.toString(32)),s+=""}else r=Ov++,s=""+s+"r"+r.toString(32)+"";return n.memoizedState=s},useHostTransitionStatus:Ua,useFormState:dd,useActionState:dd,useOptimistic:function(n){var s=mt();s.memoizedState=s.baseState=n;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=r,s=Ia.bind(null,me,!0,r),r.dispatch=s,[n,s]},useMemoCache:Aa,useCacheRefresh:function(){return mt().memoizedState=Jv.bind(null,me)}},Pd={readContext:lt,use:hl,useCallback:Ed,useContext:lt,useEffect:vd,useImperativeHandle:Cd,useInsertionEffect:Td,useLayoutEffect:_d,useMemo:Ad,useReducer:pl,useRef:gd,useState:function(){return pl(sn)},useDebugValue:Ma,useDeferredValue:function(n,s){var r=ze();return wd(r,be.memoizedState,n,s)},useTransition:function(){var n=pl(sn)[0],s=ze().memoizedState;return[typeof n=="boolean"?n:jo(n),s]},useSyncExternalStore:ed,useId:Md,useHostTransitionStatus:Ua,useFormState:hd,useActionState:hd,useOptimistic:function(n,s){var r=ze();return ld(r,be,n,s)},useMemoCache:Aa,useCacheRefresh:Nd},Kv={readContext:lt,use:hl,useCallback:Ed,useContext:lt,useEffect:vd,useImperativeHandle:Cd,useInsertionEffect:Td,useLayoutEffect:_d,useMemo:Ad,useReducer:xa,useRef:gd,useState:function(){return xa(sn)},useDebugValue:Ma,useDeferredValue:function(n,s){var r=ze();return be===null?Na(r,n,s):wd(r,be.memoizedState,n,s)},useTransition:function(){var n=xa(sn)[0],s=ze().memoizedState;return[typeof n=="boolean"?n:jo(n),s]},useSyncExternalStore:ed,useId:Md,useHostTransitionStatus:Ua,useFormState:md,useActionState:md,useOptimistic:function(n,s){var r=ze();return be!==null?ld(r,be,n,s):(r.baseState=n,[n,r.queue.dispatch])},useMemoCache:Aa,useCacheRefresh:Nd},Oi=null,ns=0;function Tl(n){var s=ns;return ns+=1,Oi===null&&(Oi=[]),Jf(Oi,n,s)}function is(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function _l(n,s){throw s.$$typeof===T?Error(o(525)):(n=Object.prototype.toString.call(s),Error(o(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Ld(n){var s=n._init;return s(n._payload)}function qd(n){function s(M,R){if(n){var D=M.deletions;D===null?(M.deletions=[R],M.flags|=16):D.push(R)}}function r(M,R){if(!n)return null;for(;R!==null;)s(M,R),R=R.sibling;return null}function c(M){for(var R=new Map;M!==null;)M.key!==null?R.set(M.key,M):R.set(M.index,M),M=M.sibling;return R}function h(M,R){return M=jt(M,R),M.index=0,M.sibling=null,M}function y(M,R,D){return M.index=D,n?(D=M.alternate,D!==null?(D=D.index,D<R?(M.flags|=67108866,R):D):(M.flags|=67108866,R)):(M.flags|=1048576,R)}function _(M){return n&&M.alternate===null&&(M.flags|=67108866),M}function C(M,R,D,H){return R===null||R.tag!==6?(R=ea(D,M.mode,H),R.return=M,R):(R=h(R,D),R.return=M,R)}function w(M,R,D,H){var j=D.type;return j===b?G(M,R,D.props.children,H,D.key):R!==null&&(R.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===ue&&Ld(j)===R.type)?(R=h(R,D.props),is(R,D),R.return=M,R):(R=nl(D.type,D.key,D.props,null,M.mode,H),is(R,D),R.return=M,R)}function I(M,R,D,H){return R===null||R.tag!==4||R.stateNode.containerInfo!==D.containerInfo||R.stateNode.implementation!==D.implementation?(R=ta(D,M.mode,H),R.return=M,R):(R=h(R,D.children||[]),R.return=M,R)}function G(M,R,D,H,j){return R===null||R.tag!==7?(R=Qn(D,M.mode,H,j),R.return=M,R):(R=h(R,D),R.return=M,R)}function F(M,R,D){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return R=ea(""+R,M.mode,D),R.return=M,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case S:return D=nl(R.type,R.key,R.props,null,M.mode,D),is(D,R),D.return=M,D;case E:return R=ta(R,M.mode,D),R.return=M,R;case ue:var H=R._init;return R=H(R._payload),F(M,R,D)}if(we(R)||fe(R))return R=Qn(R,M.mode,D,null),R.return=M,R;if(typeof R.then=="function")return F(M,Tl(R),D);if(R.$$typeof===U)return F(M,ll(M,R),D);_l(M,R)}return null}function k(M,R,D,H){var j=R!==null?R.key:null;if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return j!==null?null:C(M,R,""+D,H);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case S:return D.key===j?w(M,R,D,H):null;case E:return D.key===j?I(M,R,D,H):null;case ue:return j=D._init,D=j(D._payload),k(M,R,D,H)}if(we(D)||fe(D))return j!==null?null:G(M,R,D,H,null);if(typeof D.then=="function")return k(M,R,Tl(D),H);if(D.$$typeof===U)return k(M,R,ll(M,D),H);_l(M,D)}return null}function P(M,R,D,H,j){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return M=M.get(D)||null,C(R,M,""+H,j);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case S:return M=M.get(H.key===null?D:H.key)||null,w(R,M,H,j);case E:return M=M.get(H.key===null?D:H.key)||null,I(R,M,H,j);case ue:var ge=H._init;return H=ge(H._payload),P(M,R,D,H,j)}if(we(H)||fe(H))return M=M.get(D)||null,G(R,M,H,j,null);if(typeof H.then=="function")return P(M,R,D,Tl(H),j);if(H.$$typeof===U)return P(M,R,D,ll(R,H),j);_l(R,H)}return null}function ce(M,R,D,H){for(var j=null,ge=null,oe=R,ae=R=0,je=null;oe!==null&&ae<D.length;ae++){oe.index>ae?(je=oe,oe=null):je=oe.sibling;var Ce=k(M,oe,D[ae],H);if(Ce===null){oe===null&&(oe=je);break}n&&oe&&Ce.alternate===null&&s(M,oe),R=y(Ce,R,ae),ge===null?j=Ce:ge.sibling=Ce,ge=Ce,oe=je}if(ae===D.length)return r(M,oe),Ae&&Wn(M,ae),j;if(oe===null){for(;ae<D.length;ae++)oe=F(M,D[ae],H),oe!==null&&(R=y(oe,R,ae),ge===null?j=oe:ge.sibling=oe,ge=oe);return Ae&&Wn(M,ae),j}for(oe=c(oe);ae<D.length;ae++)je=P(oe,M,ae,D[ae],H),je!==null&&(n&&je.alternate!==null&&oe.delete(je.key===null?ae:je.key),R=y(je,R,ae),ge===null?j=je:ge.sibling=je,ge=je);return n&&oe.forEach(function(Gn){return s(M,Gn)}),Ae&&Wn(M,ae),j}function re(M,R,D,H){if(D==null)throw Error(o(151));for(var j=null,ge=null,oe=R,ae=R=0,je=null,Ce=D.next();oe!==null&&!Ce.done;ae++,Ce=D.next()){oe.index>ae?(je=oe,oe=null):je=oe.sibling;var Gn=k(M,oe,Ce.value,H);if(Gn===null){oe===null&&(oe=je);break}n&&oe&&Gn.alternate===null&&s(M,oe),R=y(Gn,R,ae),ge===null?j=Gn:ge.sibling=Gn,ge=Gn,oe=je}if(Ce.done)return r(M,oe),Ae&&Wn(M,ae),j;if(oe===null){for(;!Ce.done;ae++,Ce=D.next())Ce=F(M,Ce.value,H),Ce!==null&&(R=y(Ce,R,ae),ge===null?j=Ce:ge.sibling=Ce,ge=Ce);return Ae&&Wn(M,ae),j}for(oe=c(oe);!Ce.done;ae++,Ce=D.next())Ce=P(oe,M,ae,Ce.value,H),Ce!==null&&(n&&Ce.alternate!==null&&oe.delete(Ce.key===null?ae:Ce.key),R=y(Ce,R,ae),ge===null?j=Ce:ge.sibling=Ce,ge=Ce);return n&&oe.forEach(function(X0){return s(M,X0)}),Ae&&Wn(M,ae),j}function Ne(M,R,D,H){if(typeof D=="object"&&D!==null&&D.type===b&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case S:e:{for(var j=D.key;R!==null;){if(R.key===j){if(j=D.type,j===b){if(R.tag===7){r(M,R.sibling),H=h(R,D.props.children),H.return=M,M=H;break e}}else if(R.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===ue&&Ld(j)===R.type){r(M,R.sibling),H=h(R,D.props),is(H,D),H.return=M,M=H;break e}r(M,R);break}else s(M,R);R=R.sibling}D.type===b?(H=Qn(D.props.children,M.mode,H,D.key),H.return=M,M=H):(H=nl(D.type,D.key,D.props,null,M.mode,H),is(H,D),H.return=M,M=H)}return _(M);case E:e:{for(j=D.key;R!==null;){if(R.key===j)if(R.tag===4&&R.stateNode.containerInfo===D.containerInfo&&R.stateNode.implementation===D.implementation){r(M,R.sibling),H=h(R,D.children||[]),H.return=M,M=H;break e}else{r(M,R);break}else s(M,R);R=R.sibling}H=ta(D,M.mode,H),H.return=M,M=H}return _(M);case ue:return j=D._init,D=j(D._payload),Ne(M,R,D,H)}if(we(D))return ce(M,R,D,H);if(fe(D)){if(j=fe(D),typeof j!="function")throw Error(o(150));return D=j.call(D),re(M,R,D,H)}if(typeof D.then=="function")return Ne(M,R,Tl(D),H);if(D.$$typeof===U)return Ne(M,R,ll(M,D),H);_l(M,D)}return typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint"?(D=""+D,R!==null&&R.tag===6?(r(M,R.sibling),H=h(R,D),H.return=M,M=H):(r(M,R),H=ea(D,M.mode,H),H.return=M,M=H),_(M)):r(M,R)}return function(M,R,D,H){try{ns=0;var j=Ne(M,R,D,H);return Oi=null,j}catch(oe){if(oe===Yo||oe===al)throw oe;var ge=Ct(29,oe,null,M.mode);return ge.lanes=H,ge.return=M,ge}finally{}}}var Hi=qd(!0),Vd=qd(!1),kt=O(null),Jt=null;function wn(n){var s=n.alternate;J(Ye,Ye.current&1),J(kt,n),Jt===null&&(s===null||qi.current!==null||s.memoizedState!==null)&&(Jt=n)}function Bd(n){if(n.tag===22){if(J(Ye,Ye.current),J(kt,n),Jt===null){var s=n.alternate;s!==null&&s.memoizedState!==null&&(Jt=n)}}else xn()}function xn(){J(Ye,Ye.current),J(kt,kt.current)}function ln(n){K(kt),Jt===n&&(Jt=null),K(Ye)}var Ye=O(0);function Sl(n){for(var s=n;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||Eu(r)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function ka(n,s,r,c){s=n.memoizedState,r=r(c,s),r=r==null?s:v({},s,r),n.memoizedState=r,n.lanes===0&&(n.updateQueue.baseState=r)}var Pa={enqueueSetState:function(n,s,r){n=n._reactInternals;var c=xt(),h=Cn(c);h.payload=s,r!=null&&(h.callback=r),s=En(n,h,c),s!==null&&(Rt(s,n,c),Xo(s,n,c))},enqueueReplaceState:function(n,s,r){n=n._reactInternals;var c=xt(),h=Cn(c);h.tag=1,h.payload=s,r!=null&&(h.callback=r),s=En(n,h,c),s!==null&&(Rt(s,n,c),Xo(s,n,c))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var r=xt(),c=Cn(r);c.tag=2,s!=null&&(c.callback=s),s=En(n,c,r),s!==null&&(Rt(s,n,r),Xo(s,n,r))}};function Gd(n,s,r,c,h,y,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,y,_):s.prototype&&s.prototype.isPureReactComponent?!Bo(r,c)||!Bo(h,y):!0}function Od(n,s,r,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,c),s.state!==n&&Pa.enqueueReplaceState(s,s.state,null)}function si(n,s){var r=s;if("ref"in s){r={};for(var c in s)c!=="ref"&&(r[c]=s[c])}if(n=n.defaultProps){r===s&&(r=v({},r));for(var h in n)r[h]===void 0&&(r[h]=n[h])}return r}var Cl=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Hd(n){Cl(n)}function Fd(n){console.error(n)}function zd(n){Cl(n)}function El(n,s){try{var r=n.onUncaughtError;r(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function $d(n,s,r){try{var c=n.onCaughtError;c(r.value,{componentStack:r.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function La(n,s,r){return r=Cn(r),r.tag=3,r.payload={element:null},r.callback=function(){El(n,s)},r}function Jd(n){return n=Cn(n),n.tag=3,n}function Yd(n,s,r,c){var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var y=c.value;n.payload=function(){return h(y)},n.callback=function(){$d(s,r,c)}}var _=r.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){$d(s,r,c),typeof h!="function"&&(Un===null?Un=new Set([this]):Un.add(this));var C=c.stack;this.componentDidCatch(c.value,{componentStack:C!==null?C:""})})}function Xv(n,s,r,c,h){if(r.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=r.alternate,s!==null&&zo(s,r,h,!0),r=kt.current,r!==null){switch(r.tag){case 13:return Jt===null?lu():r.alternate===null&&Be===0&&(Be=3),r.flags&=-257,r.flags|=65536,r.lanes=h,c===fa?r.flags|=16384:(s=r.updateQueue,s===null?r.updateQueue=new Set([c]):s.add(c),au(n,c,h)),!1;case 22:return r.flags|=65536,c===fa?r.flags|=16384:(s=r.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},r.updateQueue=s):(r=s.retryQueue,r===null?s.retryQueue=new Set([c]):r.add(c)),au(n,c,h)),!1}throw Error(o(435,r.tag))}return au(n,c,h),lu(),!1}if(Ae)return s=kt.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,c!==oa&&(n=Error(o(422),{cause:c}),Fo(Nt(n,r)))):(c!==oa&&(s=Error(o(423),{cause:c}),Fo(Nt(s,r))),n=n.current.alternate,n.flags|=65536,h&=-h,n.lanes|=h,c=Nt(c,r),h=La(n.stateNode,c,h),pa(n,h),Be!==4&&(Be=2)),!1;var y=Error(o(520),{cause:c});if(y=Nt(y,r),cs===null?cs=[y]:cs.push(y),Be!==4&&(Be=2),s===null)return!0;c=Nt(c,r),r=s;do{switch(r.tag){case 3:return r.flags|=65536,n=h&-h,r.lanes|=n,n=La(r.stateNode,c,n),pa(r,n),!1;case 1:if(s=r.type,y=r.stateNode,(r.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Un===null||!Un.has(y))))return r.flags|=65536,h&=-h,r.lanes|=h,h=Jd(h),Yd(h,n,r,c),pa(r,h),!1}r=r.return}while(r!==null);return!1}var Kd=Error(o(461)),Ze=!1;function tt(n,s,r,c){s.child=n===null?Vd(s,null,r,c):Hi(s,n.child,r,c)}function Xd(n,s,r,c,h){r=r.render;var y=s.ref;if("ref"in c){var _={};for(var C in c)C!=="ref"&&(_[C]=c[C])}else _=c;return ni(s),c=Ta(n,s,r,_,y,h),C=_a(),n!==null&&!Ze?(Sa(n,s,h),rn(n,s,h)):(Ae&&C&&na(s),s.flags|=1,tt(n,s,c,h),s.child)}function Qd(n,s,r,c,h){if(n===null){var y=r.type;return typeof y=="function"&&!jr(y)&&y.defaultProps===void 0&&r.compare===null?(s.tag=15,s.type=y,Zd(n,s,y,c,h)):(n=nl(r.type,null,c,s,s.mode,h),n.ref=s.ref,n.return=s,s.child=n)}if(y=n.child,!za(n,h)){var _=y.memoizedProps;if(r=r.compare,r=r!==null?r:Bo,r(_,c)&&n.ref===s.ref)return rn(n,s,h)}return s.flags|=1,n=jt(y,c),n.ref=s.ref,n.return=s,s.child=n}function Zd(n,s,r,c,h){if(n!==null){var y=n.memoizedProps;if(Bo(y,c)&&n.ref===s.ref)if(Ze=!1,s.pendingProps=c=y,za(n,h))(n.flags&131072)!==0&&(Ze=!0);else return s.lanes=n.lanes,rn(n,s,h)}return qa(n,s,r,c,h)}function Wd(n,s,r){var c=s.pendingProps,h=c.children,y=n!==null?n.memoizedState:null;if(c.mode==="hidden"){if((s.flags&128)!==0){if(c=y!==null?y.baseLanes|r:r,n!==null){for(h=s.child=n.child,y=0;h!==null;)y=y|h.lanes|h.childLanes,h=h.sibling;s.childLanes=y&~c}else s.childLanes=0,s.child=null;return jd(n,s,c,r)}if((r&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&rl(s,y!==null?y.cachePool:null),y!==null?Zf(s,y):ga(),Bd(s);else return s.lanes=s.childLanes=536870912,jd(n,s,y!==null?y.baseLanes|r:r,r)}else y!==null?(rl(s,y.cachePool),Zf(s,y),xn(),s.memoizedState=null):(n!==null&&rl(s,null),ga(),xn());return tt(n,s,h,r),s.child}function jd(n,s,r,c){var h=ca();return h=h===null?null:{parent:Je._currentValue,pool:h},s.memoizedState={baseLanes:r,cachePool:h},n!==null&&rl(s,null),ga(),Bd(s),n!==null&&zo(n,s,c,!0),null}function Al(n,s){var r=s.ref;if(r===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(o(284));(n===null||n.ref!==r)&&(s.flags|=4194816)}}function qa(n,s,r,c,h){return ni(s),r=Ta(n,s,r,c,void 0,h),c=_a(),n!==null&&!Ze?(Sa(n,s,h),rn(n,s,h)):(Ae&&c&&na(s),s.flags|=1,tt(n,s,r,h),s.child)}function eh(n,s,r,c,h,y){return ni(s),s.updateQueue=null,r=jf(s,c,r,h),Wf(n),c=_a(),n!==null&&!Ze?(Sa(n,s,y),rn(n,s,y)):(Ae&&c&&na(s),s.flags|=1,tt(n,s,r,y),s.child)}function th(n,s,r,c,h){if(ni(s),s.stateNode===null){var y=Ui,_=r.contextType;typeof _=="object"&&_!==null&&(y=lt(_)),y=new r(c,y),s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Pa,s.stateNode=y,y._reactInternals=s,y=s.stateNode,y.props=c,y.state=s.memoizedState,y.refs={},da(s),_=r.contextType,y.context=typeof _=="object"&&_!==null?lt(_):Ui,y.state=s.memoizedState,_=r.getDerivedStateFromProps,typeof _=="function"&&(ka(s,r,_,c),y.state=s.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(_=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),_!==y.state&&Pa.enqueueReplaceState(y,y.state,null),Zo(s,c,y,h),Qo(),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(n===null){y=s.stateNode;var C=s.memoizedProps,w=si(r,C);y.props=w;var I=y.context,G=r.contextType;_=Ui,typeof G=="object"&&G!==null&&(_=lt(G));var F=r.getDerivedStateFromProps;G=typeof F=="function"||typeof y.getSnapshotBeforeUpdate=="function",C=s.pendingProps!==C,G||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(C||I!==_)&&Od(s,y,c,_),Sn=!1;var k=s.memoizedState;y.state=k,Zo(s,c,y,h),Qo(),I=s.memoizedState,C||k!==I||Sn?(typeof F=="function"&&(ka(s,r,F,c),I=s.memoizedState),(w=Sn||Gd(s,r,w,c,k,I,_))?(G||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=I),y.props=c,y.state=I,y.context=_,c=w):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{y=s.stateNode,ha(n,s),_=s.memoizedProps,G=si(r,_),y.props=G,F=s.pendingProps,k=y.context,I=r.contextType,w=Ui,typeof I=="object"&&I!==null&&(w=lt(I)),C=r.getDerivedStateFromProps,(I=typeof C=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(_!==F||k!==w)&&Od(s,y,c,w),Sn=!1,k=s.memoizedState,y.state=k,Zo(s,c,y,h),Qo();var P=s.memoizedState;_!==F||k!==P||Sn||n!==null&&n.dependencies!==null&&sl(n.dependencies)?(typeof C=="function"&&(ka(s,r,C,c),P=s.memoizedState),(G=Sn||Gd(s,r,G,c,k,P,w)||n!==null&&n.dependencies!==null&&sl(n.dependencies))?(I||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(c,P,w),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(c,P,w)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||_===n.memoizedProps&&k===n.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&k===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=P),y.props=c,y.state=P,y.context=w,c=G):(typeof y.componentDidUpdate!="function"||_===n.memoizedProps&&k===n.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&k===n.memoizedState||(s.flags|=1024),c=!1)}return y=c,Al(n,s),c=(s.flags&128)!==0,y||c?(y=s.stateNode,r=c&&typeof r.getDerivedStateFromError!="function"?null:y.render(),s.flags|=1,n!==null&&c?(s.child=Hi(s,n.child,null,h),s.child=Hi(s,null,r,h)):tt(n,s,r,h),s.memoizedState=y.state,n=s.child):n=rn(n,s,h),n}function nh(n,s,r,c){return Ho(),s.flags|=256,tt(n,s,r,c),s.child}var Va={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ba(n){return{baseLanes:n,cachePool:Ff()}}function Ga(n,s,r){return n=n!==null?n.childLanes&~r:0,s&&(n|=Pt),n}function ih(n,s,r){var c=s.pendingProps,h=!1,y=(s.flags&128)!==0,_;if((_=y)||(_=n!==null&&n.memoizedState===null?!1:(Ye.current&2)!==0),_&&(h=!0,s.flags&=-129),_=(s.flags&32)!==0,s.flags&=-33,n===null){if(Ae){if(h?wn(s):xn(),Ae){var C=Ve,w;if(w=C){e:{for(w=C,C=$t;w.nodeType!==8;){if(!C){C=null;break e}if(w=Gt(w.nextSibling),w===null){C=null;break e}}C=w}C!==null?(s.memoizedState={dehydrated:C,treeContext:Zn!==null?{id:en,overflow:tn}:null,retryLane:536870912,hydrationErrors:null},w=Ct(18,null,null,0),w.stateNode=C,w.return=s,s.child=w,ut=s,Ve=null,w=!0):w=!1}w||ei(s)}if(C=s.memoizedState,C!==null&&(C=C.dehydrated,C!==null))return Eu(C)?s.lanes=32:s.lanes=536870912,null;ln(s)}return C=c.children,c=c.fallback,h?(xn(),h=s.mode,C=wl({mode:"hidden",children:C},h),c=Qn(c,h,r,null),C.return=s,c.return=s,C.sibling=c,s.child=C,h=s.child,h.memoizedState=Ba(r),h.childLanes=Ga(n,_,r),s.memoizedState=Va,c):(wn(s),Oa(s,C))}if(w=n.memoizedState,w!==null&&(C=w.dehydrated,C!==null)){if(y)s.flags&256?(wn(s),s.flags&=-257,s=Ha(n,s,r)):s.memoizedState!==null?(xn(),s.child=n.child,s.flags|=128,s=null):(xn(),h=c.fallback,C=s.mode,c=wl({mode:"visible",children:c.children},C),h=Qn(h,C,r,null),h.flags|=2,c.return=s,h.return=s,c.sibling=h,s.child=c,Hi(s,n.child,null,r),c=s.child,c.memoizedState=Ba(r),c.childLanes=Ga(n,_,r),s.memoizedState=Va,s=h);else if(wn(s),Eu(C)){if(_=C.nextSibling&&C.nextSibling.dataset,_)var I=_.dgst;_=I,c=Error(o(419)),c.stack="",c.digest=_,Fo({value:c,source:null,stack:null}),s=Ha(n,s,r)}else if(Ze||zo(n,s,r,!1),_=(r&n.childLanes)!==0,Ze||_){if(_=Ue,_!==null&&(c=r&-r,c=(c&42)!==0?1:Ar(c),c=(c&(_.suspendedLanes|r))!==0?0:c,c!==0&&c!==w.retryLane))throw w.retryLane=c,Di(n,c),Rt(_,n,c),Kd;C.data==="$?"||lu(),s=Ha(n,s,r)}else C.data==="$?"?(s.flags|=192,s.child=n.child,s=null):(n=w.treeContext,Ve=Gt(C.nextSibling),ut=s,Ae=!0,jn=null,$t=!1,n!==null&&(Ut[It++]=en,Ut[It++]=tn,Ut[It++]=Zn,en=n.id,tn=n.overflow,Zn=s),s=Oa(s,c.children),s.flags|=4096);return s}return h?(xn(),h=c.fallback,C=s.mode,w=n.child,I=w.sibling,c=jt(w,{mode:"hidden",children:c.children}),c.subtreeFlags=w.subtreeFlags&65011712,I!==null?h=jt(I,h):(h=Qn(h,C,r,null),h.flags|=2),h.return=s,c.return=s,c.sibling=h,s.child=c,c=h,h=s.child,C=n.child.memoizedState,C===null?C=Ba(r):(w=C.cachePool,w!==null?(I=Je._currentValue,w=w.parent!==I?{parent:I,pool:I}:w):w=Ff(),C={baseLanes:C.baseLanes|r,cachePool:w}),h.memoizedState=C,h.childLanes=Ga(n,_,r),s.memoizedState=Va,c):(wn(s),r=n.child,n=r.sibling,r=jt(r,{mode:"visible",children:c.children}),r.return=s,r.sibling=null,n!==null&&(_=s.deletions,_===null?(s.deletions=[n],s.flags|=16):_.push(n)),s.child=r,s.memoizedState=null,r)}function Oa(n,s){return s=wl({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function wl(n,s){return n=Ct(22,n,null,s),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Ha(n,s,r){return Hi(s,n.child,null,r),n=Oa(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function oh(n,s,r){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),la(n.return,s,r)}function Fa(n,s,r,c,h){var y=n.memoizedState;y===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:r,tailMode:h}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=c,y.tail=r,y.tailMode=h)}function sh(n,s,r){var c=s.pendingProps,h=c.revealOrder,y=c.tail;if(tt(n,s,c.children,r),c=Ye.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&oh(n,r,s);else if(n.tag===19)oh(n,r,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}switch(J(Ye,c),h){case"forwards":for(r=s.child,h=null;r!==null;)n=r.alternate,n!==null&&Sl(n)===null&&(h=r),r=r.sibling;r=h,r===null?(h=s.child,s.child=null):(h=r.sibling,r.sibling=null),Fa(s,!1,h,r,y);break;case"backwards":for(r=null,h=s.child,s.child=null;h!==null;){if(n=h.alternate,n!==null&&Sl(n)===null){s.child=h;break}n=h.sibling,h.sibling=r,r=h,h=n}Fa(s,!0,r,null,y);break;case"together":Fa(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function rn(n,s,r){if(n!==null&&(s.dependencies=n.dependencies),Dn|=s.lanes,(r&s.childLanes)===0)if(n!==null){if(zo(n,s,r,!1),(r&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(o(153));if(s.child!==null){for(n=s.child,r=jt(n,n.pendingProps),s.child=r,r.return=s;n.sibling!==null;)n=n.sibling,r=r.sibling=jt(n,n.pendingProps),r.return=s;r.sibling=null}return s.child}function za(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&sl(n)))}function Qv(n,s,r){switch(s.tag){case 3:Pe(s,s.stateNode.containerInfo),_n(s,Je,n.memoizedState.cache),Ho();break;case 27:case 5:Tr(s);break;case 4:Pe(s,s.stateNode.containerInfo);break;case 10:_n(s,s.type,s.memoizedProps.value);break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(wn(s),s.flags|=128,null):(r&s.child.childLanes)!==0?ih(n,s,r):(wn(s),n=rn(n,s,r),n!==null?n.sibling:null);wn(s);break;case 19:var h=(n.flags&128)!==0;if(c=(r&s.childLanes)!==0,c||(zo(n,s,r,!1),c=(r&s.childLanes)!==0),h){if(c)return sh(n,s,r);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),J(Ye,Ye.current),c)break;return null;case 22:case 23:return s.lanes=0,Wd(n,s,r);case 24:_n(s,Je,n.memoizedState.cache)}return rn(n,s,r)}function lh(n,s,r){if(n!==null)if(n.memoizedProps!==s.pendingProps)Ze=!0;else{if(!za(n,r)&&(s.flags&128)===0)return Ze=!1,Qv(n,s,r);Ze=(n.flags&131072)!==0}else Ze=!1,Ae&&(s.flags&1048576)!==0&&Lf(s,ol,s.index);switch(s.lanes=0,s.tag){case 16:e:{n=s.pendingProps;var c=s.elementType,h=c._init;if(c=h(c._payload),s.type=c,typeof c=="function")jr(c)?(n=si(c,n),s.tag=1,s=th(null,s,c,n,r)):(s.tag=0,s=qa(null,s,c,n,r));else{if(c!=null){if(h=c.$$typeof,h===$){s.tag=11,s=Xd(null,s,c,n,r);break e}else if(h===Z){s.tag=14,s=Qd(null,s,c,n,r);break e}}throw s=$e(c)||c,Error(o(306,s,""))}}return s;case 0:return qa(n,s,s.type,s.pendingProps,r);case 1:return c=s.type,h=si(c,s.pendingProps),th(n,s,c,h,r);case 3:e:{if(Pe(s,s.stateNode.containerInfo),n===null)throw Error(o(387));c=s.pendingProps;var y=s.memoizedState;h=y.element,ha(n,s),Zo(s,c,null,r);var _=s.memoizedState;if(c=_.cache,_n(s,Je,c),c!==y.cache&&ra(s,[Je],r,!0),Qo(),c=_.element,y.isDehydrated)if(y={element:c,isDehydrated:!1,cache:_.cache},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){s=nh(n,s,c,r);break e}else if(c!==h){h=Nt(Error(o(424)),s),Fo(h),s=nh(n,s,c,r);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Ve=Gt(n.firstChild),ut=s,Ae=!0,jn=null,$t=!0,r=Vd(s,null,c,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Ho(),c===h){s=rn(n,s,r);break e}tt(n,s,c,r)}s=s.child}return s;case 26:return Al(n,s),n===null?(r=cp(s.type,null,s.pendingProps,null))?s.memoizedState=r:Ae||(r=s.type,n=s.pendingProps,c=Bl(de.current).createElement(r),c[st]=s,c[ht]=n,it(c,r,n),Qe(c),s.stateNode=c):s.memoizedState=cp(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Tr(s),n===null&&Ae&&(c=s.stateNode=rp(s.type,s.pendingProps,de.current),ut=s,$t=!0,h=Ve,Pn(s.type)?(Au=h,Ve=Gt(c.firstChild)):Ve=h),tt(n,s,s.pendingProps.children,r),Al(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Ae&&((h=c=Ve)&&(c=A0(c,s.type,s.pendingProps,$t),c!==null?(s.stateNode=c,ut=s,Ve=Gt(c.firstChild),$t=!1,h=!0):h=!1),h||ei(s)),Tr(s),h=s.type,y=s.pendingProps,_=n!==null?n.memoizedProps:null,c=y.children,_u(h,y)?c=null:_!==null&&_u(h,_)&&(s.flags|=32),s.memoizedState!==null&&(h=Ta(n,s,Hv,null,null,r),Ts._currentValue=h),Al(n,s),tt(n,s,c,r),s.child;case 6:return n===null&&Ae&&((n=r=Ve)&&(r=w0(r,s.pendingProps,$t),r!==null?(s.stateNode=r,ut=s,Ve=null,n=!0):n=!1),n||ei(s)),null;case 13:return ih(n,s,r);case 4:return Pe(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=Hi(s,null,c,r):tt(n,s,c,r),s.child;case 11:return Xd(n,s,s.type,s.pendingProps,r);case 7:return tt(n,s,s.pendingProps,r),s.child;case 8:return tt(n,s,s.pendingProps.children,r),s.child;case 12:return tt(n,s,s.pendingProps.children,r),s.child;case 10:return c=s.pendingProps,_n(s,s.type,c.value),tt(n,s,c.children,r),s.child;case 9:return h=s.type._context,c=s.pendingProps.children,ni(s),h=lt(h),c=c(h),s.flags|=1,tt(n,s,c,r),s.child;case 14:return Qd(n,s,s.type,s.pendingProps,r);case 15:return Zd(n,s,s.type,s.pendingProps,r);case 19:return sh(n,s,r);case 31:return c=s.pendingProps,r=s.mode,c={mode:c.mode,children:c.children},n===null?(r=wl(c,r),r.ref=s.ref,s.child=r,r.return=s,s=r):(r=jt(n.child,c),r.ref=s.ref,s.child=r,r.return=s,s=r),s;case 22:return Wd(n,s,r);case 24:return ni(s),c=lt(Je),n===null?(h=ca(),h===null&&(h=Ue,y=aa(),h.pooledCache=y,y.refCount++,y!==null&&(h.pooledCacheLanes|=r),h=y),s.memoizedState={parent:c,cache:h},da(s),_n(s,Je,h)):((n.lanes&r)!==0&&(ha(n,s),Zo(s,null,null,r),Qo()),h=n.memoizedState,y=s.memoizedState,h.parent!==c?(h={parent:c,cache:c},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),_n(s,Je,c)):(c=y.cache,_n(s,Je,c),c!==h.cache&&ra(s,[Je],r,!0))),tt(n,s,s.pendingProps.children,r),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function an(n){n.flags|=4}function rh(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!mp(s)){if(s=kt.current,s!==null&&((Se&4194048)===Se?Jt!==null:(Se&62914560)!==Se&&(Se&536870912)===0||s!==Jt))throw Ko=fa,zf;n.flags|=8192}}function xl(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Vc():536870912,n.lanes|=s,Ji|=s)}function os(n,s){if(!Ae)switch(n.tailMode){case"hidden":s=n.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?n.tail=null:r.sibling=null;break;case"collapsed":r=n.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function qe(n){var s=n.alternate!==null&&n.alternate.child===n.child,r=0,c=0;if(s)for(var h=n.child;h!==null;)r|=h.lanes|h.childLanes,c|=h.subtreeFlags&65011712,c|=h.flags&65011712,h.return=n,h=h.sibling;else for(h=n.child;h!==null;)r|=h.lanes|h.childLanes,c|=h.subtreeFlags,c|=h.flags,h.return=n,h=h.sibling;return n.subtreeFlags|=c,n.childLanes=r,s}function Zv(n,s,r){var c=s.pendingProps;switch(ia(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qe(s),null;case 1:return qe(s),null;case 3:return r=s.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),on(Je),gn(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Oo(s)?an(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Bf())),qe(s),null;case 26:return r=s.memoizedState,n===null?(an(s),r!==null?(qe(s),rh(s,r)):(qe(s),s.flags&=-16777217)):r?r!==n.memoizedState?(an(s),qe(s),rh(s,r)):(qe(s),s.flags&=-16777217):(n.memoizedProps!==c&&an(s),qe(s),s.flags&=-16777217),null;case 27:qs(s),r=de.current;var h=s.type;if(n!==null&&s.stateNode!=null)n.memoizedProps!==c&&an(s);else{if(!c){if(s.stateNode===null)throw Error(o(166));return qe(s),null}n=te.current,Oo(s)?qf(s):(n=rp(h,c,r),s.stateNode=n,an(s))}return qe(s),null;case 5:if(qs(s),r=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==c&&an(s);else{if(!c){if(s.stateNode===null)throw Error(o(166));return qe(s),null}if(n=te.current,Oo(s))qf(s);else{switch(h=Bl(de.current),n){case 1:n=h.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:n=h.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":n=h.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":n=h.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":n=h.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof c.is=="string"?h.createElement("select",{is:c.is}):h.createElement("select"),c.multiple?n.multiple=!0:c.size&&(n.size=c.size);break;default:n=typeof c.is=="string"?h.createElement(r,{is:c.is}):h.createElement(r)}}n[st]=s,n[ht]=c;e:for(h=s.child;h!==null;){if(h.tag===5||h.tag===6)n.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===s)break e;for(;h.sibling===null;){if(h.return===null||h.return===s)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}s.stateNode=n;e:switch(it(n,r,c),r){case"button":case"input":case"select":case"textarea":n=!!c.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&an(s)}}return qe(s),s.flags&=-16777217,null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==c&&an(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(o(166));if(n=de.current,Oo(s)){if(n=s.stateNode,r=s.memoizedProps,c=null,h=ut,h!==null)switch(h.tag){case 27:case 5:c=h.memoizedProps}n[st]=s,n=!!(n.nodeValue===r||c!==null&&c.suppressHydrationWarning===!0||ep(n.nodeValue,r)),n||ei(s)}else n=Bl(n).createTextNode(c),n[st]=s,s.stateNode=n}return qe(s),null;case 13:if(c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(h=Oo(s),c!==null&&c.dehydrated!==null){if(n===null){if(!h)throw Error(o(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(o(317));h[st]=s}else Ho(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;qe(s),h=!1}else h=Bf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(ln(s),s):(ln(s),null)}if(ln(s),(s.flags&128)!==0)return s.lanes=r,s;if(r=c!==null,n=n!==null&&n.memoizedState!==null,r){c=s.child,h=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(h=c.alternate.memoizedState.cachePool.pool);var y=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==h&&(c.flags|=2048)}return r!==n&&r&&(s.child.flags|=8192),xl(s,s.updateQueue),qe(s),null;case 4:return gn(),n===null&&mu(s.stateNode.containerInfo),qe(s),null;case 10:return on(s.type),qe(s),null;case 19:if(K(Ye),h=s.memoizedState,h===null)return qe(s),null;if(c=(s.flags&128)!==0,y=h.rendering,y===null)if(c)os(h,!1);else{if(Be!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(y=Sl(n),y!==null){for(s.flags|=128,os(h,!1),n=y.updateQueue,s.updateQueue=n,xl(s,n),s.subtreeFlags=0,n=r,r=s.child;r!==null;)Pf(r,n),r=r.sibling;return J(Ye,Ye.current&1|2),s.child}n=n.sibling}h.tail!==null&&zt()>Ml&&(s.flags|=128,c=!0,os(h,!1),s.lanes=4194304)}else{if(!c)if(n=Sl(y),n!==null){if(s.flags|=128,c=!0,n=n.updateQueue,s.updateQueue=n,xl(s,n),os(h,!0),h.tail===null&&h.tailMode==="hidden"&&!y.alternate&&!Ae)return qe(s),null}else 2*zt()-h.renderingStartTime>Ml&&r!==536870912&&(s.flags|=128,c=!0,os(h,!1),s.lanes=4194304);h.isBackwards?(y.sibling=s.child,s.child=y):(n=h.last,n!==null?n.sibling=y:s.child=y,h.last=y)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=zt(),s.sibling=null,n=Ye.current,J(Ye,c?n&1|2:n&1),s):(qe(s),null);case 22:case 23:return ln(s),ya(),c=s.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(r&536870912)!==0&&(s.flags&128)===0&&(qe(s),s.subtreeFlags&6&&(s.flags|=8192)):qe(s),r=s.updateQueue,r!==null&&xl(s,r.retryQueue),r=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==r&&(s.flags|=2048),n!==null&&K(ii),null;case 24:return r=null,n!==null&&(r=n.memoizedState.cache),s.memoizedState.cache!==r&&(s.flags|=2048),on(Je),qe(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function Wv(n,s){switch(ia(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return on(Je),gn(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return qs(s),null;case 13:if(ln(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(o(340));Ho()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return K(Ye),null;case 4:return gn(),null;case 10:return on(s.type),null;case 22:case 23:return ln(s),ya(),n!==null&&K(ii),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return on(Je),null;case 25:return null;default:return null}}function ah(n,s){switch(ia(s),s.tag){case 3:on(Je),gn();break;case 26:case 27:case 5:qs(s);break;case 4:gn();break;case 13:ln(s);break;case 19:K(Ye);break;case 10:on(s.type);break;case 22:case 23:ln(s),ya(),n!==null&&K(ii);break;case 24:on(Je)}}function ss(n,s){try{var r=s.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var h=c.next;r=h;do{if((r.tag&n)===n){c=void 0;var y=r.create,_=r.inst;c=y(),_.destroy=c}r=r.next}while(r!==h)}}catch(C){De(s,s.return,C)}}function Rn(n,s,r){try{var c=s.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var y=h.next;c=y;do{if((c.tag&n)===n){var _=c.inst,C=_.destroy;if(C!==void 0){_.destroy=void 0,h=s;var w=r,I=C;try{I()}catch(G){De(h,w,G)}}}c=c.next}while(c!==y)}}catch(G){De(s,s.return,G)}}function uh(n){var s=n.updateQueue;if(s!==null){var r=n.stateNode;try{Qf(s,r)}catch(c){De(n,n.return,c)}}}function ch(n,s,r){r.props=si(n.type,n.memoizedProps),r.state=n.memoizedState;try{r.componentWillUnmount()}catch(c){De(n,s,c)}}function ls(n,s){try{var r=n.ref;if(r!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof r=="function"?n.refCleanup=r(c):r.current=c}}catch(h){De(n,s,h)}}function Yt(n,s){var r=n.ref,c=n.refCleanup;if(r!==null)if(typeof c=="function")try{c()}catch(h){De(n,s,h)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(h){De(n,s,h)}else r.current=null}function fh(n){var s=n.type,r=n.memoizedProps,c=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":r.autoFocus&&c.focus();break e;case"img":r.src?c.src=r.src:r.srcSet&&(c.srcset=r.srcSet)}}catch(h){De(n,n.return,h)}}function $a(n,s,r){try{var c=n.stateNode;T0(c,n.type,r,s),c[ht]=s}catch(h){De(n,n.return,h)}}function dh(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Pn(n.type)||n.tag===4}function Ja(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||dh(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Pn(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Ya(n,s,r){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(n,s):(s=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,s.appendChild(n),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=Vl));else if(c!==4&&(c===27&&Pn(n.type)&&(r=n.stateNode,s=null),n=n.child,n!==null))for(Ya(n,s,r),n=n.sibling;n!==null;)Ya(n,s,r),n=n.sibling}function Rl(n,s,r){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?r.insertBefore(n,s):r.appendChild(n);else if(c!==4&&(c===27&&Pn(n.type)&&(r=n.stateNode),n=n.child,n!==null))for(Rl(n,s,r),n=n.sibling;n!==null;)Rl(n,s,r),n=n.sibling}function hh(n){var s=n.stateNode,r=n.memoizedProps;try{for(var c=n.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);it(s,c,r),s[st]=n,s[ht]=r}catch(y){De(n,n.return,y)}}var un=!1,Oe=!1,Ka=!1,ph=typeof WeakSet=="function"?WeakSet:Set,We=null;function jv(n,s){if(n=n.containerInfo,vu=$l,n=wf(n),Jr(n)){if("selectionStart"in n)var r={start:n.selectionStart,end:n.selectionEnd};else e:{r=(r=n.ownerDocument)&&r.defaultView||window;var c=r.getSelection&&r.getSelection();if(c&&c.rangeCount!==0){r=c.anchorNode;var h=c.anchorOffset,y=c.focusNode;c=c.focusOffset;try{r.nodeType,y.nodeType}catch{r=null;break e}var _=0,C=-1,w=-1,I=0,G=0,F=n,k=null;t:for(;;){for(var P;F!==r||h!==0&&F.nodeType!==3||(C=_+h),F!==y||c!==0&&F.nodeType!==3||(w=_+c),F.nodeType===3&&(_+=F.nodeValue.length),(P=F.firstChild)!==null;)k=F,F=P;for(;;){if(F===n)break t;if(k===r&&++I===h&&(C=_),k===y&&++G===c&&(w=_),(P=F.nextSibling)!==null)break;F=k,k=F.parentNode}F=P}r=C===-1||w===-1?null:{start:C,end:w}}else r=null}r=r||{start:0,end:0}}else r=null;for(Tu={focusedElem:n,selectionRange:r},$l=!1,We=s;We!==null;)if(s=We,n=s.child,(s.subtreeFlags&1024)!==0&&n!==null)n.return=s,We=n;else for(;We!==null;){switch(s=We,y=s.alternate,n=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&y!==null){n=void 0,r=s,h=y.memoizedProps,y=y.memoizedState,c=r.stateNode;try{var ce=si(r.type,h,r.elementType===r.type);n=c.getSnapshotBeforeUpdate(ce,y),c.__reactInternalSnapshotBeforeUpdate=n}catch(re){De(r,r.return,re)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,r=n.nodeType,r===9)Cu(n);else if(r===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Cu(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(o(163))}if(n=s.sibling,n!==null){n.return=s.return,We=n;break}We=s.return}}function mh(n,s,r){var c=r.flags;switch(r.tag){case 0:case 11:case 15:bn(n,r),c&4&&ss(5,r);break;case 1:if(bn(n,r),c&4)if(n=r.stateNode,s===null)try{n.componentDidMount()}catch(_){De(r,r.return,_)}else{var h=si(r.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(h,s,n.__reactInternalSnapshotBeforeUpdate)}catch(_){De(r,r.return,_)}}c&64&&uh(r),c&512&&ls(r,r.return);break;case 3:if(bn(n,r),c&64&&(n=r.updateQueue,n!==null)){if(s=null,r.child!==null)switch(r.child.tag){case 27:case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}try{Qf(n,s)}catch(_){De(r,r.return,_)}}break;case 27:s===null&&c&4&&hh(r);case 26:case 5:bn(n,r),s===null&&c&4&&fh(r),c&512&&ls(r,r.return);break;case 12:bn(n,r);break;case 13:bn(n,r),c&4&&vh(n,r),c&64&&(n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(r=a0.bind(null,r),x0(n,r))));break;case 22:if(c=r.memoizedState!==null||un,!c){s=s!==null&&s.memoizedState!==null||Oe,h=un;var y=Oe;un=c,(Oe=s)&&!y?Mn(n,r,(r.subtreeFlags&8772)!==0):bn(n,r),un=h,Oe=y}break;case 30:break;default:bn(n,r)}}function gh(n){var s=n.alternate;s!==null&&(n.alternate=null,gh(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Rr(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Le=null,gt=!1;function cn(n,s,r){for(r=r.child;r!==null;)yh(n,s,r),r=r.sibling}function yh(n,s,r){if(Tt&&typeof Tt.onCommitFiberUnmount=="function")try{Tt.onCommitFiberUnmount(Ro,r)}catch{}switch(r.tag){case 26:Oe||Yt(r,s),cn(n,s,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Oe||Yt(r,s);var c=Le,h=gt;Pn(r.type)&&(Le=r.stateNode,gt=!1),cn(n,s,r),ms(r.stateNode),Le=c,gt=h;break;case 5:Oe||Yt(r,s);case 6:if(c=Le,h=gt,Le=null,cn(n,s,r),Le=c,gt=h,Le!==null)if(gt)try{(Le.nodeType===9?Le.body:Le.nodeName==="HTML"?Le.ownerDocument.body:Le).removeChild(r.stateNode)}catch(y){De(r,s,y)}else try{Le.removeChild(r.stateNode)}catch(y){De(r,s,y)}break;case 18:Le!==null&&(gt?(n=Le,sp(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,r.stateNode),Es(n)):sp(Le,r.stateNode));break;case 4:c=Le,h=gt,Le=r.stateNode.containerInfo,gt=!0,cn(n,s,r),Le=c,gt=h;break;case 0:case 11:case 14:case 15:Oe||Rn(2,r,s),Oe||Rn(4,r,s),cn(n,s,r);break;case 1:Oe||(Yt(r,s),c=r.stateNode,typeof c.componentWillUnmount=="function"&&ch(r,s,c)),cn(n,s,r);break;case 21:cn(n,s,r);break;case 22:Oe=(c=Oe)||r.memoizedState!==null,cn(n,s,r),Oe=c;break;default:cn(n,s,r)}}function vh(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Es(n)}catch(r){De(s,s.return,r)}}function e0(n){switch(n.tag){case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new ph),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new ph),s;default:throw Error(o(435,n.tag))}}function Xa(n,s){var r=e0(n);s.forEach(function(c){var h=u0.bind(null,n,c);r.has(c)||(r.add(c),c.then(h,h))})}function Et(n,s){var r=s.deletions;if(r!==null)for(var c=0;c<r.length;c++){var h=r[c],y=n,_=s,C=_;e:for(;C!==null;){switch(C.tag){case 27:if(Pn(C.type)){Le=C.stateNode,gt=!1;break e}break;case 5:Le=C.stateNode,gt=!1;break e;case 3:case 4:Le=C.stateNode.containerInfo,gt=!0;break e}C=C.return}if(Le===null)throw Error(o(160));yh(y,_,h),Le=null,gt=!1,y=h.alternate,y!==null&&(y.return=null),h.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)Th(s,n),s=s.sibling}var Bt=null;function Th(n,s){var r=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Et(s,n),At(n),c&4&&(Rn(3,n,n.return),ss(3,n),Rn(5,n,n.return));break;case 1:Et(s,n),At(n),c&512&&(Oe||r===null||Yt(r,r.return)),c&64&&un&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(r=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=r===null?c:r.concat(c))));break;case 26:var h=Bt;if(Et(s,n),At(n),c&512&&(Oe||r===null||Yt(r,r.return)),c&4){var y=r!==null?r.memoizedState:null;if(c=n.memoizedState,r===null)if(c===null)if(n.stateNode===null){e:{c=n.type,r=n.memoizedProps,h=h.ownerDocument||h;t:switch(c){case"title":y=h.getElementsByTagName("title")[0],(!y||y[No]||y[st]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=h.createElement(c),h.head.insertBefore(y,h.querySelector("head > title"))),it(y,c,r),y[st]=n,Qe(y),c=y;break e;case"link":var _=hp("link","href",h).get(c+(r.href||""));if(_){for(var C=0;C<_.length;C++)if(y=_[C],y.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&y.getAttribute("rel")===(r.rel==null?null:r.rel)&&y.getAttribute("title")===(r.title==null?null:r.title)&&y.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){_.splice(C,1);break t}}y=h.createElement(c),it(y,c,r),h.head.appendChild(y);break;case"meta":if(_=hp("meta","content",h).get(c+(r.content||""))){for(C=0;C<_.length;C++)if(y=_[C],y.getAttribute("content")===(r.content==null?null:""+r.content)&&y.getAttribute("name")===(r.name==null?null:r.name)&&y.getAttribute("property")===(r.property==null?null:r.property)&&y.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&y.getAttribute("charset")===(r.charSet==null?null:r.charSet)){_.splice(C,1);break t}}y=h.createElement(c),it(y,c,r),h.head.appendChild(y);break;default:throw Error(o(468,c))}y[st]=n,Qe(y),c=y}n.stateNode=c}else pp(h,n.type,n.stateNode);else n.stateNode=dp(h,c,n.memoizedProps);else y!==c?(y===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):y.count--,c===null?pp(h,n.type,n.stateNode):dp(h,c,n.memoizedProps)):c===null&&n.stateNode!==null&&$a(n,n.memoizedProps,r.memoizedProps)}break;case 27:Et(s,n),At(n),c&512&&(Oe||r===null||Yt(r,r.return)),r!==null&&c&4&&$a(n,n.memoizedProps,r.memoizedProps);break;case 5:if(Et(s,n),At(n),c&512&&(Oe||r===null||Yt(r,r.return)),n.flags&32){h=n.stateNode;try{Ai(h,"")}catch(P){De(n,n.return,P)}}c&4&&n.stateNode!=null&&(h=n.memoizedProps,$a(n,h,r!==null?r.memoizedProps:h)),c&1024&&(Ka=!0);break;case 6:if(Et(s,n),At(n),c&4){if(n.stateNode===null)throw Error(o(162));c=n.memoizedProps,r=n.stateNode;try{r.nodeValue=c}catch(P){De(n,n.return,P)}}break;case 3:if(Hl=null,h=Bt,Bt=Gl(s.containerInfo),Et(s,n),Bt=h,At(n),c&4&&r!==null&&r.memoizedState.isDehydrated)try{Es(s.containerInfo)}catch(P){De(n,n.return,P)}Ka&&(Ka=!1,_h(n));break;case 4:c=Bt,Bt=Gl(n.stateNode.containerInfo),Et(s,n),At(n),Bt=c;break;case 12:Et(s,n),At(n);break;case 13:Et(s,n),At(n),n.child.flags&8192&&n.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(tu=zt()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Xa(n,c)));break;case 22:h=n.memoizedState!==null;var w=r!==null&&r.memoizedState!==null,I=un,G=Oe;if(un=I||h,Oe=G||w,Et(s,n),Oe=G,un=I,At(n),c&8192)e:for(s=n.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(r===null||w||un||Oe||li(n)),r=null,s=n;;){if(s.tag===5||s.tag===26){if(r===null){w=r=s;try{if(y=w.stateNode,h)_=y.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{C=w.stateNode;var F=w.memoizedProps.style,k=F!=null&&F.hasOwnProperty("display")?F.display:null;C.style.display=k==null||typeof k=="boolean"?"":(""+k).trim()}}catch(P){De(w,w.return,P)}}}else if(s.tag===6){if(r===null){w=s;try{w.stateNode.nodeValue=h?"":w.memoizedProps}catch(P){De(w,w.return,P)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;r===s&&(r=null),s=s.return}r===s&&(r=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=n.updateQueue,c!==null&&(r=c.retryQueue,r!==null&&(c.retryQueue=null,Xa(n,r))));break;case 19:Et(s,n),At(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Xa(n,c)));break;case 30:break;case 21:break;default:Et(s,n),At(n)}}function At(n){var s=n.flags;if(s&2){try{for(var r,c=n.return;c!==null;){if(dh(c)){r=c;break}c=c.return}if(r==null)throw Error(o(160));switch(r.tag){case 27:var h=r.stateNode,y=Ja(n);Rl(n,y,h);break;case 5:var _=r.stateNode;r.flags&32&&(Ai(_,""),r.flags&=-33);var C=Ja(n);Rl(n,C,_);break;case 3:case 4:var w=r.stateNode.containerInfo,I=Ja(n);Ya(n,I,w);break;default:throw Error(o(161))}}catch(G){De(n,n.return,G)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function _h(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;_h(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function bn(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)mh(n,s.alternate,s),s=s.sibling}function li(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Rn(4,s,s.return),li(s);break;case 1:Yt(s,s.return);var r=s.stateNode;typeof r.componentWillUnmount=="function"&&ch(s,s.return,r),li(s);break;case 27:ms(s.stateNode);case 26:case 5:Yt(s,s.return),li(s);break;case 22:s.memoizedState===null&&li(s);break;case 30:li(s);break;default:li(s)}n=n.sibling}}function Mn(n,s,r){for(r=r&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,h=n,y=s,_=y.flags;switch(y.tag){case 0:case 11:case 15:Mn(h,y,r),ss(4,y);break;case 1:if(Mn(h,y,r),c=y,h=c.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(I){De(c,c.return,I)}if(c=y,h=c.updateQueue,h!==null){var C=c.stateNode;try{var w=h.shared.hiddenCallbacks;if(w!==null)for(h.shared.hiddenCallbacks=null,h=0;h<w.length;h++)Xf(w[h],C)}catch(I){De(c,c.return,I)}}r&&_&64&&uh(y),ls(y,y.return);break;case 27:hh(y);case 26:case 5:Mn(h,y,r),r&&c===null&&_&4&&fh(y),ls(y,y.return);break;case 12:Mn(h,y,r);break;case 13:Mn(h,y,r),r&&_&4&&vh(h,y);break;case 22:y.memoizedState===null&&Mn(h,y,r),ls(y,y.return);break;case 30:break;default:Mn(h,y,r)}s=s.sibling}}function Qa(n,s){var r=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==r&&(n!=null&&n.refCount++,r!=null&&$o(r))}function Za(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&$o(n))}function Kt(n,s,r,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Sh(n,s,r,c),s=s.sibling}function Sh(n,s,r,c){var h=s.flags;switch(s.tag){case 0:case 11:case 15:Kt(n,s,r,c),h&2048&&ss(9,s);break;case 1:Kt(n,s,r,c);break;case 3:Kt(n,s,r,c),h&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&$o(n)));break;case 12:if(h&2048){Kt(n,s,r,c),n=s.stateNode;try{var y=s.memoizedProps,_=y.id,C=y.onPostCommit;typeof C=="function"&&C(_,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(w){De(s,s.return,w)}}else Kt(n,s,r,c);break;case 13:Kt(n,s,r,c);break;case 23:break;case 22:y=s.stateNode,_=s.alternate,s.memoizedState!==null?y._visibility&2?Kt(n,s,r,c):rs(n,s):y._visibility&2?Kt(n,s,r,c):(y._visibility|=2,Fi(n,s,r,c,(s.subtreeFlags&10256)!==0)),h&2048&&Qa(_,s);break;case 24:Kt(n,s,r,c),h&2048&&Za(s.alternate,s);break;default:Kt(n,s,r,c)}}function Fi(n,s,r,c,h){for(h=h&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var y=n,_=s,C=r,w=c,I=_.flags;switch(_.tag){case 0:case 11:case 15:Fi(y,_,C,w,h),ss(8,_);break;case 23:break;case 22:var G=_.stateNode;_.memoizedState!==null?G._visibility&2?Fi(y,_,C,w,h):rs(y,_):(G._visibility|=2,Fi(y,_,C,w,h)),h&&I&2048&&Qa(_.alternate,_);break;case 24:Fi(y,_,C,w,h),h&&I&2048&&Za(_.alternate,_);break;default:Fi(y,_,C,w,h)}s=s.sibling}}function rs(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var r=n,c=s,h=c.flags;switch(c.tag){case 22:rs(r,c),h&2048&&Qa(c.alternate,c);break;case 24:rs(r,c),h&2048&&Za(c.alternate,c);break;default:rs(r,c)}s=s.sibling}}var as=8192;function zi(n){if(n.subtreeFlags&as)for(n=n.child;n!==null;)Ch(n),n=n.sibling}function Ch(n){switch(n.tag){case 26:zi(n),n.flags&as&&n.memoizedState!==null&&B0(Bt,n.memoizedState,n.memoizedProps);break;case 5:zi(n);break;case 3:case 4:var s=Bt;Bt=Gl(n.stateNode.containerInfo),zi(n),Bt=s;break;case 22:n.memoizedState===null&&(s=n.alternate,s!==null&&s.memoizedState!==null?(s=as,as=16777216,zi(n),as=s):zi(n));break;default:zi(n)}}function Eh(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function us(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var c=s[r];We=c,wh(c,n)}Eh(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Ah(n),n=n.sibling}function Ah(n){switch(n.tag){case 0:case 11:case 15:us(n),n.flags&2048&&Rn(9,n,n.return);break;case 3:us(n);break;case 12:us(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,bl(n)):us(n);break;default:us(n)}}function bl(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var c=s[r];We=c,wh(c,n)}Eh(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Rn(8,s,s.return),bl(s);break;case 22:r=s.stateNode,r._visibility&2&&(r._visibility&=-3,bl(s));break;default:bl(s)}n=n.sibling}}function wh(n,s){for(;We!==null;){var r=We;switch(r.tag){case 0:case 11:case 15:Rn(8,r,s);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var c=r.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:$o(r.memoizedState.cache)}if(c=r.child,c!==null)c.return=r,We=c;else e:for(r=n;We!==null;){c=We;var h=c.sibling,y=c.return;if(gh(c),c===r){We=null;break e}if(h!==null){h.return=y,We=h;break e}We=y}}}var t0={getCacheForType:function(n){var s=lt(Je),r=s.data.get(n);return r===void 0&&(r=n(),s.data.set(n,r)),r}},n0=typeof WeakMap=="function"?WeakMap:Map,xe=0,Ue=null,ve=null,Se=0,Re=0,wt=null,Nn=!1,$i=!1,Wa=!1,fn=0,Be=0,Dn=0,ri=0,ja=0,Pt=0,Ji=0,cs=null,yt=null,eu=!1,tu=0,Ml=1/0,Nl=null,Un=null,nt=0,In=null,Yi=null,Ki=0,nu=0,iu=null,xh=null,fs=0,ou=null;function xt(){if((xe&2)!==0&&Se!==0)return Se&-Se;if(B.T!==null){var n=Pi;return n!==0?n:fu()}return Oc()}function Rh(){Pt===0&&(Pt=(Se&536870912)===0||Ae?qc():536870912);var n=kt.current;return n!==null&&(n.flags|=32),Pt}function Rt(n,s,r){(n===Ue&&(Re===2||Re===9)||n.cancelPendingCommit!==null)&&(Xi(n,0),kn(n,Se,Pt,!1)),Mo(n,r),((xe&2)===0||n!==Ue)&&(n===Ue&&((xe&2)===0&&(ri|=r),Be===4&&kn(n,Se,Pt,!1)),Xt(n))}function bh(n,s,r){if((xe&6)!==0)throw Error(o(327));var c=!r&&(s&124)===0&&(s&n.expiredLanes)===0||bo(n,s),h=c?s0(n,s):ru(n,s,!0),y=c;do{if(h===0){$i&&!c&&kn(n,s,0,!1);break}else{if(r=n.current.alternate,y&&!i0(r)){h=ru(n,s,!1),y=!1;continue}if(h===2){if(y=s,n.errorRecoveryDisabledLanes&y)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){s=_;e:{var C=n;h=cs;var w=C.current.memoizedState.isDehydrated;if(w&&(Xi(C,_).flags|=256),_=ru(C,_,!1),_!==2){if(Wa&&!w){C.errorRecoveryDisabledLanes|=y,ri|=y,h=4;break e}y=yt,yt=h,y!==null&&(yt===null?yt=y:yt.push.apply(yt,y))}h=_}if(y=!1,h!==2)continue}}if(h===1){Xi(n,0),kn(n,s,0,!0);break}e:{switch(c=n,y=h,y){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:kn(c,s,Pt,!Nn);break e;case 2:yt=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(h=tu+300-zt(),10<h)){if(kn(c,s,Pt,!Nn),Os(c,0,!0)!==0)break e;c.timeoutHandle=ip(Mh.bind(null,c,r,yt,Nl,eu,s,Pt,ri,Ji,Nn,y,2,-0,0),h);break e}Mh(c,r,yt,Nl,eu,s,Pt,ri,Ji,Nn,y,0,-0,0)}}break}while(!0);Xt(n)}function Mh(n,s,r,c,h,y,_,C,w,I,G,F,k,P){if(n.timeoutHandle=-1,F=s.subtreeFlags,(F&8192||(F&16785408)===16785408)&&(vs={stylesheets:null,count:0,unsuspend:V0},Ch(s),F=G0(),F!==null)){n.cancelPendingCommit=F(Lh.bind(null,n,s,y,r,c,h,_,C,w,G,1,k,P)),kn(n,y,_,!I);return}Lh(n,s,y,r,c,h,_,C,w)}function i0(n){for(var s=n;;){var r=s.tag;if((r===0||r===11||r===15)&&s.flags&16384&&(r=s.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var c=0;c<r.length;c++){var h=r[c],y=h.getSnapshot;h=h.value;try{if(!St(y(),h))return!1}catch{return!1}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function kn(n,s,r,c){s&=~ja,s&=~ri,n.suspendedLanes|=s,n.pingedLanes&=~s,c&&(n.warmLanes|=s),c=n.expirationTimes;for(var h=s;0<h;){var y=31-_t(h),_=1<<y;c[y]=-1,h&=~_}r!==0&&Bc(n,r,s)}function Dl(){return(xe&6)===0?(ds(0),!1):!0}function su(){if(ve!==null){if(Re===0)var n=ve.return;else n=ve,nn=ti=null,Ca(n),Oi=null,ns=0,n=ve;for(;n!==null;)ah(n.alternate,n),n=n.return;ve=null}}function Xi(n,s){var r=n.timeoutHandle;r!==-1&&(n.timeoutHandle=-1,S0(r)),r=n.cancelPendingCommit,r!==null&&(n.cancelPendingCommit=null,r()),su(),Ue=n,ve=r=jt(n.current,null),Se=s,Re=0,wt=null,Nn=!1,$i=bo(n,s),Wa=!1,Ji=Pt=ja=ri=Dn=Be=0,yt=cs=null,eu=!1,(s&8)!==0&&(s|=s&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=s;0<c;){var h=31-_t(c),y=1<<h;s|=n[h],c&=~y}return fn=s,js(),r}function Nh(n,s){me=null,B.H=vl,s===Yo||s===al?(s=Yf(),Re=3):s===zf?(s=Yf(),Re=4):Re=s===Kd?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,wt=s,ve===null&&(Be=1,El(n,Nt(s,n.current)))}function Dh(){var n=B.H;return B.H=vl,n===null?vl:n}function Uh(){var n=B.A;return B.A=t0,n}function lu(){Be=4,Nn||(Se&4194048)!==Se&&kt.current!==null||($i=!0),(Dn&134217727)===0&&(ri&134217727)===0||Ue===null||kn(Ue,Se,Pt,!1)}function ru(n,s,r){var c=xe;xe|=2;var h=Dh(),y=Uh();(Ue!==n||Se!==s)&&(Nl=null,Xi(n,s)),s=!1;var _=Be;e:do try{if(Re!==0&&ve!==null){var C=ve,w=wt;switch(Re){case 8:su(),_=6;break e;case 3:case 2:case 9:case 6:kt.current===null&&(s=!0);var I=Re;if(Re=0,wt=null,Qi(n,C,w,I),r&&$i){_=0;break e}break;default:I=Re,Re=0,wt=null,Qi(n,C,w,I)}}o0(),_=Be;break}catch(G){Nh(n,G)}while(!0);return s&&n.shellSuspendCounter++,nn=ti=null,xe=c,B.H=h,B.A=y,ve===null&&(Ue=null,Se=0,js()),_}function o0(){for(;ve!==null;)Ih(ve)}function s0(n,s){var r=xe;xe|=2;var c=Dh(),h=Uh();Ue!==n||Se!==s?(Nl=null,Ml=zt()+500,Xi(n,s)):$i=bo(n,s);e:do try{if(Re!==0&&ve!==null){s=ve;var y=wt;t:switch(Re){case 1:Re=0,wt=null,Qi(n,s,y,1);break;case 2:case 9:if($f(y)){Re=0,wt=null,kh(s);break}s=function(){Re!==2&&Re!==9||Ue!==n||(Re=7),Xt(n)},y.then(s,s);break e;case 3:Re=7;break e;case 4:Re=5;break e;case 7:$f(y)?(Re=0,wt=null,kh(s)):(Re=0,wt=null,Qi(n,s,y,7));break;case 5:var _=null;switch(ve.tag){case 26:_=ve.memoizedState;case 5:case 27:var C=ve;if(!_||mp(_)){Re=0,wt=null;var w=C.sibling;if(w!==null)ve=w;else{var I=C.return;I!==null?(ve=I,Ul(I)):ve=null}break t}}Re=0,wt=null,Qi(n,s,y,5);break;case 6:Re=0,wt=null,Qi(n,s,y,6);break;case 8:su(),Be=6;break e;default:throw Error(o(462))}}l0();break}catch(G){Nh(n,G)}while(!0);return nn=ti=null,B.H=c,B.A=h,xe=r,ve!==null?0:(Ue=null,Se=0,js(),Be)}function l0(){for(;ve!==null&&!by();)Ih(ve)}function Ih(n){var s=lh(n.alternate,n,fn);n.memoizedProps=n.pendingProps,s===null?Ul(n):ve=s}function kh(n){var s=n,r=s.alternate;switch(s.tag){case 15:case 0:s=eh(r,s,s.pendingProps,s.type,void 0,Se);break;case 11:s=eh(r,s,s.pendingProps,s.type.render,s.ref,Se);break;case 5:Ca(s);default:ah(r,s),s=ve=Pf(s,fn),s=lh(r,s,fn)}n.memoizedProps=n.pendingProps,s===null?Ul(n):ve=s}function Qi(n,s,r,c){nn=ti=null,Ca(s),Oi=null,ns=0;var h=s.return;try{if(Xv(n,h,s,r,Se)){Be=1,El(n,Nt(r,n.current)),ve=null;return}}catch(y){if(h!==null)throw ve=h,y;Be=1,El(n,Nt(r,n.current)),ve=null;return}s.flags&32768?(Ae||c===1?n=!0:$i||(Se&536870912)!==0?n=!1:(Nn=n=!0,(c===2||c===9||c===3||c===6)&&(c=kt.current,c!==null&&c.tag===13&&(c.flags|=16384))),Ph(s,n)):Ul(s)}function Ul(n){var s=n;do{if((s.flags&32768)!==0){Ph(s,Nn);return}n=s.return;var r=Zv(s.alternate,s,fn);if(r!==null){ve=r;return}if(s=s.sibling,s!==null){ve=s;return}ve=s=n}while(s!==null);Be===0&&(Be=5)}function Ph(n,s){do{var r=Wv(n.alternate,n);if(r!==null){r.flags&=32767,ve=r;return}if(r=n.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!s&&(n=n.sibling,n!==null)){ve=n;return}ve=n=r}while(n!==null);Be=6,ve=null}function Lh(n,s,r,c,h,y,_,C,w){n.cancelPendingCommit=null;do Il();while(nt!==0);if((xe&6)!==0)throw Error(o(327));if(s!==null){if(s===n.current)throw Error(o(177));if(y=s.lanes|s.childLanes,y|=Zr,Vy(n,r,y,_,C,w),n===Ue&&(ve=Ue=null,Se=0),Yi=s,In=n,Ki=r,nu=y,iu=h,xh=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,c0(Vs,function(){return Oh(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=B.T,B.T=null,h=Q.p,Q.p=2,_=xe,xe|=4;try{jv(n,s,r)}finally{xe=_,Q.p=h,B.T=c}}nt=1,qh(),Vh(),Bh()}}function qh(){if(nt===1){nt=0;var n=In,s=Yi,r=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||r){r=B.T,B.T=null;var c=Q.p;Q.p=2;var h=xe;xe|=4;try{Th(s,n);var y=Tu,_=wf(n.containerInfo),C=y.focusedElem,w=y.selectionRange;if(_!==C&&C&&C.ownerDocument&&Af(C.ownerDocument.documentElement,C)){if(w!==null&&Jr(C)){var I=w.start,G=w.end;if(G===void 0&&(G=I),"selectionStart"in C)C.selectionStart=I,C.selectionEnd=Math.min(G,C.value.length);else{var F=C.ownerDocument||document,k=F&&F.defaultView||window;if(k.getSelection){var P=k.getSelection(),ce=C.textContent.length,re=Math.min(w.start,ce),Ne=w.end===void 0?re:Math.min(w.end,ce);!P.extend&&re>Ne&&(_=Ne,Ne=re,re=_);var M=Ef(C,re),R=Ef(C,Ne);if(M&&R&&(P.rangeCount!==1||P.anchorNode!==M.node||P.anchorOffset!==M.offset||P.focusNode!==R.node||P.focusOffset!==R.offset)){var D=F.createRange();D.setStart(M.node,M.offset),P.removeAllRanges(),re>Ne?(P.addRange(D),P.extend(R.node,R.offset)):(D.setEnd(R.node,R.offset),P.addRange(D))}}}}for(F=[],P=C;P=P.parentNode;)P.nodeType===1&&F.push({element:P,left:P.scrollLeft,top:P.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<F.length;C++){var H=F[C];H.element.scrollLeft=H.left,H.element.scrollTop=H.top}}$l=!!vu,Tu=vu=null}finally{xe=h,Q.p=c,B.T=r}}n.current=s,nt=2}}function Vh(){if(nt===2){nt=0;var n=In,s=Yi,r=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||r){r=B.T,B.T=null;var c=Q.p;Q.p=2;var h=xe;xe|=4;try{mh(n,s.alternate,s)}finally{xe=h,Q.p=c,B.T=r}}nt=3}}function Bh(){if(nt===4||nt===3){nt=0,My();var n=In,s=Yi,r=Ki,c=xh;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?nt=5:(nt=0,Yi=In=null,Gh(n,n.pendingLanes));var h=n.pendingLanes;if(h===0&&(Un=null),wr(r),s=s.stateNode,Tt&&typeof Tt.onCommitFiberRoot=="function")try{Tt.onCommitFiberRoot(Ro,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=B.T,h=Q.p,Q.p=2,B.T=null;try{for(var y=n.onRecoverableError,_=0;_<c.length;_++){var C=c[_];y(C.value,{componentStack:C.stack})}}finally{B.T=s,Q.p=h}}(Ki&3)!==0&&Il(),Xt(n),h=n.pendingLanes,(r&4194090)!==0&&(h&42)!==0?n===ou?fs++:(fs=0,ou=n):fs=0,ds(0)}}function Gh(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,$o(s)))}function Il(n){return qh(),Vh(),Bh(),Oh()}function Oh(){if(nt!==5)return!1;var n=In,s=nu;nu=0;var r=wr(Ki),c=B.T,h=Q.p;try{Q.p=32>r?32:r,B.T=null,r=iu,iu=null;var y=In,_=Ki;if(nt=0,Yi=In=null,Ki=0,(xe&6)!==0)throw Error(o(331));var C=xe;if(xe|=4,Ah(y.current),Sh(y,y.current,_,r),xe=C,ds(0,!1),Tt&&typeof Tt.onPostCommitFiberRoot=="function")try{Tt.onPostCommitFiberRoot(Ro,y)}catch{}return!0}finally{Q.p=h,B.T=c,Gh(n,s)}}function Hh(n,s,r){s=Nt(r,s),s=La(n.stateNode,s,2),n=En(n,s,2),n!==null&&(Mo(n,2),Xt(n))}function De(n,s,r){if(n.tag===3)Hh(n,n,r);else for(;s!==null;){if(s.tag===3){Hh(s,n,r);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Un===null||!Un.has(c))){n=Nt(r,n),r=Jd(2),c=En(s,r,2),c!==null&&(Yd(r,c,s,n),Mo(c,2),Xt(c));break}}s=s.return}}function au(n,s,r){var c=n.pingCache;if(c===null){c=n.pingCache=new n0;var h=new Set;c.set(s,h)}else h=c.get(s),h===void 0&&(h=new Set,c.set(s,h));h.has(r)||(Wa=!0,h.add(r),n=r0.bind(null,n,s,r),s.then(n,n))}function r0(n,s,r){var c=n.pingCache;c!==null&&c.delete(s),n.pingedLanes|=n.suspendedLanes&r,n.warmLanes&=~r,Ue===n&&(Se&r)===r&&(Be===4||Be===3&&(Se&62914560)===Se&&300>zt()-tu?(xe&2)===0&&Xi(n,0):ja|=r,Ji===Se&&(Ji=0)),Xt(n)}function Fh(n,s){s===0&&(s=Vc()),n=Di(n,s),n!==null&&(Mo(n,s),Xt(n))}function a0(n){var s=n.memoizedState,r=0;s!==null&&(r=s.retryLane),Fh(n,r)}function u0(n,s){var r=0;switch(n.tag){case 13:var c=n.stateNode,h=n.memoizedState;h!==null&&(r=h.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(o(314))}c!==null&&c.delete(s),Fh(n,r)}function c0(n,s){return Sr(n,s)}var kl=null,Zi=null,uu=!1,Pl=!1,cu=!1,ai=0;function Xt(n){n!==Zi&&n.next===null&&(Zi===null?kl=Zi=n:Zi=Zi.next=n),Pl=!0,uu||(uu=!0,d0())}function ds(n,s){if(!cu&&Pl){cu=!0;do for(var r=!1,c=kl;c!==null;){if(n!==0){var h=c.pendingLanes;if(h===0)var y=0;else{var _=c.suspendedLanes,C=c.pingedLanes;y=(1<<31-_t(42|n)+1)-1,y&=h&~(_&~C),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(r=!0,Yh(c,y))}else y=Se,y=Os(c,c===Ue?y:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(y&3)===0||bo(c,y)||(r=!0,Yh(c,y));c=c.next}while(r);cu=!1}}function f0(){zh()}function zh(){Pl=uu=!1;var n=0;ai!==0&&(_0()&&(n=ai),ai=0);for(var s=zt(),r=null,c=kl;c!==null;){var h=c.next,y=$h(c,s);y===0?(c.next=null,r===null?kl=h:r.next=h,h===null&&(Zi=r)):(r=c,(n!==0||(y&3)!==0)&&(Pl=!0)),c=h}ds(n)}function $h(n,s){for(var r=n.suspendedLanes,c=n.pingedLanes,h=n.expirationTimes,y=n.pendingLanes&-62914561;0<y;){var _=31-_t(y),C=1<<_,w=h[_];w===-1?((C&r)===0||(C&c)!==0)&&(h[_]=qy(C,s)):w<=s&&(n.expiredLanes|=C),y&=~C}if(s=Ue,r=Se,r=Os(n,n===s?r:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,r===0||n===s&&(Re===2||Re===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Cr(c),n.callbackNode=null,n.callbackPriority=0;if((r&3)===0||bo(n,r)){if(s=r&-r,s===n.callbackPriority)return s;switch(c!==null&&Cr(c),wr(r)){case 2:case 8:r=Pc;break;case 32:r=Vs;break;case 268435456:r=Lc;break;default:r=Vs}return c=Jh.bind(null,n),r=Sr(r,c),n.callbackPriority=s,n.callbackNode=r,s}return c!==null&&c!==null&&Cr(c),n.callbackPriority=2,n.callbackNode=null,2}function Jh(n,s){if(nt!==0&&nt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var r=n.callbackNode;if(Il()&&n.callbackNode!==r)return null;var c=Se;return c=Os(n,n===Ue?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(bh(n,c,s),$h(n,zt()),n.callbackNode!=null&&n.callbackNode===r?Jh.bind(null,n):null)}function Yh(n,s){if(Il())return null;bh(n,s,!0)}function d0(){C0(function(){(xe&6)!==0?Sr(kc,f0):zh()})}function fu(){return ai===0&&(ai=qc()),ai}function Kh(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Js(""+n)}function Xh(n,s){var r=s.ownerDocument.createElement("input");return r.name=s.name,r.value=s.value,n.id&&r.setAttribute("form",n.id),s.parentNode.insertBefore(r,s),n=new FormData(n),r.parentNode.removeChild(r),n}function h0(n,s,r,c,h){if(s==="submit"&&r&&r.stateNode===h){var y=Kh((h[ht]||null).action),_=c.submitter;_&&(s=(s=_[ht]||null)?Kh(s.formAction):_.getAttribute("formAction"),s!==null&&(y=s,_=null));var C=new Qs("action","action",null,c,h);n.push({event:C,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(ai!==0){var w=_?Xh(h,_):new FormData(h);Da(r,{pending:!0,data:w,method:h.method,action:y},null,w)}}else typeof y=="function"&&(C.preventDefault(),w=_?Xh(h,_):new FormData(h),Da(r,{pending:!0,data:w,method:h.method,action:y},y,w))},currentTarget:h}]})}}for(var du=0;du<Qr.length;du++){var hu=Qr[du],p0=hu.toLowerCase(),m0=hu[0].toUpperCase()+hu.slice(1);Vt(p0,"on"+m0)}Vt(bf,"onAnimationEnd"),Vt(Mf,"onAnimationIteration"),Vt(Nf,"onAnimationStart"),Vt("dblclick","onDoubleClick"),Vt("focusin","onFocus"),Vt("focusout","onBlur"),Vt(Uv,"onTransitionRun"),Vt(Iv,"onTransitionStart"),Vt(kv,"onTransitionCancel"),Vt(Df,"onTransitionEnd"),Si("onMouseEnter",["mouseout","mouseover"]),Si("onMouseLeave",["mouseout","mouseover"]),Si("onPointerEnter",["pointerout","pointerover"]),Si("onPointerLeave",["pointerout","pointerover"]),Jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Jn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),g0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hs));function Qh(n,s){s=(s&4)!==0;for(var r=0;r<n.length;r++){var c=n[r],h=c.event;c=c.listeners;e:{var y=void 0;if(s)for(var _=c.length-1;0<=_;_--){var C=c[_],w=C.instance,I=C.currentTarget;if(C=C.listener,w!==y&&h.isPropagationStopped())break e;y=C,h.currentTarget=I;try{y(h)}catch(G){Cl(G)}h.currentTarget=null,y=w}else for(_=0;_<c.length;_++){if(C=c[_],w=C.instance,I=C.currentTarget,C=C.listener,w!==y&&h.isPropagationStopped())break e;y=C,h.currentTarget=I;try{y(h)}catch(G){Cl(G)}h.currentTarget=null,y=w}}}}function Te(n,s){var r=s[xr];r===void 0&&(r=s[xr]=new Set);var c=n+"__bubble";r.has(c)||(Zh(s,n,2,!1),r.add(c))}function pu(n,s,r){var c=0;s&&(c|=4),Zh(r,n,c,s)}var Ll="_reactListening"+Math.random().toString(36).slice(2);function mu(n){if(!n[Ll]){n[Ll]=!0,Fc.forEach(function(r){r!=="selectionchange"&&(g0.has(r)||pu(r,!1,n),pu(r,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Ll]||(s[Ll]=!0,pu("selectionchange",!1,s))}}function Zh(n,s,r,c){switch(Sp(s)){case 2:var h=F0;break;case 8:h=z0;break;default:h=Mu}r=h.bind(null,s,r,n),h=void 0,!qr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),c?h!==void 0?n.addEventListener(s,r,{capture:!0,passive:h}):n.addEventListener(s,r,!0):h!==void 0?n.addEventListener(s,r,{passive:h}):n.addEventListener(s,r,!1)}function gu(n,s,r,c,h){var y=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var _=c.tag;if(_===3||_===4){var C=c.stateNode.containerInfo;if(C===h)break;if(_===4)for(_=c.return;_!==null;){var w=_.tag;if((w===3||w===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;C!==null;){if(_=vi(C),_===null)return;if(w=_.tag,w===5||w===6||w===26||w===27){c=y=_;continue e}C=C.parentNode}}c=c.return}of(function(){var I=y,G=Pr(r),F=[];e:{var k=Uf.get(n);if(k!==void 0){var P=Qs,ce=n;switch(n){case"keypress":if(Ks(r)===0)break e;case"keydown":case"keyup":P=cv;break;case"focusin":ce="focus",P=Or;break;case"focusout":ce="blur",P=Or;break;case"beforeblur":case"afterblur":P=Or;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=rf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=Wy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=hv;break;case bf:case Mf:case Nf:P=tv;break;case Df:P=mv;break;case"scroll":case"scrollend":P=Qy;break;case"wheel":P=yv;break;case"copy":case"cut":case"paste":P=iv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=uf;break;case"toggle":case"beforetoggle":P=Tv}var re=(s&4)!==0,Ne=!re&&(n==="scroll"||n==="scrollend"),M=re?k!==null?k+"Capture":null:k;re=[];for(var R=I,D;R!==null;){var H=R;if(D=H.stateNode,H=H.tag,H!==5&&H!==26&&H!==27||D===null||M===null||(H=Uo(R,M),H!=null&&re.push(ps(R,H,D))),Ne)break;R=R.return}0<re.length&&(k=new P(k,ce,null,r,G),F.push({event:k,listeners:re}))}}if((s&7)===0){e:{if(k=n==="mouseover"||n==="pointerover",P=n==="mouseout"||n==="pointerout",k&&r!==kr&&(ce=r.relatedTarget||r.fromElement)&&(vi(ce)||ce[yi]))break e;if((P||k)&&(k=G.window===G?G:(k=G.ownerDocument)?k.defaultView||k.parentWindow:window,P?(ce=r.relatedTarget||r.toElement,P=I,ce=ce?vi(ce):null,ce!==null&&(Ne=f(ce),re=ce.tag,ce!==Ne||re!==5&&re!==27&&re!==6)&&(ce=null)):(P=null,ce=I),P!==ce)){if(re=rf,H="onMouseLeave",M="onMouseEnter",R="mouse",(n==="pointerout"||n==="pointerover")&&(re=uf,H="onPointerLeave",M="onPointerEnter",R="pointer"),Ne=P==null?k:Do(P),D=ce==null?k:Do(ce),k=new re(H,R+"leave",P,r,G),k.target=Ne,k.relatedTarget=D,H=null,vi(G)===I&&(re=new re(M,R+"enter",ce,r,G),re.target=D,re.relatedTarget=Ne,H=re),Ne=H,P&&ce)t:{for(re=P,M=ce,R=0,D=re;D;D=Wi(D))R++;for(D=0,H=M;H;H=Wi(H))D++;for(;0<R-D;)re=Wi(re),R--;for(;0<D-R;)M=Wi(M),D--;for(;R--;){if(re===M||M!==null&&re===M.alternate)break t;re=Wi(re),M=Wi(M)}re=null}else re=null;P!==null&&Wh(F,k,P,re,!1),ce!==null&&Ne!==null&&Wh(F,Ne,ce,re,!0)}}e:{if(k=I?Do(I):window,P=k.nodeName&&k.nodeName.toLowerCase(),P==="select"||P==="input"&&k.type==="file")var j=yf;else if(mf(k))if(vf)j=Mv;else{j=Rv;var ge=xv}else P=k.nodeName,!P||P.toLowerCase()!=="input"||k.type!=="checkbox"&&k.type!=="radio"?I&&Ir(I.elementType)&&(j=yf):j=bv;if(j&&(j=j(n,I))){gf(F,j,r,G);break e}ge&&ge(n,k,I),n==="focusout"&&I&&k.type==="number"&&I.memoizedProps.value!=null&&Ur(k,"number",k.value)}switch(ge=I?Do(I):window,n){case"focusin":(mf(ge)||ge.contentEditable==="true")&&(bi=ge,Yr=I,Go=null);break;case"focusout":Go=Yr=bi=null;break;case"mousedown":Kr=!0;break;case"contextmenu":case"mouseup":case"dragend":Kr=!1,xf(F,r,G);break;case"selectionchange":if(Dv)break;case"keydown":case"keyup":xf(F,r,G)}var oe;if(Fr)e:{switch(n){case"compositionstart":var ae="onCompositionStart";break e;case"compositionend":ae="onCompositionEnd";break e;case"compositionupdate":ae="onCompositionUpdate";break e}ae=void 0}else Ri?hf(n,r)&&(ae="onCompositionEnd"):n==="keydown"&&r.keyCode===229&&(ae="onCompositionStart");ae&&(cf&&r.locale!=="ko"&&(Ri||ae!=="onCompositionStart"?ae==="onCompositionEnd"&&Ri&&(oe=sf()):(Tn=G,Vr="value"in Tn?Tn.value:Tn.textContent,Ri=!0)),ge=ql(I,ae),0<ge.length&&(ae=new af(ae,n,null,r,G),F.push({event:ae,listeners:ge}),oe?ae.data=oe:(oe=pf(r),oe!==null&&(ae.data=oe)))),(oe=Sv?Cv(n,r):Ev(n,r))&&(ae=ql(I,"onBeforeInput"),0<ae.length&&(ge=new af("onBeforeInput","beforeinput",null,r,G),F.push({event:ge,listeners:ae}),ge.data=oe)),h0(F,n,I,r,G)}Qh(F,s)})}function ps(n,s,r){return{instance:n,listener:s,currentTarget:r}}function ql(n,s){for(var r=s+"Capture",c=[];n!==null;){var h=n,y=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||y===null||(h=Uo(n,r),h!=null&&c.unshift(ps(n,h,y)),h=Uo(n,s),h!=null&&c.push(ps(n,h,y))),n.tag===3)return c;n=n.return}return[]}function Wi(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Wh(n,s,r,c,h){for(var y=s._reactName,_=[];r!==null&&r!==c;){var C=r,w=C.alternate,I=C.stateNode;if(C=C.tag,w!==null&&w===c)break;C!==5&&C!==26&&C!==27||I===null||(w=I,h?(I=Uo(r,y),I!=null&&_.unshift(ps(r,I,w))):h||(I=Uo(r,y),I!=null&&_.push(ps(r,I,w)))),r=r.return}_.length!==0&&n.push({event:s,listeners:_})}var y0=/\r\n?/g,v0=/\u0000|\uFFFD/g;function jh(n){return(typeof n=="string"?n:""+n).replace(y0,`
`).replace(v0,"")}function ep(n,s){return s=jh(s),jh(n)===s}function Vl(){}function Me(n,s,r,c,h,y){switch(r){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||Ai(n,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&Ai(n,""+c);break;case"className":Fs(n,"class",c);break;case"tabIndex":Fs(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Fs(n,r,c);break;case"style":tf(n,c,y);break;case"data":if(s!=="object"){Fs(n,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||r!=="href")){n.removeAttribute(r);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(r);break}c=Js(""+c),n.setAttribute(r,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(r==="formAction"?(s!=="input"&&Me(n,s,"name",h.name,h,null),Me(n,s,"formEncType",h.formEncType,h,null),Me(n,s,"formMethod",h.formMethod,h,null),Me(n,s,"formTarget",h.formTarget,h,null)):(Me(n,s,"encType",h.encType,h,null),Me(n,s,"method",h.method,h,null),Me(n,s,"target",h.target,h,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(r);break}c=Js(""+c),n.setAttribute(r,c);break;case"onClick":c!=null&&(n.onclick=Vl);break;case"onScroll":c!=null&&Te("scroll",n);break;case"onScrollEnd":c!=null&&Te("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(r=c.__html,r!=null){if(h.children!=null)throw Error(o(60));n.innerHTML=r}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}r=Js(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(r,""+c):n.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(r,""):n.removeAttribute(r);break;case"capture":case"download":c===!0?n.setAttribute(r,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(r,c):n.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(r,c):n.removeAttribute(r);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(r):n.setAttribute(r,c);break;case"popover":Te("beforetoggle",n),Te("toggle",n),Hs(n,"popover",c);break;case"xlinkActuate":Zt(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Zt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Zt(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Zt(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Zt(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Zt(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Zt(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Zt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Zt(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Hs(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Ky.get(r)||r,Hs(n,r,c))}}function yu(n,s,r,c,h,y){switch(r){case"style":tf(n,c,y);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(r=c.__html,r!=null){if(h.children!=null)throw Error(o(60));n.innerHTML=r}}break;case"children":typeof c=="string"?Ai(n,c):(typeof c=="number"||typeof c=="bigint")&&Ai(n,""+c);break;case"onScroll":c!=null&&Te("scroll",n);break;case"onScrollEnd":c!=null&&Te("scrollend",n);break;case"onClick":c!=null&&(n.onclick=Vl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zc.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(h=r.endsWith("Capture"),s=r.slice(2,h?r.length-7:void 0),y=n[ht]||null,y=y!=null?y[r]:null,typeof y=="function"&&n.removeEventListener(s,y,h),typeof c=="function")){typeof y!="function"&&y!==null&&(r in n?n[r]=null:n.hasAttribute(r)&&n.removeAttribute(r)),n.addEventListener(s,c,h);break e}r in n?n[r]=c:c===!0?n.setAttribute(r,""):Hs(n,r,c)}}}function it(n,s,r){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Te("error",n),Te("load",n);var c=!1,h=!1,y;for(y in r)if(r.hasOwnProperty(y)){var _=r[y];if(_!=null)switch(y){case"src":c=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:Me(n,s,y,_,r,null)}}h&&Me(n,s,"srcSet",r.srcSet,r,null),c&&Me(n,s,"src",r.src,r,null);return;case"input":Te("invalid",n);var C=y=_=h=null,w=null,I=null;for(c in r)if(r.hasOwnProperty(c)){var G=r[c];if(G!=null)switch(c){case"name":h=G;break;case"type":_=G;break;case"checked":w=G;break;case"defaultChecked":I=G;break;case"value":y=G;break;case"defaultValue":C=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(o(137,s));break;default:Me(n,s,c,G,r,null)}}Zc(n,y,C,w,I,_,h,!1),zs(n);return;case"select":Te("invalid",n),c=_=y=null;for(h in r)if(r.hasOwnProperty(h)&&(C=r[h],C!=null))switch(h){case"value":y=C;break;case"defaultValue":_=C;break;case"multiple":c=C;default:Me(n,s,h,C,r,null)}s=y,r=_,n.multiple=!!c,s!=null?Ei(n,!!c,s,!1):r!=null&&Ei(n,!!c,r,!0);return;case"textarea":Te("invalid",n),y=h=c=null;for(_ in r)if(r.hasOwnProperty(_)&&(C=r[_],C!=null))switch(_){case"value":c=C;break;case"defaultValue":h=C;break;case"children":y=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(o(91));break;default:Me(n,s,_,C,r,null)}jc(n,c,h,y),zs(n);return;case"option":for(w in r)if(r.hasOwnProperty(w)&&(c=r[w],c!=null))switch(w){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Me(n,s,w,c,r,null)}return;case"dialog":Te("beforetoggle",n),Te("toggle",n),Te("cancel",n),Te("close",n);break;case"iframe":case"object":Te("load",n);break;case"video":case"audio":for(c=0;c<hs.length;c++)Te(hs[c],n);break;case"image":Te("error",n),Te("load",n);break;case"details":Te("toggle",n);break;case"embed":case"source":case"link":Te("error",n),Te("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(I in r)if(r.hasOwnProperty(I)&&(c=r[I],c!=null))switch(I){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:Me(n,s,I,c,r,null)}return;default:if(Ir(s)){for(G in r)r.hasOwnProperty(G)&&(c=r[G],c!==void 0&&yu(n,s,G,c,r,void 0));return}}for(C in r)r.hasOwnProperty(C)&&(c=r[C],c!=null&&Me(n,s,C,c,r,null))}function T0(n,s,r,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,y=null,_=null,C=null,w=null,I=null,G=null;for(P in r){var F=r[P];if(r.hasOwnProperty(P)&&F!=null)switch(P){case"checked":break;case"value":break;case"defaultValue":w=F;default:c.hasOwnProperty(P)||Me(n,s,P,null,c,F)}}for(var k in c){var P=c[k];if(F=r[k],c.hasOwnProperty(k)&&(P!=null||F!=null))switch(k){case"type":y=P;break;case"name":h=P;break;case"checked":I=P;break;case"defaultChecked":G=P;break;case"value":_=P;break;case"defaultValue":C=P;break;case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(o(137,s));break;default:P!==F&&Me(n,s,k,P,c,F)}}Dr(n,_,C,w,I,G,y,h);return;case"select":P=_=C=k=null;for(y in r)if(w=r[y],r.hasOwnProperty(y)&&w!=null)switch(y){case"value":break;case"multiple":P=w;default:c.hasOwnProperty(y)||Me(n,s,y,null,c,w)}for(h in c)if(y=c[h],w=r[h],c.hasOwnProperty(h)&&(y!=null||w!=null))switch(h){case"value":k=y;break;case"defaultValue":C=y;break;case"multiple":_=y;default:y!==w&&Me(n,s,h,y,c,w)}s=C,r=_,c=P,k!=null?Ei(n,!!r,k,!1):!!c!=!!r&&(s!=null?Ei(n,!!r,s,!0):Ei(n,!!r,r?[]:"",!1));return;case"textarea":P=k=null;for(C in r)if(h=r[C],r.hasOwnProperty(C)&&h!=null&&!c.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Me(n,s,C,null,c,h)}for(_ in c)if(h=c[_],y=r[_],c.hasOwnProperty(_)&&(h!=null||y!=null))switch(_){case"value":k=h;break;case"defaultValue":P=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(o(91));break;default:h!==y&&Me(n,s,_,h,c,y)}Wc(n,k,P);return;case"option":for(var ce in r)if(k=r[ce],r.hasOwnProperty(ce)&&k!=null&&!c.hasOwnProperty(ce))switch(ce){case"selected":n.selected=!1;break;default:Me(n,s,ce,null,c,k)}for(w in c)if(k=c[w],P=r[w],c.hasOwnProperty(w)&&k!==P&&(k!=null||P!=null))switch(w){case"selected":n.selected=k&&typeof k!="function"&&typeof k!="symbol";break;default:Me(n,s,w,k,c,P)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var re in r)k=r[re],r.hasOwnProperty(re)&&k!=null&&!c.hasOwnProperty(re)&&Me(n,s,re,null,c,k);for(I in c)if(k=c[I],P=r[I],c.hasOwnProperty(I)&&k!==P&&(k!=null||P!=null))switch(I){case"children":case"dangerouslySetInnerHTML":if(k!=null)throw Error(o(137,s));break;default:Me(n,s,I,k,c,P)}return;default:if(Ir(s)){for(var Ne in r)k=r[Ne],r.hasOwnProperty(Ne)&&k!==void 0&&!c.hasOwnProperty(Ne)&&yu(n,s,Ne,void 0,c,k);for(G in c)k=c[G],P=r[G],!c.hasOwnProperty(G)||k===P||k===void 0&&P===void 0||yu(n,s,G,k,c,P);return}}for(var M in r)k=r[M],r.hasOwnProperty(M)&&k!=null&&!c.hasOwnProperty(M)&&Me(n,s,M,null,c,k);for(F in c)k=c[F],P=r[F],!c.hasOwnProperty(F)||k===P||k==null&&P==null||Me(n,s,F,k,c,P)}var vu=null,Tu=null;function Bl(n){return n.nodeType===9?n:n.ownerDocument}function tp(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function np(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function _u(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Su=null;function _0(){var n=window.event;return n&&n.type==="popstate"?n===Su?!1:(Su=n,!0):(Su=null,!1)}var ip=typeof setTimeout=="function"?setTimeout:void 0,S0=typeof clearTimeout=="function"?clearTimeout:void 0,op=typeof Promise=="function"?Promise:void 0,C0=typeof queueMicrotask=="function"?queueMicrotask:typeof op<"u"?function(n){return op.resolve(null).then(n).catch(E0)}:ip;function E0(n){setTimeout(function(){throw n})}function Pn(n){return n==="head"}function sp(n,s){var r=s,c=0,h=0;do{var y=r.nextSibling;if(n.removeChild(r),y&&y.nodeType===8)if(r=y.data,r==="/$"){if(0<c&&8>c){r=c;var _=n.ownerDocument;if(r&1&&ms(_.documentElement),r&2&&ms(_.body),r&4)for(r=_.head,ms(r),_=r.firstChild;_;){var C=_.nextSibling,w=_.nodeName;_[No]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&_.rel.toLowerCase()==="stylesheet"||r.removeChild(_),_=C}}if(h===0){n.removeChild(y),Es(s);return}h--}else r==="$"||r==="$?"||r==="$!"?h++:c=r.charCodeAt(0)-48;else c=0;r=y}while(r);Es(s)}function Cu(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var r=s;switch(s=s.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Cu(r),Rr(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}n.removeChild(r)}}function A0(n,s,r,c){for(;n.nodeType===1;){var h=r;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[No])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(y=n.getAttribute("rel"),y==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(y!==h.rel||n.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||n.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||n.getAttribute("title")!==(h.title==null?null:h.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(y=n.getAttribute("src"),(y!==(h.src==null?null:h.src)||n.getAttribute("type")!==(h.type==null?null:h.type)||n.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&y&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var y=h.name==null?null:""+h.name;if(h.type==="hidden"&&n.getAttribute("name")===y)return n}else return n;if(n=Gt(n.nextSibling),n===null)break}return null}function w0(n,s,r){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=Gt(n.nextSibling),n===null))return null;return n}function Eu(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function x0(n,s){var r=n.ownerDocument;if(n.data!=="$?"||r.readyState==="complete")s();else{var c=function(){s(),r.removeEventListener("DOMContentLoaded",c)};r.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function Gt(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return n}var Au=null;function lp(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var r=n.data;if(r==="$"||r==="$!"||r==="$?"){if(s===0)return n;s--}else r==="/$"&&s++}n=n.previousSibling}return null}function rp(n,s,r){switch(s=Bl(r),n){case"html":if(n=s.documentElement,!n)throw Error(o(452));return n;case"head":if(n=s.head,!n)throw Error(o(453));return n;case"body":if(n=s.body,!n)throw Error(o(454));return n;default:throw Error(o(451))}}function ms(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);Rr(n)}var Lt=new Map,ap=new Set;function Gl(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var dn=Q.d;Q.d={f:R0,r:b0,D:M0,C:N0,L:D0,m:U0,X:k0,S:I0,M:P0};function R0(){var n=dn.f(),s=Dl();return n||s}function b0(n){var s=Ti(n);s!==null&&s.tag===5&&s.type==="form"?bd(s):dn.r(n)}var ji=typeof document>"u"?null:document;function up(n,s,r){var c=ji;if(c&&typeof s=="string"&&s){var h=Mt(s);h='link[rel="'+n+'"][href="'+h+'"]',typeof r=="string"&&(h+='[crossorigin="'+r+'"]'),ap.has(h)||(ap.add(h),n={rel:n,crossOrigin:r,href:s},c.querySelector(h)===null&&(s=c.createElement("link"),it(s,"link",n),Qe(s),c.head.appendChild(s)))}}function M0(n){dn.D(n),up("dns-prefetch",n,null)}function N0(n,s){dn.C(n,s),up("preconnect",n,s)}function D0(n,s,r){dn.L(n,s,r);var c=ji;if(c&&n&&s){var h='link[rel="preload"][as="'+Mt(s)+'"]';s==="image"&&r&&r.imageSrcSet?(h+='[imagesrcset="'+Mt(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(h+='[imagesizes="'+Mt(r.imageSizes)+'"]')):h+='[href="'+Mt(n)+'"]';var y=h;switch(s){case"style":y=eo(n);break;case"script":y=to(n)}Lt.has(y)||(n=v({rel:"preload",href:s==="image"&&r&&r.imageSrcSet?void 0:n,as:s},r),Lt.set(y,n),c.querySelector(h)!==null||s==="style"&&c.querySelector(gs(y))||s==="script"&&c.querySelector(ys(y))||(s=c.createElement("link"),it(s,"link",n),Qe(s),c.head.appendChild(s)))}}function U0(n,s){dn.m(n,s);var r=ji;if(r&&n){var c=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+Mt(c)+'"][href="'+Mt(n)+'"]',y=h;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=to(n)}if(!Lt.has(y)&&(n=v({rel:"modulepreload",href:n},s),Lt.set(y,n),r.querySelector(h)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(ys(y)))return}c=r.createElement("link"),it(c,"link",n),Qe(c),r.head.appendChild(c)}}}function I0(n,s,r){dn.S(n,s,r);var c=ji;if(c&&n){var h=_i(c).hoistableStyles,y=eo(n);s=s||"default";var _=h.get(y);if(!_){var C={loading:0,preload:null};if(_=c.querySelector(gs(y)))C.loading=5;else{n=v({rel:"stylesheet",href:n,"data-precedence":s},r),(r=Lt.get(y))&&wu(n,r);var w=_=c.createElement("link");Qe(w),it(w,"link",n),w._p=new Promise(function(I,G){w.onload=I,w.onerror=G}),w.addEventListener("load",function(){C.loading|=1}),w.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Ol(_,s,c)}_={type:"stylesheet",instance:_,count:1,state:C},h.set(y,_)}}}function k0(n,s){dn.X(n,s);var r=ji;if(r&&n){var c=_i(r).hoistableScripts,h=to(n),y=c.get(h);y||(y=r.querySelector(ys(h)),y||(n=v({src:n,async:!0},s),(s=Lt.get(h))&&xu(n,s),y=r.createElement("script"),Qe(y),it(y,"link",n),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(h,y))}}function P0(n,s){dn.M(n,s);var r=ji;if(r&&n){var c=_i(r).hoistableScripts,h=to(n),y=c.get(h);y||(y=r.querySelector(ys(h)),y||(n=v({src:n,async:!0,type:"module"},s),(s=Lt.get(h))&&xu(n,s),y=r.createElement("script"),Qe(y),it(y,"link",n),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(h,y))}}function cp(n,s,r,c){var h=(h=de.current)?Gl(h):null;if(!h)throw Error(o(446));switch(n){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(s=eo(r.href),r=_i(h).hoistableStyles,c=r.get(s),c||(c={type:"style",instance:null,count:0,state:null},r.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){n=eo(r.href);var y=_i(h).hoistableStyles,_=y.get(n);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(n,_),(y=h.querySelector(gs(n)))&&!y._p&&(_.instance=y,_.state.loading=5),Lt.has(n)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Lt.set(n,r),y||L0(h,n,r,_.state))),s&&c===null)throw Error(o(528,""));return _}if(s&&c!==null)throw Error(o(529,""));return null;case"script":return s=r.async,r=r.src,typeof r=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=to(r),r=_i(h).hoistableScripts,c=r.get(s),c||(c={type:"script",instance:null,count:0,state:null},r.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,n))}}function eo(n){return'href="'+Mt(n)+'"'}function gs(n){return'link[rel="stylesheet"]['+n+"]"}function fp(n){return v({},n,{"data-precedence":n.precedence,precedence:null})}function L0(n,s,r,c){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=n.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),it(s,"link",r),Qe(s),n.head.appendChild(s))}function to(n){return'[src="'+Mt(n)+'"]'}function ys(n){return"script[async]"+n}function dp(n,s,r){if(s.count++,s.instance===null)switch(s.type){case"style":var c=n.querySelector('style[data-href~="'+Mt(r.href)+'"]');if(c)return s.instance=c,Qe(c),c;var h=v({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),Qe(c),it(c,"style",h),Ol(c,r.precedence,n),s.instance=c;case"stylesheet":h=eo(r.href);var y=n.querySelector(gs(h));if(y)return s.state.loading|=4,s.instance=y,Qe(y),y;c=fp(r),(h=Lt.get(h))&&wu(c,h),y=(n.ownerDocument||n).createElement("link"),Qe(y);var _=y;return _._p=new Promise(function(C,w){_.onload=C,_.onerror=w}),it(y,"link",c),s.state.loading|=4,Ol(y,r.precedence,n),s.instance=y;case"script":return y=to(r.src),(h=n.querySelector(ys(y)))?(s.instance=h,Qe(h),h):(c=r,(h=Lt.get(y))&&(c=v({},r),xu(c,h)),n=n.ownerDocument||n,h=n.createElement("script"),Qe(h),it(h,"link",c),n.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,Ol(c,r.precedence,n));return s.instance}function Ol(n,s,r){for(var c=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=c.length?c[c.length-1]:null,y=h,_=0;_<c.length;_++){var C=c[_];if(C.dataset.precedence===s)y=C;else if(y!==h)break}y?y.parentNode.insertBefore(n,y.nextSibling):(s=r.nodeType===9?r.head:r,s.insertBefore(n,s.firstChild))}function wu(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function xu(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Hl=null;function hp(n,s,r){if(Hl===null){var c=new Map,h=Hl=new Map;h.set(r,c)}else h=Hl,c=h.get(r),c||(c=new Map,h.set(r,c));if(c.has(n))return c;for(c.set(n,null),r=r.getElementsByTagName(n),h=0;h<r.length;h++){var y=r[h];if(!(y[No]||y[st]||n==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var _=y.getAttribute(s)||"";_=n+_;var C=c.get(_);C?C.push(y):c.set(_,[y])}}return c}function pp(n,s,r){n=n.ownerDocument||n,n.head.insertBefore(r,s==="title"?n.querySelector("head > title"):null)}function q0(n,s,r){if(r===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function mp(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var vs=null;function V0(){}function B0(n,s,r){if(vs===null)throw Error(o(475));var c=vs;if(s.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var h=eo(r.href),y=n.querySelector(gs(h));if(y){n=y._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(c.count++,c=Fl.bind(c),n.then(c,c)),s.state.loading|=4,s.instance=y,Qe(y);return}y=n.ownerDocument||n,r=fp(r),(h=Lt.get(h))&&wu(r,h),y=y.createElement("link"),Qe(y);var _=y;_._p=new Promise(function(C,w){_.onload=C,_.onerror=w}),it(y,"link",r),s.instance=y}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(c.count++,s=Fl.bind(c),n.addEventListener("load",s),n.addEventListener("error",s))}}function G0(){if(vs===null)throw Error(o(475));var n=vs;return n.stylesheets&&n.count===0&&Ru(n,n.stylesheets),0<n.count?function(s){var r=setTimeout(function(){if(n.stylesheets&&Ru(n,n.stylesheets),n.unsuspend){var c=n.unsuspend;n.unsuspend=null,c()}},6e4);return n.unsuspend=s,function(){n.unsuspend=null,clearTimeout(r)}}:null}function Fl(){if(this.count--,this.count===0){if(this.stylesheets)Ru(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var zl=null;function Ru(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,zl=new Map,s.forEach(O0,n),zl=null,Fl.call(n))}function O0(n,s){if(!(s.state.loading&4)){var r=zl.get(n);if(r)var c=r.get(null);else{r=new Map,zl.set(n,r);for(var h=n.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<h.length;y++){var _=h[y];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(r.set(_.dataset.precedence,_),c=_)}c&&r.set(null,c)}h=s.instance,_=h.getAttribute("data-precedence"),y=r.get(_)||c,y===c&&r.set(null,h),r.set(_,h),this.count++,c=Fl.bind(this),h.addEventListener("load",c),h.addEventListener("error",c),y?y.parentNode.insertBefore(h,y.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(h,n.firstChild)),s.state.loading|=4}}var Ts={$$typeof:U,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function H0(n,s,r,c,h,y,_,C){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Er(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Er(0),this.hiddenUpdates=Er(null),this.identifierPrefix=c,this.onUncaughtError=h,this.onCaughtError=y,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function gp(n,s,r,c,h,y,_,C,w,I,G,F){return n=new H0(n,s,r,_,C,w,I,F),s=1,y===!0&&(s|=24),y=Ct(3,null,null,s),n.current=y,y.stateNode=n,s=aa(),s.refCount++,n.pooledCache=s,s.refCount++,y.memoizedState={element:c,isDehydrated:r,cache:s},da(y),n}function yp(n){return n?(n=Ui,n):Ui}function vp(n,s,r,c,h,y){h=yp(h),c.context===null?c.context=h:c.pendingContext=h,c=Cn(s),c.payload={element:r},y=y===void 0?null:y,y!==null&&(c.callback=y),r=En(n,c,s),r!==null&&(Rt(r,n,s),Xo(r,n,s))}function Tp(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var r=n.retryLane;n.retryLane=r!==0&&r<s?r:s}}function bu(n,s){Tp(n,s),(n=n.alternate)&&Tp(n,s)}function _p(n){if(n.tag===13){var s=Di(n,67108864);s!==null&&Rt(s,n,67108864),bu(n,67108864)}}var $l=!0;function F0(n,s,r,c){var h=B.T;B.T=null;var y=Q.p;try{Q.p=2,Mu(n,s,r,c)}finally{Q.p=y,B.T=h}}function z0(n,s,r,c){var h=B.T;B.T=null;var y=Q.p;try{Q.p=8,Mu(n,s,r,c)}finally{Q.p=y,B.T=h}}function Mu(n,s,r,c){if($l){var h=Nu(c);if(h===null)gu(n,s,c,Jl,r),Cp(n,c);else if(J0(h,n,s,r,c))c.stopPropagation();else if(Cp(n,c),s&4&&-1<$0.indexOf(n)){for(;h!==null;){var y=Ti(h);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var _=$n(y.pendingLanes);if(_!==0){var C=y;for(C.pendingLanes|=2,C.entangledLanes|=2;_;){var w=1<<31-_t(_);C.entanglements[1]|=w,_&=~w}Xt(y),(xe&6)===0&&(Ml=zt()+500,ds(0))}}break;case 13:C=Di(y,2),C!==null&&Rt(C,y,2),Dl(),bu(y,2)}if(y=Nu(c),y===null&&gu(n,s,c,Jl,r),y===h)break;h=y}h!==null&&c.stopPropagation()}else gu(n,s,c,null,r)}}function Nu(n){return n=Pr(n),Du(n)}var Jl=null;function Du(n){if(Jl=null,n=vi(n),n!==null){var s=f(n);if(s===null)n=null;else{var r=s.tag;if(r===13){if(n=d(s),n!==null)return n;n=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Jl=n,null}function Sp(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ny()){case kc:return 2;case Pc:return 8;case Vs:case Dy:return 32;case Lc:return 268435456;default:return 32}default:return 32}}var Uu=!1,Ln=null,qn=null,Vn=null,_s=new Map,Ss=new Map,Bn=[],$0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Cp(n,s){switch(n){case"focusin":case"focusout":Ln=null;break;case"dragenter":case"dragleave":qn=null;break;case"mouseover":case"mouseout":Vn=null;break;case"pointerover":case"pointerout":_s.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ss.delete(s.pointerId)}}function Cs(n,s,r,c,h,y){return n===null||n.nativeEvent!==y?(n={blockedOn:s,domEventName:r,eventSystemFlags:c,nativeEvent:y,targetContainers:[h]},s!==null&&(s=Ti(s),s!==null&&_p(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),n)}function J0(n,s,r,c,h){switch(s){case"focusin":return Ln=Cs(Ln,n,s,r,c,h),!0;case"dragenter":return qn=Cs(qn,n,s,r,c,h),!0;case"mouseover":return Vn=Cs(Vn,n,s,r,c,h),!0;case"pointerover":var y=h.pointerId;return _s.set(y,Cs(_s.get(y)||null,n,s,r,c,h)),!0;case"gotpointercapture":return y=h.pointerId,Ss.set(y,Cs(Ss.get(y)||null,n,s,r,c,h)),!0}return!1}function Ep(n){var s=vi(n.target);if(s!==null){var r=f(s);if(r!==null){if(s=r.tag,s===13){if(s=d(r),s!==null){n.blockedOn=s,By(n.priority,function(){if(r.tag===13){var c=xt();c=Ar(c);var h=Di(r,c);h!==null&&Rt(h,r,c),bu(r,c)}});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){n.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Yl(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var r=Nu(n.nativeEvent);if(r===null){r=n.nativeEvent;var c=new r.constructor(r.type,r);kr=c,r.target.dispatchEvent(c),kr=null}else return s=Ti(r),s!==null&&_p(s),n.blockedOn=r,!1;s.shift()}return!0}function Ap(n,s,r){Yl(n)&&r.delete(s)}function Y0(){Uu=!1,Ln!==null&&Yl(Ln)&&(Ln=null),qn!==null&&Yl(qn)&&(qn=null),Vn!==null&&Yl(Vn)&&(Vn=null),_s.forEach(Ap),Ss.forEach(Ap)}function Kl(n,s){n.blockedOn===s&&(n.blockedOn=null,Uu||(Uu=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Y0)))}var Xl=null;function wp(n){Xl!==n&&(Xl=n,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Xl===n&&(Xl=null);for(var s=0;s<n.length;s+=3){var r=n[s],c=n[s+1],h=n[s+2];if(typeof c!="function"){if(Du(c||r)===null)continue;break}var y=Ti(r);y!==null&&(n.splice(s,3),s-=3,Da(y,{pending:!0,data:h,method:r.method,action:c},c,h))}}))}function Es(n){function s(w){return Kl(w,n)}Ln!==null&&Kl(Ln,n),qn!==null&&Kl(qn,n),Vn!==null&&Kl(Vn,n),_s.forEach(s),Ss.forEach(s);for(var r=0;r<Bn.length;r++){var c=Bn[r];c.blockedOn===n&&(c.blockedOn=null)}for(;0<Bn.length&&(r=Bn[0],r.blockedOn===null);)Ep(r),r.blockedOn===null&&Bn.shift();if(r=(n.ownerDocument||n).$$reactFormReplay,r!=null)for(c=0;c<r.length;c+=3){var h=r[c],y=r[c+1],_=h[ht]||null;if(typeof y=="function")_||wp(r);else if(_){var C=null;if(y&&y.hasAttribute("formAction")){if(h=y,_=y[ht]||null)C=_.formAction;else if(Du(h)!==null)continue}else C=_.action;typeof C=="function"?r[c+1]=C:(r.splice(c,3),c-=3),wp(r)}}}function Iu(n){this._internalRoot=n}Ql.prototype.render=Iu.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(o(409));var r=s.current,c=xt();vp(r,c,n,s,null,null)},Ql.prototype.unmount=Iu.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;vp(n.current,2,null,n,null,null),Dl(),s[yi]=null}};function Ql(n){this._internalRoot=n}Ql.prototype.unstable_scheduleHydration=function(n){if(n){var s=Oc();n={blockedOn:null,target:n,priority:s};for(var r=0;r<Bn.length&&s!==0&&s<Bn[r].priority;r++);Bn.splice(r,0,n),r===0&&Ep(n)}};var xp=e.version;if(xp!=="19.1.1")throw Error(o(527,xp,"19.1.1"));Q.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(o(188)):(n=Object.keys(n).join(","),Error(o(268,n)));return n=g(s),n=n!==null?p(n):null,n=n===null?null:n.stateNode,n};var K0={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zl.isDisabled&&Zl.supportsFiber)try{Ro=Zl.inject(K0),Tt=Zl}catch{}}return ws.createRoot=function(n,s){if(!l(n))throw Error(o(299));var r=!1,c="",h=Hd,y=Fd,_=zd,C=null;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(C=s.unstable_transitionCallbacks)),s=gp(n,1,!1,null,null,r,c,h,y,_,C,null),n[yi]=s.current,mu(n),new Iu(s)},ws.hydrateRoot=function(n,s,r){if(!l(n))throw Error(o(299));var c=!1,h="",y=Hd,_=Fd,C=zd,w=null,I=null;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(C=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(w=r.unstable_transitionCallbacks),r.formState!==void 0&&(I=r.formState)),s=gp(n,1,!0,s,r??null,c,h,y,_,C,w,I),s.context=yp(null),r=s.current,c=xt(),c=Ar(c),h=Cn(c),h.callback=null,En(r,h,c),r=c,s.current.lanes=r,Mo(s,r),Xt(s),n[yi]=s.current,mu(n),new Ql(s)},ws.version="19.1.1",ws}var Lp;function lT(){if(Lp)return Lu.exports;Lp=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Lu.exports=sT(),Lu.exports}var rT=lT();const aT=_c(rT),Gu=({label:t,view:e,isActive:i,isDisabled:o=!1,onClick:l})=>A.jsx("button",{onClick:()=>l(e),disabled:o,className:`px-4 py-2 text-sm font-medium rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed ${i?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"}`,"aria-current":i?"page":void 0,children:t}),uT=({currentView:t,onNavigate:e,isLibraryEnabled:i})=>A.jsxs("header",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 w-full",children:[A.jsx("div",{className:"text-center sm:text-left",children:A.jsx("h1",{className:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-teal-300",children:"Book Identifier AI"})}),A.jsxs("nav",{className:"flex items-center gap-2 bg-gray-800/50 border border-gray-700 p-1.5 rounded-lg",children:[A.jsx(Gu,{label:"1. Settings",view:"settings",isActive:t==="settings",onClick:e}),A.jsx(Gu,{label:"2. Add Books",view:"upload",isActive:t==="upload",onClick:e}),A.jsx(Gu,{label:"3. My Library",view:"library",isActive:t==="library",onClick:e,isDisabled:!i})]})]}),dt=({onClick:t,text:e,primary:i=!1,disabled:o=!1})=>{const m=`w-full sm:w-auto font-bold py-2 px-6 rounded-lg shadow-md transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 disabled:opacity-50 disabled:cursor-not-allowed ${i?"bg-blue-600 text-white hover:bg-blue-500 focus:ring-blue-500":"bg-gray-600 text-gray-200 hover:bg-gray-500 focus:ring-gray-500"}`;return A.jsx("button",{onClick:t,className:m,disabled:o,children:e})},cT=({initialSettings:t,onSave:e})=>{const[i,o]=se.useState(t.apiKey||""),[l,f]=se.useState(t.supabaseUrl||""),[d,m]=se.useState(t.supabaseKey||""),g=!t.apiKey,p=()=>{i.trim()&&e({apiKey:i.trim(),supabaseUrl:l.trim()||void 0,supabaseKey:d.trim()||void 0})};return A.jsxs("div",{className:"w-full max-w-2xl mx-auto animate-fade-in",children:[A.jsxs("header",{className:"text-center mb-8",children:[A.jsx("h1",{className:"text-4xl sm:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-teal-300",children:"Configuration"}),A.jsx("p",{className:"mt-2 text-lg text-gray-400",children:g?"Welcome! Please enter your API keys to get started.":"Update your configuration settings."})]}),A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{children:[A.jsxs("label",{htmlFor:"apiKey",className:"block text-sm font-medium text-gray-300 mb-2",children:["Google Gemini API Key ",A.jsx("span",{className:"text-red-500",children:"*"})]}),A.jsx("input",{type:"password",id:"apiKey",value:i,onChange:v=>o(v.target.value),className:"w-full bg-gray-900 border border-gray-600 rounded-md px-3 py-2 text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your Gemini API Key",required:!0}),A.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Required for book identification."})]}),A.jsx("div",{className:"border-t border-gray-700 my-6"}),A.jsxs("div",{children:[A.jsx("h2",{className:"text-lg font-semibold text-gray-200",children:"Supabase (Optional)"}),A.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Provide these details if you want to upload your book library to a Supabase Storage bucket."})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"supabaseUrl",className:"block text-sm font-medium text-gray-300 mb-2",children:"Supabase Project URL"}),A.jsx("input",{type:"url",id:"supabaseUrl",value:l,onChange:v=>f(v.target.value),className:"w-full bg-gray-900 border border-gray-600 rounded-md px-3 py-2 text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"https://your-project-ref.supabase.co"})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"supabaseKey",className:"block text-sm font-medium text-gray-300 mb-2",children:"Supabase Anon Key"}),A.jsx("input",{type:"password",id:"supabaseKey",value:d,onChange:v=>m(v.target.value),className:"w-full bg-gray-900 border border-gray-600 rounded-md px-3 py-2 text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your Supabase anon key"})]}),A.jsx("div",{className:"flex justify-end gap-4 pt-4",children:A.jsx(dt,{onClick:p,text:g?"Save and Continue":"Save Settings",primary:!0,disabled:!i.trim()})})]})]})};var He=(t=>(t[t.IDLE=0]="IDLE",t[t.TAKING_PICTURE=1]="TAKING_PICTURE",t[t.PROCESSING=2]="PROCESSING",t[t.RESULTS=3]="RESULTS",t[t.ERROR=4]="ERROR",t))(He||{});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let fT,dT;function hT(){return{geminiUrl:fT,vertexUrl:dT}}function pT(t,e,i,o){var l,f;if(!(t!=null&&t.baseUrl)){const d=hT();return e?(l=d.vertexUrl)!==null&&l!==void 0?l:i:(f=d.geminiUrl)!==null&&f!==void 0?f:o}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pi{}function W(t,e){const i=/\{([^}]+)\}/g;return t.replace(i,(o,l)=>{if(Object.prototype.hasOwnProperty.call(e,l)){const f=e[l];return f!=null?String(f):""}else throw new Error(`Key '${l}' not found in valueMap.`)})}function u(t,e,i){for(let f=0;f<e.length-1;f++){const d=e[f];if(d.endsWith("[]")){const m=d.slice(0,-2);if(!(m in t))if(Array.isArray(i))t[m]=Array.from({length:i.length},()=>({}));else throw new Error(`Value must be a list given an array path ${d}`);if(Array.isArray(t[m])){const g=t[m];if(Array.isArray(i))for(let p=0;p<g.length;p++){const v=g[p];u(v,e.slice(f+1),i[p])}else for(const p of g)u(p,e.slice(f+1),i)}return}else if(d.endsWith("[0]")){const m=d.slice(0,-3);m in t||(t[m]=[{}]);const g=t[m];u(g[0],e.slice(f+1),i);return}(!t[d]||typeof t[d]!="object")&&(t[d]={}),t=t[d]}const o=e[e.length-1],l=t[o];if(l!==void 0){if(!i||typeof i=="object"&&Object.keys(i).length===0||i===l)return;if(typeof l=="object"&&typeof i=="object"&&l!==null&&i!==null)Object.assign(l,i);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof i=="object"&&i!==null&&!Array.isArray(i)?Object.assign(t,i):t[o]=i}function a(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return;const o=e[i];if(o.endsWith("[]")){const l=o.slice(0,-2);if(l in t){const f=t[l];return Array.isArray(f)?f.map(d=>a(d,e.slice(i+1))):void 0}else return}else t=t[o]}return t}catch(i){if(i instanceof TypeError)return;throw i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Cc(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mT(t){const e={},i=a(t,["operationName"]);i!=null&&u(e,["_url","operationName"],i);const o=a(t,["config"]);return o!=null&&u(e,["config"],o),e}function gT(t){const e={},i=a(t,["operationName"]);i!=null&&u(e,["operationName"],i);const o=a(t,["resourceName"]);o!=null&&u(e,["_url","resourceName"],o);const l=a(t,["config"]);return l!=null&&u(e,["config"],l),e}function yT(t){const e={},i=a(t,["operationName"]);i!=null&&u(e,["_url","operationName"],i);const o=a(t,["config"]);return o!=null&&u(e,["config"],o),e}function vT(t){const e={},i=a(t,["video","uri"]);i!=null&&u(e,["uri"],i);const o=a(t,["video","encodedVideo"]);o!=null&&u(e,["videoBytes"],Cc(o));const l=a(t,["encoding"]);return l!=null&&u(e,["mimeType"],l),e}function TT(t){const e={},i=a(t,["_self"]);return i!=null&&u(e,["video"],vT(i)),e}function _T(t){const e={},i=a(t,["generatedSamples"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(d=>TT(d))),u(e,["generatedVideos"],f)}const o=a(t,["raiMediaFilteredCount"]);o!=null&&u(e,["raiMediaFilteredCount"],o);const l=a(t,["raiMediaFilteredReasons"]);return l!=null&&u(e,["raiMediaFilteredReasons"],l),e}function ST(t){const e={},i=a(t,["name"]);i!=null&&u(e,["name"],i);const o=a(t,["metadata"]);o!=null&&u(e,["metadata"],o);const l=a(t,["done"]);l!=null&&u(e,["done"],l);const f=a(t,["error"]);f!=null&&u(e,["error"],f);const d=a(t,["response","generateVideoResponse"]);return d!=null&&u(e,["response"],_T(d)),e}function CT(t){const e={},i=a(t,["gcsUri"]);i!=null&&u(e,["uri"],i);const o=a(t,["bytesBase64Encoded"]);o!=null&&u(e,["videoBytes"],Cc(o));const l=a(t,["mimeType"]);return l!=null&&u(e,["mimeType"],l),e}function ET(t){const e={},i=a(t,["_self"]);return i!=null&&u(e,["video"],CT(i)),e}function AT(t){const e={},i=a(t,["videos"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(d=>ET(d))),u(e,["generatedVideos"],f)}const o=a(t,["raiMediaFilteredCount"]);o!=null&&u(e,["raiMediaFilteredCount"],o);const l=a(t,["raiMediaFilteredReasons"]);return l!=null&&u(e,["raiMediaFilteredReasons"],l),e}function wT(t){const e={},i=a(t,["name"]);i!=null&&u(e,["name"],i);const o=a(t,["metadata"]);o!=null&&u(e,["metadata"],o);const l=a(t,["done"]);l!=null&&u(e,["done"],l);const f=a(t,["error"]);f!=null&&u(e,["error"],f);const d=a(t,["response"]);return d!=null&&u(e,["response"],AT(d)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var qp;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(qp||(qp={}));var Vp;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Vp||(Vp={}));var ft;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(ft||(ft={}));var Bp;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(Bp||(Bp={}));var Gp;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Gp||(Gp={}));var Op;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Op||(Op={}));var Hp;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Hp||(Hp={}));var Fp;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Fp||(Fp={}));var zp;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(zp||(zp={}));var $p;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})($p||($p={}));var Jp;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(Jp||(Jp={}));var Yp;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Yp||(Yp={}));var Kp;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Kp||(Kp={}));var Xp;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(Xp||(Xp={}));var Qp;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Qp||(Qp={}));var ur;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(ur||(ur={}));var Zp;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Zp||(Zp={}));var Wu;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Wu||(Wu={}));var Wp;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Wp||(Wp={}));var jp;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(jp||(jp={}));var em;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(em||(em={}));var tm;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(tm||(tm={}));var nm;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(nm||(nm={}));var im;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(im||(im={}));var om;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(om||(om={}));var sm;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(sm||(sm={}));var lm;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(lm||(lm={}));var rm;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(rm||(rm={}));var am;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(am||(am={}));var um;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(um||(um={}));var cm;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(cm||(cm={}));var fm;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(fm||(fm={}));var dm;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(dm||(dm={}));var hm;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(hm||(hm={}));var pm;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(pm||(pm={}));var mm;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(mm||(mm={}));var gm;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(gm||(gm={}));var ym;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(ym||(ym={}));var vm;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(vm||(vm={}));var Tm;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Tm||(Tm={}));var _m;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(_m||(_m={}));var Sm;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Sm||(Sm={}));var Cm;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Cm||(Cm={}));var Em;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Em||(Em={}));var Am;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Am||(Am={}));var wm;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(wm||(wm={}));var xm;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(xm||(xm={}));var go;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(go||(go={}));class ju{constructor(e){const i={};for(const o of e.headers.entries())i[o[0]]=o[1];this.headers=i,this.responseInternal=e}json(){return this.responseInternal.json()}}class xs{get text(){var e,i,o,l,f,d,m,g;if(((l=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",v=!1;const T=[];for(const S of(g=(m=(d=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||d===void 0?void 0:d.content)===null||m===void 0?void 0:m.parts)!==null&&g!==void 0?g:[]){for(const[E,b]of Object.entries(S))E!=="text"&&E!=="thought"&&(b!==null||b!==void 0)&&T.push(E);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,p+=S.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?p:void 0}get data(){var e,i,o,l,f,d,m,g;if(((l=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const v=[];for(const T of(g=(m=(d=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||d===void 0?void 0:d.content)===null||m===void 0?void 0:m.parts)!==null&&g!==void 0?g:[]){for(const[S,E]of Object.entries(T))S!=="inlineData"&&(E!==null||E!==void 0)&&v.push(S);T.inlineData&&typeof T.inlineData.data=="string"&&(p+=atob(T.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,i,o,l,f,d,m,g;if(((l=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(g=(m=(d=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||d===void 0?void 0:d.content)===null||m===void 0?void 0:m.parts)===null||g===void 0?void 0:g.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,i,o,l,f,d,m,g,p;if(((l=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(g=(m=(d=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||d===void 0?void 0:d.content)===null||m===void 0?void 0:m.parts)===null||g===void 0?void 0:g.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,i,o,l,f,d,m,g,p;if(((l=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(g=(m=(d=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||d===void 0?void 0:d.content)===null||m===void 0?void 0:m.parts)===null||g===void 0?void 0:g.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.output}}class Rm{}class bm{}class xT{}class RT{}class bT{}class MT{}class Mm{}class Nm{}class Dm{}class NT{}class cr{_fromAPIResponse({apiResponse:e,isVertexAI:i}){const o=new cr;let l;const f=e;return i?l=wT(f):l=ST(f),Object.assign(o,l),o}}class Um{}class Im{}class km{}class DT{}class UT{}class IT{}class Pm{}class kT{get text(){var e,i,o;let l="",f=!1;const d=[];for(const m of(o=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&o!==void 0?o:[]){for(const[g,p]of Object.entries(m))g!=="text"&&g!=="thought"&&p!==null&&d.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;f=!0,l+=m.text}}return d.length>0&&console.warn(`there are non-text parts ${d} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?l:void 0}get data(){var e,i,o;let l="";const f=[];for(const d of(o=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&o!==void 0?o:[]){for(const[m,g]of Object.entries(d))m!=="inlineData"&&g!==null&&f.push(m);d.inlineData&&typeof d.inlineData.data=="string"&&(l+=atob(d.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),l.length>0?btoa(l):void 0}}class PT{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ee(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const i=e.split("/",2);return`publishers/${i[0]}/models/${i[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function bg(t,e){const i=Ee(t,e);return i?i.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}`:i.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${i}`:i:""}function Mg(t){return Array.isArray(t)?t.map(e=>fr(e)):[fr(t)]}function fr(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Ng(t){const e=fr(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Dg(t){const e=fr(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Lm(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Ug(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Lm(e)):[Lm(t)]}function ec(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function qm(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Vm(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function at(t){if(t==null)throw new Error("ContentUnion is required");return ec(t)?t:{role:"user",parts:Ug(t)}}function Ec(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(i=>{const o=at(i);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const i=at(e);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]}return Array.isArray(e)?e.map(i=>at(i)):[at(e)]}function qt(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(qm(t)||Vm(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[at(t)]}const e=[],i=[],o=ec(t[0]);for(const l of t){const f=ec(l);if(f!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(f)e.push(l);else{if(qm(l)||Vm(l))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(l)}}return o||e.push({role:"user",parts:Ug(i)}),e}function LT(t,e){t.includes("null")&&(e.nullable=!0);const i=t.filter(o=>o!=="null");if(i.length===1)e.type=Object.values(ft).includes(i[0].toUpperCase())?i[0].toUpperCase():ft.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of i)e.anyOf.push({type:Object.values(ft).includes(o.toUpperCase())?o.toUpperCase():ft.TYPE_UNSPECIFIED})}}function yo(t){const e={},i=["items"],o=["anyOf"],l=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const f=t.anyOf;f!=null&&f.length==2&&(f[0].type==="null"?(e.nullable=!0,t=f[1]):f[1].type==="null"&&(e.nullable=!0,t=f[0])),t.type instanceof Array&&LT(t.type,e);for(const[d,m]of Object.entries(t))if(m!=null)if(d=="type"){if(m==="null")throw new Error("type: null can not be the only possible type for the field.");if(m instanceof Array)continue;e.type=Object.values(ft).includes(m.toUpperCase())?m.toUpperCase():ft.TYPE_UNSPECIFIED}else if(i.includes(d))e[d]=yo(m);else if(o.includes(d)){const g=[];for(const p of m){if(p.type=="null"){e.nullable=!0;continue}g.push(yo(p))}e[d]=g}else if(l.includes(d)){const g={};for(const[p,v]of Object.entries(m))g[p]=yo(v);e[d]=g}else{if(d==="additionalProperties")continue;e[d]=m}return e}function Ac(t){return yo(t)}function wc(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function xc(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Co(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=yo(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=yo(e.response));return t}function Eo(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const i of t)e.push(i);return e}function qT(t,e,i,o=1){const l=!e.startsWith(`${i}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${i}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:l?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}/${e}`:e:l?`${i}/${e}`:e}function mn(t,e){if(typeof e!="string")throw new Error("name must be a string");return qT(t,e,"cachedContents")}function Ig(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function mi(t){return Cc(t)}function VT(t){return t!=null&&typeof t=="object"&&"name"in t}function BT(t){return t!=null&&typeof t=="object"&&"video"in t}function GT(t){return t!=null&&typeof t=="object"&&"uri"in t}function kg(t){var e;let i;if(VT(t)&&(i=t.name),!(GT(t)&&(i=t.uri,i===void 0))&&!(BT(t)&&(i=(e=t.video)===null||e===void 0?void 0:e.uri,i===void 0))){if(typeof t=="string"&&(i=t),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const l=i.split("files/")[1].match(/[a-z0-9]+/);if(l===null)throw new Error(`Could not extract file name from URI ${i}`);i=l[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function Pg(t,e){let i;return t.isVertexAI()?i=e?"publishers/google/models":"models":i=e?"models":"tunedModels",i}function Lg(t){for(const e of["models","tunedModels","publisherModels"])if(OT(t,e))return t[e];return[]}function OT(t,e){return t!==null&&typeof t=="object"&&e in t}function HT(t,e={}){const i=t,o={name:i.name,description:i.description,parametersJsonSchema:i.inputSchema};return i.outputSchema&&(o.responseJsonSchema=i.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function FT(t,e={}){const i=[],o=new Set;for(const l of t){const f=l.name;if(o.has(f))throw new Error(`Duplicate function name ${f} found in MCP tools. Please ensure function names are unique.`);o.add(f);const d=HT(l,e);d.functionDeclarations&&i.push(...d.functionDeclarations)}return{functionDeclarations:i}}function qg(t,e){let i;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))i={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))i={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))i={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");i={inlinedRequests:e}}else i=e;const o=[i.gcsUri,i.bigqueryUri].filter(Boolean).length,l=[i.inlinedRequests,i.fileName].filter(Boolean).length;if(t.isVertexAI()){if(l>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||l!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return i}function zT(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Vg(t){if(typeof t!="object"||t===null)return{};const e=t,i=e.inlinedResponses;if(typeof i!="object"||i===null)return t;const l=i.inlinedResponses;if(!Array.isArray(l)||l.length===0)return t;let f=!1;for(const d of l){if(typeof d!="object"||d===null)continue;const g=d.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){f=!0;break}}return f&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Ao(t,e){const i=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(i))return i.split("/").pop();throw new Error(`Invalid batch job name: ${i}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(i))return i.split("/").pop();if(/^\d+$/.test(i))return i;throw new Error(`Invalid batch job name: ${i}.`)}function Bg(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $T(t){const e={},i=a(t,["fps"]);i!=null&&u(e,["fps"],i);const o=a(t,["endOffset"]);o!=null&&u(e,["endOffset"],o);const l=a(t,["startOffset"]);return l!=null&&u(e,["startOffset"],l),e}function JT(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["data"]);i!=null&&u(e,["data"],i);const o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function YT(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["fileUri"]);i!=null&&u(e,["fileUri"],i);const o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function KT(t){const e={},i=a(t,["id"]);i!=null&&u(e,["id"],i);const o=a(t,["args"]);o!=null&&u(e,["args"],o);const l=a(t,["name"]);return l!=null&&u(e,["name"],l),e}function XT(t){const e={},i=a(t,["videoMetadata"]);i!=null&&u(e,["videoMetadata"],$T(i));const o=a(t,["thought"]);o!=null&&u(e,["thought"],o);const l=a(t,["inlineData"]);l!=null&&u(e,["inlineData"],JT(l));const f=a(t,["fileData"]);f!=null&&u(e,["fileData"],YT(f));const d=a(t,["thoughtSignature"]);d!=null&&u(e,["thoughtSignature"],d);const m=a(t,["functionCall"]);m!=null&&u(e,["functionCall"],KT(m));const g=a(t,["codeExecutionResult"]);g!=null&&u(e,["codeExecutionResult"],g);const p=a(t,["executableCode"]);p!=null&&u(e,["executableCode"],p);const v=a(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const T=a(t,["text"]);return T!=null&&u(e,["text"],T),e}function Gg(t){const e={},i=a(t,["parts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(f=>XT(f))),u(e,["parts"],l)}const o=a(t,["role"]);return o!=null&&u(e,["role"],o),e}function QT(t){const e={},i=a(t,["anyOf"]);i!=null&&u(e,["anyOf"],i);const o=a(t,["default"]);o!=null&&u(e,["default"],o);const l=a(t,["description"]);l!=null&&u(e,["description"],l);const f=a(t,["enum"]);f!=null&&u(e,["enum"],f);const d=a(t,["example"]);d!=null&&u(e,["example"],d);const m=a(t,["format"]);m!=null&&u(e,["format"],m);const g=a(t,["items"]);g!=null&&u(e,["items"],g);const p=a(t,["maxItems"]);p!=null&&u(e,["maxItems"],p);const v=a(t,["maxLength"]);v!=null&&u(e,["maxLength"],v);const T=a(t,["maxProperties"]);T!=null&&u(e,["maxProperties"],T);const S=a(t,["maximum"]);S!=null&&u(e,["maximum"],S);const E=a(t,["minItems"]);E!=null&&u(e,["minItems"],E);const b=a(t,["minLength"]);b!=null&&u(e,["minLength"],b);const N=a(t,["minProperties"]);N!=null&&u(e,["minProperties"],N);const L=a(t,["minimum"]);L!=null&&u(e,["minimum"],L);const q=a(t,["nullable"]);q!=null&&u(e,["nullable"],q);const V=a(t,["pattern"]);V!=null&&u(e,["pattern"],V);const U=a(t,["properties"]);U!=null&&u(e,["properties"],U);const $=a(t,["propertyOrdering"]);$!=null&&u(e,["propertyOrdering"],$);const z=a(t,["required"]);z!=null&&u(e,["required"],z);const Y=a(t,["title"]);Y!=null&&u(e,["title"],Y);const Z=a(t,["type"]);return Z!=null&&u(e,["type"],Z),e}function ZT(t){const e={};if(a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=a(t,["category"]);i!=null&&u(e,["category"],i);const o=a(t,["threshold"]);return o!=null&&u(e,["threshold"],o),e}function WT(t){const e={},i=a(t,["behavior"]);i!=null&&u(e,["behavior"],i);const o=a(t,["description"]);o!=null&&u(e,["description"],o);const l=a(t,["name"]);l!=null&&u(e,["name"],l);const f=a(t,["parameters"]);f!=null&&u(e,["parameters"],f);const d=a(t,["parametersJsonSchema"]);d!=null&&u(e,["parametersJsonSchema"],d);const m=a(t,["response"]);m!=null&&u(e,["response"],m);const g=a(t,["responseJsonSchema"]);return g!=null&&u(e,["responseJsonSchema"],g),e}function jT(t){const e={},i=a(t,["startTime"]);i!=null&&u(e,["startTime"],i);const o=a(t,["endTime"]);return o!=null&&u(e,["endTime"],o),e}function e_(t){const e={},i=a(t,["timeRangeFilter"]);if(i!=null&&u(e,["timeRangeFilter"],jT(i)),a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function t_(t){const e={},i=a(t,["mode"]);i!=null&&u(e,["mode"],i);const o=a(t,["dynamicThreshold"]);return o!=null&&u(e,["dynamicThreshold"],o),e}function n_(t){const e={},i=a(t,["dynamicRetrievalConfig"]);return i!=null&&u(e,["dynamicRetrievalConfig"],t_(i)),e}function i_(){return{}}function o_(t){const e={},i=a(t,["environment"]);return i!=null&&u(e,["environment"],i),e}function s_(t){const e={},i=a(t,["functionDeclarations"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(p=>WT(p))),u(e,["functionDeclarations"],g)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=a(t,["googleSearch"]);o!=null&&u(e,["googleSearch"],e_(o));const l=a(t,["googleSearchRetrieval"]);if(l!=null&&u(e,["googleSearchRetrieval"],n_(l)),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(a(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");a(t,["urlContext"])!=null&&u(e,["urlContext"],i_());const d=a(t,["computerUse"]);d!=null&&u(e,["computerUse"],o_(d));const m=a(t,["codeExecution"]);return m!=null&&u(e,["codeExecution"],m),e}function l_(t){const e={},i=a(t,["mode"]);i!=null&&u(e,["mode"],i);const o=a(t,["allowedFunctionNames"]);return o!=null&&u(e,["allowedFunctionNames"],o),e}function r_(t){const e={},i=a(t,["latitude"]);i!=null&&u(e,["latitude"],i);const o=a(t,["longitude"]);return o!=null&&u(e,["longitude"],o),e}function a_(t){const e={},i=a(t,["latLng"]);i!=null&&u(e,["latLng"],r_(i));const o=a(t,["languageCode"]);return o!=null&&u(e,["languageCode"],o),e}function u_(t){const e={},i=a(t,["functionCallingConfig"]);i!=null&&u(e,["functionCallingConfig"],l_(i));const o=a(t,["retrievalConfig"]);return o!=null&&u(e,["retrievalConfig"],a_(o)),e}function c_(t){const e={},i=a(t,["voiceName"]);return i!=null&&u(e,["voiceName"],i),e}function Og(t){const e={},i=a(t,["prebuiltVoiceConfig"]);return i!=null&&u(e,["prebuiltVoiceConfig"],c_(i)),e}function f_(t){const e={},i=a(t,["speaker"]);i!=null&&u(e,["speaker"],i);const o=a(t,["voiceConfig"]);return o!=null&&u(e,["voiceConfig"],Og(o)),e}function d_(t){const e={},i=a(t,["speakerVoiceConfigs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>f_(l))),u(e,["speakerVoiceConfigs"],o)}return e}function h_(t){const e={},i=a(t,["voiceConfig"]);i!=null&&u(e,["voiceConfig"],Og(i));const o=a(t,["multiSpeakerVoiceConfig"]);o!=null&&u(e,["multiSpeakerVoiceConfig"],d_(o));const l=a(t,["languageCode"]);return l!=null&&u(e,["languageCode"],l),e}function p_(t){const e={},i=a(t,["includeThoughts"]);i!=null&&u(e,["includeThoughts"],i);const o=a(t,["thinkingBudget"]);return o!=null&&u(e,["thinkingBudget"],o),e}function m_(t,e,i){const o={},l=a(e,["systemInstruction"]);i!==void 0&&l!=null&&u(i,["systemInstruction"],Gg(at(l)));const f=a(e,["temperature"]);f!=null&&u(o,["temperature"],f);const d=a(e,["topP"]);d!=null&&u(o,["topP"],d);const m=a(e,["topK"]);m!=null&&u(o,["topK"],m);const g=a(e,["candidateCount"]);g!=null&&u(o,["candidateCount"],g);const p=a(e,["maxOutputTokens"]);p!=null&&u(o,["maxOutputTokens"],p);const v=a(e,["stopSequences"]);v!=null&&u(o,["stopSequences"],v);const T=a(e,["responseLogprobs"]);T!=null&&u(o,["responseLogprobs"],T);const S=a(e,["logprobs"]);S!=null&&u(o,["logprobs"],S);const E=a(e,["presencePenalty"]);E!=null&&u(o,["presencePenalty"],E);const b=a(e,["frequencyPenalty"]);b!=null&&u(o,["frequencyPenalty"],b);const N=a(e,["seed"]);N!=null&&u(o,["seed"],N);const L=a(e,["responseMimeType"]);L!=null&&u(o,["responseMimeType"],L);const q=a(e,["responseSchema"]);q!=null&&u(o,["responseSchema"],QT(Ac(q)));const V=a(e,["responseJsonSchema"]);if(V!=null&&u(o,["responseJsonSchema"],V),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const U=a(e,["safetySettings"]);if(i!==void 0&&U!=null){let ie=U;Array.isArray(ie)&&(ie=ie.map(fe=>ZT(fe))),u(i,["safetySettings"],ie)}const $=a(e,["tools"]);if(i!==void 0&&$!=null){let ie=Eo($);Array.isArray(ie)&&(ie=ie.map(fe=>s_(Co(fe)))),u(i,["tools"],ie)}const z=a(e,["toolConfig"]);if(i!==void 0&&z!=null&&u(i,["toolConfig"],u_(z)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Y=a(e,["cachedContent"]);i!==void 0&&Y!=null&&u(i,["cachedContent"],mn(t,Y));const Z=a(e,["responseModalities"]);Z!=null&&u(o,["responseModalities"],Z);const ue=a(e,["mediaResolution"]);ue!=null&&u(o,["mediaResolution"],ue);const ne=a(e,["speechConfig"]);if(ne!=null&&u(o,["speechConfig"],h_(wc(ne))),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ee=a(e,["thinkingConfig"]);return ee!=null&&u(o,["thinkingConfig"],p_(ee)),o}function g_(t,e){const i={},o=a(e,["model"]);o!=null&&u(i,["request","model"],Ee(t,o));const l=a(e,["contents"]);if(l!=null){let d=qt(l);Array.isArray(d)&&(d=d.map(m=>Gg(m))),u(i,["request","contents"],d)}const f=a(e,["config"]);return f!=null&&u(i,["request","generationConfig"],m_(t,f,i)),i}function y_(t,e){const i={};if(a(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=a(e,["fileName"]);o!=null&&u(i,["fileName"],o);const l=a(e,["inlinedRequests"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(d=>g_(t,d))),u(i,["requests","requests"],f)}return i}function v_(t,e){const i={},o=a(t,["displayName"]);if(e!==void 0&&o!=null&&u(e,["batch","displayName"],o),a(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return i}function Ou(t,e){const i={},o=a(e,["model"]);o!=null&&u(i,["_url","model"],Ee(t,o));const l=a(e,["src"]);l!=null&&u(i,["batch","inputConfig"],y_(t,qg(t,l)));const f=a(e,["config"]);return f!=null&&u(i,["config"],v_(f,i)),i}function T_(t,e){const i={},o=a(t,["taskType"]);e!==void 0&&o!=null&&u(e,["requests[]","taskType"],o);const l=a(t,["title"]);e!==void 0&&l!=null&&u(e,["requests[]","title"],l);const f=a(t,["outputDimensionality"]);if(e!==void 0&&f!=null&&u(e,["requests[]","outputDimensionality"],f),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function __(t,e){const i={},o=a(e,["contents"]);o!=null&&u(i,["requests[]","request","content"],Ec(t,o));const l=a(e,["config"]);return l!=null&&u(i,["config"],T_(l,i)),i}function S_(t,e){const i={},o=a(e,["fileName"]);o!=null&&u(i,["file_name"],o);const l=a(e,["inlinedRequests"]);return l!=null&&u(i,["requests"],__(t,l)),i}function C_(t,e){const i={},o=a(t,["displayName"]);return e!==void 0&&o!=null&&u(e,["batch","displayName"],o),i}function Hu(t,e){const i={},o=a(e,["model"]);o!=null&&u(i,["_url","model"],Ee(t,o));const l=a(e,["src"]);l!=null&&u(i,["batch","inputConfig"],S_(t,l));const f=a(e,["config"]);return f!=null&&u(i,["config"],C_(f,i)),i}function E_(t,e){const i={},o=a(e,["name"]);o!=null&&u(i,["_url","name"],Ao(t,o));const l=a(e,["config"]);return l!=null&&u(i,["config"],l),i}function A_(t,e){const i={},o=a(e,["name"]);o!=null&&u(i,["_url","name"],Ao(t,o));const l=a(e,["config"]);return l!=null&&u(i,["config"],l),i}function w_(t,e){const i={},o=a(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);const l=a(t,["pageToken"]);if(e!==void 0&&l!=null&&u(e,["_query","pageToken"],l),a(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return i}function x_(t){const e={},i=a(t,["config"]);return i!=null&&u(e,["config"],w_(i,e)),e}function R_(t,e){const i={},o=a(e,["name"]);o!=null&&u(i,["_url","name"],Ao(t,o));const l=a(e,["config"]);return l!=null&&u(i,["config"],l),i}function b_(t){const e={},i=a(t,["format"]);i!=null&&u(e,["instancesFormat"],i);const o=a(t,["gcsUri"]);o!=null&&u(e,["gcsSource","uris"],o);const l=a(t,["bigqueryUri"]);if(l!=null&&u(e,["bigquerySource","inputUri"],l),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function M_(t){const e={},i=a(t,["format"]);i!=null&&u(e,["predictionsFormat"],i);const o=a(t,["gcsUri"]);o!=null&&u(e,["gcsDestination","outputUriPrefix"],o);const l=a(t,["bigqueryUri"]);if(l!=null&&u(e,["bigqueryDestination","outputUri"],l),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(a(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function N_(t,e){const i={},o=a(t,["displayName"]);e!==void 0&&o!=null&&u(e,["displayName"],o);const l=a(t,["dest"]);return e!==void 0&&l!=null&&u(e,["outputConfig"],M_(zT(l))),i}function D_(t,e){const i={},o=a(e,["model"]);o!=null&&u(i,["model"],Ee(t,o));const l=a(e,["src"]);l!=null&&u(i,["inputConfig"],b_(qg(t,l)));const f=a(e,["config"]);return f!=null&&u(i,["config"],N_(f,i)),i}function U_(t,e){const i={},o=a(e,["name"]);o!=null&&u(i,["_url","name"],Ao(t,o));const l=a(e,["config"]);return l!=null&&u(i,["config"],l),i}function I_(t,e){const i={},o=a(e,["name"]);o!=null&&u(i,["_url","name"],Ao(t,o));const l=a(e,["config"]);return l!=null&&u(i,["config"],l),i}function k_(t,e){const i={},o=a(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);const l=a(t,["pageToken"]);e!==void 0&&l!=null&&u(e,["_query","pageToken"],l);const f=a(t,["filter"]);return e!==void 0&&f!=null&&u(e,["_query","filter"],f),i}function P_(t){const e={},i=a(t,["config"]);return i!=null&&u(e,["config"],k_(i,e)),e}function L_(t,e){const i={},o=a(e,["name"]);o!=null&&u(i,["_url","name"],Ao(t,o));const l=a(e,["config"]);return l!=null&&u(i,["config"],l),i}function q_(t){const e={},i=a(t,["fps"]);i!=null&&u(e,["fps"],i);const o=a(t,["endOffset"]);o!=null&&u(e,["endOffset"],o);const l=a(t,["startOffset"]);return l!=null&&u(e,["startOffset"],l),e}function V_(t){const e={},i=a(t,["data"]);i!=null&&u(e,["data"],i);const o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function B_(t){const e={},i=a(t,["fileUri"]);i!=null&&u(e,["fileUri"],i);const o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function G_(t){const e={},i=a(t,["id"]);i!=null&&u(e,["id"],i);const o=a(t,["args"]);o!=null&&u(e,["args"],o);const l=a(t,["name"]);return l!=null&&u(e,["name"],l),e}function O_(t){const e={},i=a(t,["videoMetadata"]);i!=null&&u(e,["videoMetadata"],q_(i));const o=a(t,["thought"]);o!=null&&u(e,["thought"],o);const l=a(t,["inlineData"]);l!=null&&u(e,["inlineData"],V_(l));const f=a(t,["fileData"]);f!=null&&u(e,["fileData"],B_(f));const d=a(t,["thoughtSignature"]);d!=null&&u(e,["thoughtSignature"],d);const m=a(t,["functionCall"]);m!=null&&u(e,["functionCall"],G_(m));const g=a(t,["codeExecutionResult"]);g!=null&&u(e,["codeExecutionResult"],g);const p=a(t,["executableCode"]);p!=null&&u(e,["executableCode"],p);const v=a(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const T=a(t,["text"]);return T!=null&&u(e,["text"],T),e}function H_(t){const e={},i=a(t,["parts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(f=>O_(f))),u(e,["parts"],l)}const o=a(t,["role"]);return o!=null&&u(e,["role"],o),e}function F_(t){const e={},i=a(t,["citationSources"]);return i!=null&&u(e,["citations"],i),e}function z_(t){const e={},i=a(t,["retrievedUrl"]);i!=null&&u(e,["retrievedUrl"],i);const o=a(t,["urlRetrievalStatus"]);return o!=null&&u(e,["urlRetrievalStatus"],o),e}function $_(t){const e={},i=a(t,["urlMetadata"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>z_(l))),u(e,["urlMetadata"],o)}return e}function J_(t){const e={},i=a(t,["content"]);i!=null&&u(e,["content"],H_(i));const o=a(t,["citationMetadata"]);o!=null&&u(e,["citationMetadata"],F_(o));const l=a(t,["tokenCount"]);l!=null&&u(e,["tokenCount"],l);const f=a(t,["finishReason"]);f!=null&&u(e,["finishReason"],f);const d=a(t,["urlContextMetadata"]);d!=null&&u(e,["urlContextMetadata"],$_(d));const m=a(t,["avgLogprobs"]);m!=null&&u(e,["avgLogprobs"],m);const g=a(t,["groundingMetadata"]);g!=null&&u(e,["groundingMetadata"],g);const p=a(t,["index"]);p!=null&&u(e,["index"],p);const v=a(t,["logprobsResult"]);v!=null&&u(e,["logprobsResult"],v);const T=a(t,["safetyRatings"]);return T!=null&&u(e,["safetyRatings"],T),e}function Y_(t){const e={},i=a(t,["sdkHttpResponse"]);i!=null&&u(e,["sdkHttpResponse"],i);const o=a(t,["candidates"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(p=>J_(p))),u(e,["candidates"],g)}const l=a(t,["modelVersion"]);l!=null&&u(e,["modelVersion"],l);const f=a(t,["promptFeedback"]);f!=null&&u(e,["promptFeedback"],f);const d=a(t,["responseId"]);d!=null&&u(e,["responseId"],d);const m=a(t,["usageMetadata"]);return m!=null&&u(e,["usageMetadata"],m),e}function Rc(t){const e={},i=a(t,["details"]);i!=null&&u(e,["details"],i);const o=a(t,["code"]);o!=null&&u(e,["code"],o);const l=a(t,["message"]);return l!=null&&u(e,["message"],l),e}function K_(t){const e={},i=a(t,["response"]);i!=null&&u(e,["response"],Y_(i));const o=a(t,["error"]);return o!=null&&u(e,["error"],Rc(o)),e}function X_(t){const e={},i=a(t,["values"]);return i!=null&&u(e,["values"],i),e}function Q_(t){const e={},i=a(t,["embedding"]);i!=null&&u(e,["embedding"],X_(i));const o=a(t,["tokenCount"]);return o!=null&&u(e,["tokenCount"],o),e}function Z_(t){const e={},i=a(t,["response"]);i!=null&&u(e,["response"],Q_(i));const o=a(t,["error"]);return o!=null&&u(e,["error"],Rc(o)),e}function W_(t){const e={},i=a(t,["responsesFile"]);i!=null&&u(e,["fileName"],i);const o=a(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(d=>K_(d))),u(e,["inlinedResponses"],f)}const l=a(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(d=>Z_(d))),u(e,["inlinedEmbedContentResponses"],f)}return e}function ho(t){const e={},i=a(t,["name"]);i!=null&&u(e,["name"],i);const o=a(t,["metadata","displayName"]);o!=null&&u(e,["displayName"],o);const l=a(t,["metadata","state"]);l!=null&&u(e,["state"],Bg(l));const f=a(t,["metadata","createTime"]);f!=null&&u(e,["createTime"],f);const d=a(t,["metadata","endTime"]);d!=null&&u(e,["endTime"],d);const m=a(t,["metadata","updateTime"]);m!=null&&u(e,["updateTime"],m);const g=a(t,["metadata","model"]);g!=null&&u(e,["model"],g);const p=a(t,["metadata","output"]);return p!=null&&u(e,["dest"],W_(Vg(p))),e}function j_(t){const e={},i=a(t,["sdkHttpResponse"]);i!=null&&u(e,["sdkHttpResponse"],i);const o=a(t,["nextPageToken"]);o!=null&&u(e,["nextPageToken"],o);const l=a(t,["operations"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(d=>ho(d))),u(e,["batchJobs"],f)}return e}function eS(t){const e={},i=a(t,["sdkHttpResponse"]);i!=null&&u(e,["sdkHttpResponse"],i);const o=a(t,["name"]);o!=null&&u(e,["name"],o);const l=a(t,["done"]);l!=null&&u(e,["done"],l);const f=a(t,["error"]);return f!=null&&u(e,["error"],Rc(f)),e}function Hg(t){const e={},i=a(t,["details"]);i!=null&&u(e,["details"],i);const o=a(t,["code"]);o!=null&&u(e,["code"],o);const l=a(t,["message"]);return l!=null&&u(e,["message"],l),e}function tS(t){const e={},i=a(t,["instancesFormat"]);i!=null&&u(e,["format"],i);const o=a(t,["gcsSource","uris"]);o!=null&&u(e,["gcsUri"],o);const l=a(t,["bigquerySource","inputUri"]);return l!=null&&u(e,["bigqueryUri"],l),e}function nS(t){const e={},i=a(t,["predictionsFormat"]);i!=null&&u(e,["format"],i);const o=a(t,["gcsDestination","outputUriPrefix"]);o!=null&&u(e,["gcsUri"],o);const l=a(t,["bigqueryDestination","outputUri"]);return l!=null&&u(e,["bigqueryUri"],l),e}function tc(t){const e={},i=a(t,["name"]);i!=null&&u(e,["name"],i);const o=a(t,["displayName"]);o!=null&&u(e,["displayName"],o);const l=a(t,["state"]);l!=null&&u(e,["state"],Bg(l));const f=a(t,["error"]);f!=null&&u(e,["error"],Hg(f));const d=a(t,["createTime"]);d!=null&&u(e,["createTime"],d);const m=a(t,["startTime"]);m!=null&&u(e,["startTime"],m);const g=a(t,["endTime"]);g!=null&&u(e,["endTime"],g);const p=a(t,["updateTime"]);p!=null&&u(e,["updateTime"],p);const v=a(t,["model"]);v!=null&&u(e,["model"],v);const T=a(t,["inputConfig"]);T!=null&&u(e,["src"],tS(T));const S=a(t,["outputConfig"]);return S!=null&&u(e,["dest"],nS(Vg(S))),e}function iS(t){const e={},i=a(t,["sdkHttpResponse"]);i!=null&&u(e,["sdkHttpResponse"],i);const o=a(t,["nextPageToken"]);o!=null&&u(e,["nextPageToken"],o);const l=a(t,["batchPredictionJobs"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(d=>tc(d))),u(e,["batchJobs"],f)}return e}function oS(t){const e={},i=a(t,["sdkHttpResponse"]);i!=null&&u(e,["sdkHttpResponse"],i);const o=a(t,["name"]);o!=null&&u(e,["name"],o);const l=a(t,["done"]);l!=null&&u(e,["done"],l);const f=a(t,["error"]);return f!=null&&u(e,["error"],Hg(f)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var hi;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(hi||(hi={}));class ks{constructor(e,i,o,l){this.pageInternal=[],this.paramsInternal={},this.requestInternal=i,this.init(e,o,l)}init(e,i,o){var l,f;this.nameInternal=e,this.pageInternal=i[this.nameInternal]||[],this.sdkHttpResponseInternal=i==null?void 0:i.sdkHttpResponse,this.idxInternal=0;let d={config:{}};!o||Object.keys(o).length===0?d={config:{}}:typeof o=="object"?d=Object.assign({},o):d=o,d.config&&(d.config.pageToken=i.nextPageToken),this.paramsInternal=d,this.pageInternalSize=(f=(l=d.config)===null||l===void 0?void 0:l.pageSize)!==null&&f!==void 0?f:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sS extends pi{constructor(e){super(),this.apiClient=e,this.create=async i=>{var o,l;if(this.apiClient.isVertexAI())return i.config=this.formatDestination(i.src,i.config),this.createInternal(i);const f=i.src;if(!(Array.isArray(i.src)||f.inlinedRequests!==void 0))return this.createInternal(i);const m=this.createInlinedGenerateContentRequest(i),g=m.path,p=m.body,v=Ou(this.apiClient,i)._query||{};return this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=i.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=i.config)===null||l===void 0?void 0:l.abortSignal}).then(S=>S.json()).then(S=>ho(S))},this.createEmbeddings=async i=>{var o,l;if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");if(!(i.src.inlinedRequests!==void 0))return this.createEmbeddingsInternal(i);const m=this.createInlinedEmbedContentRequest(i),g=m.path,p=m.body,v=Hu(this.apiClient,i)._query||{};return this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=i.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=i.config)===null||l===void 0?void 0:l.abortSignal}).then(S=>S.json()).then(S=>ho(S))},this.list=async(i={})=>new ks(hi.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(i),i)}createInlinedGenerateContentRequest(e){const i=Ou(this.apiClient,e),o=i._url,l=W("{model}:batchGenerateContent",o),m=i.batch.inputConfig.requests,g=m.requests,p=[];for(const v of g){const T=Object.assign({},v);if(T.systemInstruction){const S=T.systemInstruction;delete T.systemInstruction;const E=T.request;E.systemInstruction=S,T.request=E}p.push(T)}return m.requests=p,delete i.config,delete i._url,delete i._query,{path:l,body:i}}createInlinedEmbedContentRequest(e){const i=Hu(this.apiClient,e),o=i._url,l=W("{model}:asyncBatchEmbedContent",o),m=i.batch.inputConfig.requests,g=m.requests,p=[];delete m.config;for(const v of g){const T=Object.assign({},v),S=T.request;for(const E in T)E!=="request"&&(S[E]=T[E],delete T[E]);p.push(T)}return m.requests=p,delete i.config,delete i._url,delete i._query,{path:l,body:i}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,i){const o=i?Object.assign({},i):{},l=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${l}`),o.dest===void 0){const f=this.getGcsUri(e),d=this.getBigqueryUri(e);if(f)f.endsWith(".jsonl")?o.dest=`${f.slice(0,-6)}/dest`:o.dest=`${f}_dest_${l}`;else if(d)o.dest=`${d}_dest_${l}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var i,o,l,f;let d,m="",g={};if(this.apiClient.isVertexAI()){const p=D_(this.apiClient,e);return m=W("batchPredictionJobs",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),d.then(v=>tc(v))}else{const p=Ou(this.apiClient,e);return m=W("{model}:batchGenerateContent",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),d.then(v=>ho(v))}}async createEmbeddingsInternal(e){var i,o;let l,f="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=Hu(this.apiClient,e);return f=W("{model}:asyncBatchEmbedContent",m._url),d=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>ho(g))}}async get(e){var i,o,l,f;let d,m="",g={};if(this.apiClient.isVertexAI()){const p=U_(this.apiClient,e);return m=W("batchPredictionJobs/{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),d.then(v=>tc(v))}else{const p=E_(this.apiClient,e);return m=W("batches/{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),d.then(v=>ho(v))}}async cancel(e){var i,o,l,f;let d="",m={};if(this.apiClient.isVertexAI()){const g=I_(this.apiClient,e);d=W("batchPredictionJobs/{name}:cancel",g._url),m=g._query,delete g.config,delete g._url,delete g._query,await this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const g=A_(this.apiClient,e);d=W("batches/{name}:cancel",g._url),m=g._query,delete g.config,delete g._url,delete g._query,await this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal})}}async listInternal(e){var i,o,l,f;let d,m="",g={};if(this.apiClient.isVertexAI()){const p=P_(e);return m=W("batchPredictionJobs",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const T=iS(v),S=new Pm;return Object.assign(S,T),S})}else{const p=x_(e);return m=W("batches",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const T=j_(v),S=new Pm;return Object.assign(S,T),S})}}async delete(e){var i,o,l,f;let d,m="",g={};if(this.apiClient.isVertexAI()){const p=L_(this.apiClient,e);return m=W("batchPredictionJobs/{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>oS(v))}else{const p=R_(this.apiClient,e);return m=W("batches/{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>eS(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lS(t){const e={},i=a(t,["fps"]);i!=null&&u(e,["fps"],i);const o=a(t,["endOffset"]);o!=null&&u(e,["endOffset"],o);const l=a(t,["startOffset"]);return l!=null&&u(e,["startOffset"],l),e}function rS(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["data"]);i!=null&&u(e,["data"],i);const o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function aS(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["fileUri"]);i!=null&&u(e,["fileUri"],i);const o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function uS(t){const e={},i=a(t,["id"]);i!=null&&u(e,["id"],i);const o=a(t,["args"]);o!=null&&u(e,["args"],o);const l=a(t,["name"]);return l!=null&&u(e,["name"],l),e}function cS(t){const e={},i=a(t,["videoMetadata"]);i!=null&&u(e,["videoMetadata"],lS(i));const o=a(t,["thought"]);o!=null&&u(e,["thought"],o);const l=a(t,["inlineData"]);l!=null&&u(e,["inlineData"],rS(l));const f=a(t,["fileData"]);f!=null&&u(e,["fileData"],aS(f));const d=a(t,["thoughtSignature"]);d!=null&&u(e,["thoughtSignature"],d);const m=a(t,["functionCall"]);m!=null&&u(e,["functionCall"],uS(m));const g=a(t,["codeExecutionResult"]);g!=null&&u(e,["codeExecutionResult"],g);const p=a(t,["executableCode"]);p!=null&&u(e,["executableCode"],p);const v=a(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const T=a(t,["text"]);return T!=null&&u(e,["text"],T),e}function Bm(t){const e={},i=a(t,["parts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(f=>cS(f))),u(e,["parts"],l)}const o=a(t,["role"]);return o!=null&&u(e,["role"],o),e}function fS(t){const e={},i=a(t,["behavior"]);i!=null&&u(e,["behavior"],i);const o=a(t,["description"]);o!=null&&u(e,["description"],o);const l=a(t,["name"]);l!=null&&u(e,["name"],l);const f=a(t,["parameters"]);f!=null&&u(e,["parameters"],f);const d=a(t,["parametersJsonSchema"]);d!=null&&u(e,["parametersJsonSchema"],d);const m=a(t,["response"]);m!=null&&u(e,["response"],m);const g=a(t,["responseJsonSchema"]);return g!=null&&u(e,["responseJsonSchema"],g),e}function dS(t){const e={},i=a(t,["startTime"]);i!=null&&u(e,["startTime"],i);const o=a(t,["endTime"]);return o!=null&&u(e,["endTime"],o),e}function hS(t){const e={},i=a(t,["timeRangeFilter"]);if(i!=null&&u(e,["timeRangeFilter"],dS(i)),a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function pS(t){const e={},i=a(t,["mode"]);i!=null&&u(e,["mode"],i);const o=a(t,["dynamicThreshold"]);return o!=null&&u(e,["dynamicThreshold"],o),e}function mS(t){const e={},i=a(t,["dynamicRetrievalConfig"]);return i!=null&&u(e,["dynamicRetrievalConfig"],pS(i)),e}function gS(){return{}}function yS(t){const e={},i=a(t,["environment"]);return i!=null&&u(e,["environment"],i),e}function vS(t){const e={},i=a(t,["functionDeclarations"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(p=>fS(p))),u(e,["functionDeclarations"],g)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=a(t,["googleSearch"]);o!=null&&u(e,["googleSearch"],hS(o));const l=a(t,["googleSearchRetrieval"]);if(l!=null&&u(e,["googleSearchRetrieval"],mS(l)),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(a(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");a(t,["urlContext"])!=null&&u(e,["urlContext"],gS());const d=a(t,["computerUse"]);d!=null&&u(e,["computerUse"],yS(d));const m=a(t,["codeExecution"]);return m!=null&&u(e,["codeExecution"],m),e}function TS(t){const e={},i=a(t,["mode"]);i!=null&&u(e,["mode"],i);const o=a(t,["allowedFunctionNames"]);return o!=null&&u(e,["allowedFunctionNames"],o),e}function _S(t){const e={},i=a(t,["latitude"]);i!=null&&u(e,["latitude"],i);const o=a(t,["longitude"]);return o!=null&&u(e,["longitude"],o),e}function SS(t){const e={},i=a(t,["latLng"]);i!=null&&u(e,["latLng"],_S(i));const o=a(t,["languageCode"]);return o!=null&&u(e,["languageCode"],o),e}function CS(t){const e={},i=a(t,["functionCallingConfig"]);i!=null&&u(e,["functionCallingConfig"],TS(i));const o=a(t,["retrievalConfig"]);return o!=null&&u(e,["retrievalConfig"],SS(o)),e}function ES(t,e){const i={},o=a(t,["ttl"]);e!==void 0&&o!=null&&u(e,["ttl"],o);const l=a(t,["expireTime"]);e!==void 0&&l!=null&&u(e,["expireTime"],l);const f=a(t,["displayName"]);e!==void 0&&f!=null&&u(e,["displayName"],f);const d=a(t,["contents"]);if(e!==void 0&&d!=null){let v=qt(d);Array.isArray(v)&&(v=v.map(T=>Bm(T))),u(e,["contents"],v)}const m=a(t,["systemInstruction"]);e!==void 0&&m!=null&&u(e,["systemInstruction"],Bm(at(m)));const g=a(t,["tools"]);if(e!==void 0&&g!=null){let v=g;Array.isArray(v)&&(v=v.map(T=>vS(T))),u(e,["tools"],v)}const p=a(t,["toolConfig"]);if(e!==void 0&&p!=null&&u(e,["toolConfig"],CS(p)),a(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return i}function AS(t,e){const i={},o=a(e,["model"]);o!=null&&u(i,["model"],bg(t,o));const l=a(e,["config"]);return l!=null&&u(i,["config"],ES(l,i)),i}function wS(t,e){const i={},o=a(e,["name"]);o!=null&&u(i,["_url","name"],mn(t,o));const l=a(e,["config"]);return l!=null&&u(i,["config"],l),i}function xS(t,e){const i={},o=a(e,["name"]);o!=null&&u(i,["_url","name"],mn(t,o));const l=a(e,["config"]);return l!=null&&u(i,["config"],l),i}function RS(t,e){const i={},o=a(t,["ttl"]);e!==void 0&&o!=null&&u(e,["ttl"],o);const l=a(t,["expireTime"]);return e!==void 0&&l!=null&&u(e,["expireTime"],l),i}function bS(t,e){const i={},o=a(e,["name"]);o!=null&&u(i,["_url","name"],mn(t,o));const l=a(e,["config"]);return l!=null&&u(i,["config"],RS(l,i)),i}function MS(t,e){const i={},o=a(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);const l=a(t,["pageToken"]);return e!==void 0&&l!=null&&u(e,["_query","pageToken"],l),i}function NS(t){const e={},i=a(t,["config"]);return i!=null&&u(e,["config"],MS(i,e)),e}function DS(t){const e={},i=a(t,["fps"]);i!=null&&u(e,["fps"],i);const o=a(t,["endOffset"]);o!=null&&u(e,["endOffset"],o);const l=a(t,["startOffset"]);return l!=null&&u(e,["startOffset"],l),e}function US(t){const e={},i=a(t,["displayName"]);i!=null&&u(e,["displayName"],i);const o=a(t,["data"]);o!=null&&u(e,["data"],o);const l=a(t,["mimeType"]);return l!=null&&u(e,["mimeType"],l),e}function IS(t){const e={},i=a(t,["displayName"]);i!=null&&u(e,["displayName"],i);const o=a(t,["fileUri"]);o!=null&&u(e,["fileUri"],o);const l=a(t,["mimeType"]);return l!=null&&u(e,["mimeType"],l),e}function kS(t){const e={},i=a(t,["id"]);i!=null&&u(e,["id"],i);const o=a(t,["args"]);o!=null&&u(e,["args"],o);const l=a(t,["name"]);return l!=null&&u(e,["name"],l),e}function PS(t){const e={},i=a(t,["videoMetadata"]);i!=null&&u(e,["videoMetadata"],DS(i));const o=a(t,["thought"]);o!=null&&u(e,["thought"],o);const l=a(t,["inlineData"]);l!=null&&u(e,["inlineData"],US(l));const f=a(t,["fileData"]);f!=null&&u(e,["fileData"],IS(f));const d=a(t,["thoughtSignature"]);d!=null&&u(e,["thoughtSignature"],d);const m=a(t,["functionCall"]);m!=null&&u(e,["functionCall"],kS(m));const g=a(t,["codeExecutionResult"]);g!=null&&u(e,["codeExecutionResult"],g);const p=a(t,["executableCode"]);p!=null&&u(e,["executableCode"],p);const v=a(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const T=a(t,["text"]);return T!=null&&u(e,["text"],T),e}function Gm(t){const e={},i=a(t,["parts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(f=>PS(f))),u(e,["parts"],l)}const o=a(t,["role"]);return o!=null&&u(e,["role"],o),e}function LS(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=a(t,["description"]);i!=null&&u(e,["description"],i);const o=a(t,["name"]);o!=null&&u(e,["name"],o);const l=a(t,["parameters"]);l!=null&&u(e,["parameters"],l);const f=a(t,["parametersJsonSchema"]);f!=null&&u(e,["parametersJsonSchema"],f);const d=a(t,["response"]);d!=null&&u(e,["response"],d);const m=a(t,["responseJsonSchema"]);return m!=null&&u(e,["responseJsonSchema"],m),e}function qS(t){const e={},i=a(t,["startTime"]);i!=null&&u(e,["startTime"],i);const o=a(t,["endTime"]);return o!=null&&u(e,["endTime"],o),e}function VS(t){const e={},i=a(t,["timeRangeFilter"]);i!=null&&u(e,["timeRangeFilter"],qS(i));const o=a(t,["excludeDomains"]);return o!=null&&u(e,["excludeDomains"],o),e}function BS(t){const e={},i=a(t,["mode"]);i!=null&&u(e,["mode"],i);const o=a(t,["dynamicThreshold"]);return o!=null&&u(e,["dynamicThreshold"],o),e}function GS(t){const e={},i=a(t,["dynamicRetrievalConfig"]);return i!=null&&u(e,["dynamicRetrievalConfig"],BS(i)),e}function OS(t){const e={},i=a(t,["excludeDomains"]);return i!=null&&u(e,["excludeDomains"],i),e}function HS(t){const e={},i=a(t,["apiKeyString"]);return i!=null&&u(e,["apiKeyString"],i),e}function FS(t){const e={},i=a(t,["apiKeyConfig"]);i!=null&&u(e,["apiKeyConfig"],HS(i));const o=a(t,["authType"]);o!=null&&u(e,["authType"],o);const l=a(t,["googleServiceAccountConfig"]);l!=null&&u(e,["googleServiceAccountConfig"],l);const f=a(t,["httpBasicAuthConfig"]);f!=null&&u(e,["httpBasicAuthConfig"],f);const d=a(t,["oauthConfig"]);d!=null&&u(e,["oauthConfig"],d);const m=a(t,["oidcConfig"]);return m!=null&&u(e,["oidcConfig"],m),e}function zS(t){const e={},i=a(t,["authConfig"]);return i!=null&&u(e,["authConfig"],FS(i)),e}function $S(){return{}}function JS(t){const e={},i=a(t,["environment"]);return i!=null&&u(e,["environment"],i),e}function YS(t){const e={},i=a(t,["functionDeclarations"]);if(i!=null){let T=i;Array.isArray(T)&&(T=T.map(S=>LS(S))),u(e,["functionDeclarations"],T)}const o=a(t,["retrieval"]);o!=null&&u(e,["retrieval"],o);const l=a(t,["googleSearch"]);l!=null&&u(e,["googleSearch"],VS(l));const f=a(t,["googleSearchRetrieval"]);f!=null&&u(e,["googleSearchRetrieval"],GS(f));const d=a(t,["enterpriseWebSearch"]);d!=null&&u(e,["enterpriseWebSearch"],OS(d));const m=a(t,["googleMaps"]);m!=null&&u(e,["googleMaps"],zS(m)),a(t,["urlContext"])!=null&&u(e,["urlContext"],$S());const p=a(t,["computerUse"]);p!=null&&u(e,["computerUse"],JS(p));const v=a(t,["codeExecution"]);return v!=null&&u(e,["codeExecution"],v),e}function KS(t){const e={},i=a(t,["mode"]);i!=null&&u(e,["mode"],i);const o=a(t,["allowedFunctionNames"]);return o!=null&&u(e,["allowedFunctionNames"],o),e}function XS(t){const e={},i=a(t,["latitude"]);i!=null&&u(e,["latitude"],i);const o=a(t,["longitude"]);return o!=null&&u(e,["longitude"],o),e}function QS(t){const e={},i=a(t,["latLng"]);i!=null&&u(e,["latLng"],XS(i));const o=a(t,["languageCode"]);return o!=null&&u(e,["languageCode"],o),e}function ZS(t){const e={},i=a(t,["functionCallingConfig"]);i!=null&&u(e,["functionCallingConfig"],KS(i));const o=a(t,["retrievalConfig"]);return o!=null&&u(e,["retrievalConfig"],QS(o)),e}function WS(t,e){const i={},o=a(t,["ttl"]);e!==void 0&&o!=null&&u(e,["ttl"],o);const l=a(t,["expireTime"]);e!==void 0&&l!=null&&u(e,["expireTime"],l);const f=a(t,["displayName"]);e!==void 0&&f!=null&&u(e,["displayName"],f);const d=a(t,["contents"]);if(e!==void 0&&d!=null){let T=qt(d);Array.isArray(T)&&(T=T.map(S=>Gm(S))),u(e,["contents"],T)}const m=a(t,["systemInstruction"]);e!==void 0&&m!=null&&u(e,["systemInstruction"],Gm(at(m)));const g=a(t,["tools"]);if(e!==void 0&&g!=null){let T=g;Array.isArray(T)&&(T=T.map(S=>YS(S))),u(e,["tools"],T)}const p=a(t,["toolConfig"]);e!==void 0&&p!=null&&u(e,["toolConfig"],ZS(p));const v=a(t,["kmsKeyName"]);return e!==void 0&&v!=null&&u(e,["encryption_spec","kmsKeyName"],v),i}function jS(t,e){const i={},o=a(e,["model"]);o!=null&&u(i,["model"],bg(t,o));const l=a(e,["config"]);return l!=null&&u(i,["config"],WS(l,i)),i}function eC(t,e){const i={},o=a(e,["name"]);o!=null&&u(i,["_url","name"],mn(t,o));const l=a(e,["config"]);return l!=null&&u(i,["config"],l),i}function tC(t,e){const i={},o=a(e,["name"]);o!=null&&u(i,["_url","name"],mn(t,o));const l=a(e,["config"]);return l!=null&&u(i,["config"],l),i}function nC(t,e){const i={},o=a(t,["ttl"]);e!==void 0&&o!=null&&u(e,["ttl"],o);const l=a(t,["expireTime"]);return e!==void 0&&l!=null&&u(e,["expireTime"],l),i}function iC(t,e){const i={},o=a(e,["name"]);o!=null&&u(i,["_url","name"],mn(t,o));const l=a(e,["config"]);return l!=null&&u(i,["config"],nC(l,i)),i}function oC(t,e){const i={},o=a(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);const l=a(t,["pageToken"]);return e!==void 0&&l!=null&&u(e,["_query","pageToken"],l),i}function sC(t){const e={},i=a(t,["config"]);return i!=null&&u(e,["config"],oC(i,e)),e}function sr(t){const e={},i=a(t,["name"]);i!=null&&u(e,["name"],i);const o=a(t,["displayName"]);o!=null&&u(e,["displayName"],o);const l=a(t,["model"]);l!=null&&u(e,["model"],l);const f=a(t,["createTime"]);f!=null&&u(e,["createTime"],f);const d=a(t,["updateTime"]);d!=null&&u(e,["updateTime"],d);const m=a(t,["expireTime"]);m!=null&&u(e,["expireTime"],m);const g=a(t,["usageMetadata"]);return g!=null&&u(e,["usageMetadata"],g),e}function lC(t){const e={},i=a(t,["sdkHttpResponse"]);return i!=null&&u(e,["sdkHttpResponse"],i),e}function rC(t){const e={},i=a(t,["sdkHttpResponse"]);i!=null&&u(e,["sdkHttpResponse"],i);const o=a(t,["nextPageToken"]);o!=null&&u(e,["nextPageToken"],o);const l=a(t,["cachedContents"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(d=>sr(d))),u(e,["cachedContents"],f)}return e}function lr(t){const e={},i=a(t,["name"]);i!=null&&u(e,["name"],i);const o=a(t,["displayName"]);o!=null&&u(e,["displayName"],o);const l=a(t,["model"]);l!=null&&u(e,["model"],l);const f=a(t,["createTime"]);f!=null&&u(e,["createTime"],f);const d=a(t,["updateTime"]);d!=null&&u(e,["updateTime"],d);const m=a(t,["expireTime"]);m!=null&&u(e,["expireTime"],m);const g=a(t,["usageMetadata"]);return g!=null&&u(e,["usageMetadata"],g),e}function aC(t){const e={},i=a(t,["sdkHttpResponse"]);return i!=null&&u(e,["sdkHttpResponse"],i),e}function uC(t){const e={},i=a(t,["sdkHttpResponse"]);i!=null&&u(e,["sdkHttpResponse"],i);const o=a(t,["nextPageToken"]);o!=null&&u(e,["nextPageToken"],o);const l=a(t,["cachedContents"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(d=>lr(d))),u(e,["cachedContents"],f)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cC extends pi{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new ks(hi.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(i),i)}async create(e){var i,o,l,f;let d,m="",g={};if(this.apiClient.isVertexAI()){const p=jS(this.apiClient,e);return m=W("cachedContents",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),d.then(v=>lr(v))}else{const p=AS(this.apiClient,e);return m=W("cachedContents",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),d.then(v=>sr(v))}}async get(e){var i,o,l,f;let d,m="",g={};if(this.apiClient.isVertexAI()){const p=eC(this.apiClient,e);return m=W("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),d.then(v=>lr(v))}else{const p=wS(this.apiClient,e);return m=W("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),d.then(v=>sr(v))}}async delete(e){var i,o,l,f;let d,m="",g={};if(this.apiClient.isVertexAI()){const p=tC(this.apiClient,e);return m=W("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const T=aC(v),S=new Im;return Object.assign(S,T),S})}else{const p=xS(this.apiClient,e);return m=W("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const T=lC(v),S=new Im;return Object.assign(S,T),S})}}async update(e){var i,o,l,f;let d,m="",g={};if(this.apiClient.isVertexAI()){const p=iC(this.apiClient,e);return m=W("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),d.then(v=>lr(v))}else{const p=bS(this.apiClient,e);return m=W("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),d.then(v=>sr(v))}}async listInternal(e){var i,o,l,f;let d,m="",g={};if(this.apiClient.isVertexAI()){const p=sC(e);return m=W("cachedContents",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const T=uC(v),S=new km;return Object.assign(S,T),S})}else{const p=NS(e);return m=W("cachedContents",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const T=rC(v),S=new km;return Object.assign(S,T),S})}}}function Om(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ke(t){return this instanceof ke?(this.v=t,this):new ke(t)}function vo(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=i.apply(t,e||[]),l,f=[];return l=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),m("next"),m("throw"),m("return",d),l[Symbol.asyncIterator]=function(){return this},l;function d(E){return function(b){return Promise.resolve(b).then(E,T)}}function m(E,b){o[E]&&(l[E]=function(N){return new Promise(function(L,q){f.push([E,N,L,q])>1||g(E,N)})},b&&(l[E]=b(l[E])))}function g(E,b){try{p(o[E](b))}catch(N){S(f[0][3],N)}}function p(E){E.value instanceof ke?Promise.resolve(E.value.v).then(v,T):S(f[0][2],E)}function v(E){g("next",E)}function T(E){g("throw",E)}function S(E,b){E(b),f.shift(),f.length&&g(f[0][0],f[0][1])}}function bs(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],i;return e?e.call(t):(t=typeof Om=="function"?Om(t):t[Symbol.iterator](),i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i);function o(f){i[f]=t[f]&&function(d){return new Promise(function(m,g){d=t[f](d),l(m,g,d.done,d.value)})}}function l(f,d,m,g){Promise.resolve(g).then(function(p){f({value:p,done:m})},d)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fC(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const i=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return i===void 0?!1:Fg(i)}function Fg(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function dC(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Hm(t){if(t===void 0||t.length===0)return[];const e=[],i=t.length;let o=0;for(;o<i;)if(t[o].role==="user")e.push(t[o]),o++;else{const l=[];let f=!0;for(;o<i&&t[o].role==="model";)l.push(t[o]),f&&!Fg(t[o])&&(f=!1),o++;f?e.push(...l):e.pop()}return e}class hC{constructor(e,i){this.modelsModule=e,this.apiClient=i}create(e){return new pC(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class pC{constructor(e,i,o,l={},f=[]){this.apiClient=e,this.modelsModule=i,this.model=o,this.config=l,this.history=f,this.sendPromise=Promise.resolve(),dC(f)}async sendMessage(e){var i;await this.sendPromise;const o=at(e.message),l=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(i=e.config)!==null&&i!==void 0?i:this.config});return this.sendPromise=(async()=>{var f,d,m;const g=await l,p=(d=(f=g.candidates)===null||f===void 0?void 0:f[0])===null||d===void 0?void 0:d.content,v=g.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let S=[];v!=null&&(S=(m=v.slice(T))!==null&&m!==void 0?m:[]);const E=p?[p]:[];this.recordHistory(o,E,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),l}async sendMessageStream(e){var i;await this.sendPromise;const o=at(e.message),l=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(i=e.config)!==null&&i!==void 0?i:this.config});this.sendPromise=l.then(()=>{}).catch(()=>{});const f=await l;return this.processStreamResponse(f,o)}getHistory(e=!1){const i=e?Hm(this.history):this.history;return structuredClone(i)}processStreamResponse(e,i){var o,l;return vo(this,arguments,function*(){var d,m,g,p;const v=[];try{for(var T=!0,S=bs(e),E;E=yield ke(S.next()),d=E.done,!d;T=!0){p=E.value,T=!1;const b=p;if(fC(b)){const N=(l=(o=b.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content;N!==void 0&&v.push(N)}yield yield ke(b)}}catch(b){m={error:b}}finally{try{!T&&!d&&(g=S.return)&&(yield ke(g.call(S)))}finally{if(m)throw m.error}}this.recordHistory(i,v)})}recordHistory(e,i,o){let l=[];i.length>0&&i.every(f=>f.role!==void 0)?l=i:l.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...Hm(o)):this.history.push(e),this.history.push(...l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pr extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,pr.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mC(t,e){const i={},o=a(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);const l=a(t,["pageToken"]);return e!==void 0&&l!=null&&u(e,["_query","pageToken"],l),i}function gC(t){const e={},i=a(t,["config"]);return i!=null&&u(e,["config"],mC(i,e)),e}function yC(t){const e={},i=a(t,["details"]);i!=null&&u(e,["details"],i);const o=a(t,["message"]);o!=null&&u(e,["message"],o);const l=a(t,["code"]);return l!=null&&u(e,["code"],l),e}function vC(t){const e={},i=a(t,["name"]);i!=null&&u(e,["name"],i);const o=a(t,["displayName"]);o!=null&&u(e,["displayName"],o);const l=a(t,["mimeType"]);l!=null&&u(e,["mimeType"],l);const f=a(t,["sizeBytes"]);f!=null&&u(e,["sizeBytes"],f);const d=a(t,["createTime"]);d!=null&&u(e,["createTime"],d);const m=a(t,["expirationTime"]);m!=null&&u(e,["expirationTime"],m);const g=a(t,["updateTime"]);g!=null&&u(e,["updateTime"],g);const p=a(t,["sha256Hash"]);p!=null&&u(e,["sha256Hash"],p);const v=a(t,["uri"]);v!=null&&u(e,["uri"],v);const T=a(t,["downloadUri"]);T!=null&&u(e,["downloadUri"],T);const S=a(t,["state"]);S!=null&&u(e,["state"],S);const E=a(t,["source"]);E!=null&&u(e,["source"],E);const b=a(t,["videoMetadata"]);b!=null&&u(e,["videoMetadata"],b);const N=a(t,["error"]);return N!=null&&u(e,["error"],yC(N)),e}function TC(t){const e={},i=a(t,["file"]);i!=null&&u(e,["file"],vC(i));const o=a(t,["config"]);return o!=null&&u(e,["config"],o),e}function _C(t){const e={},i=a(t,["name"]);i!=null&&u(e,["_url","file"],kg(i));const o=a(t,["config"]);return o!=null&&u(e,["config"],o),e}function SC(t){const e={},i=a(t,["name"]);i!=null&&u(e,["_url","file"],kg(i));const o=a(t,["config"]);return o!=null&&u(e,["config"],o),e}function CC(t){const e={},i=a(t,["details"]);i!=null&&u(e,["details"],i);const o=a(t,["message"]);o!=null&&u(e,["message"],o);const l=a(t,["code"]);return l!=null&&u(e,["code"],l),e}function nc(t){const e={},i=a(t,["name"]);i!=null&&u(e,["name"],i);const o=a(t,["displayName"]);o!=null&&u(e,["displayName"],o);const l=a(t,["mimeType"]);l!=null&&u(e,["mimeType"],l);const f=a(t,["sizeBytes"]);f!=null&&u(e,["sizeBytes"],f);const d=a(t,["createTime"]);d!=null&&u(e,["createTime"],d);const m=a(t,["expirationTime"]);m!=null&&u(e,["expirationTime"],m);const g=a(t,["updateTime"]);g!=null&&u(e,["updateTime"],g);const p=a(t,["sha256Hash"]);p!=null&&u(e,["sha256Hash"],p);const v=a(t,["uri"]);v!=null&&u(e,["uri"],v);const T=a(t,["downloadUri"]);T!=null&&u(e,["downloadUri"],T);const S=a(t,["state"]);S!=null&&u(e,["state"],S);const E=a(t,["source"]);E!=null&&u(e,["source"],E);const b=a(t,["videoMetadata"]);b!=null&&u(e,["videoMetadata"],b);const N=a(t,["error"]);return N!=null&&u(e,["error"],CC(N)),e}function EC(t){const e={},i=a(t,["sdkHttpResponse"]);i!=null&&u(e,["sdkHttpResponse"],i);const o=a(t,["nextPageToken"]);o!=null&&u(e,["nextPageToken"],o);const l=a(t,["files"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(d=>nc(d))),u(e,["files"],f)}return e}function AC(t){const e={},i=a(t,["sdkHttpResponse"]);return i!=null&&u(e,["sdkHttpResponse"],i),e}function wC(t){const e={},i=a(t,["sdkHttpResponse"]);return i!=null&&u(e,["sdkHttpResponse"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xC extends pi{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new ks(hi.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(i),i)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(i=>nc(i))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var i,o;let l,f="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=gC(e);return f=W("files",m._url),d=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>{const p=EC(g),v=new DT;return Object.assign(v,p),v})}}async createInternal(e){var i,o;let l,f="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=TC(e);return f=W("upload/v1beta/files",m._url),d=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>{const p=AC(g),v=new UT;return Object.assign(v,p),v})}}async get(e){var i,o;let l,f="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=_C(e);return f=W("files/{file}",m._url),d=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>nc(g))}}async delete(e){var i,o;let l,f="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=SC(e);return f=W("files/{file}",m._url),d=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>{const p=wC(g),v=new IT;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RC(t){const e={},i=a(t,["voiceName"]);return i!=null&&u(e,["voiceName"],i),e}function zg(t){const e={},i=a(t,["prebuiltVoiceConfig"]);return i!=null&&u(e,["prebuiltVoiceConfig"],RC(i)),e}function bC(t){const e={},i=a(t,["speaker"]);i!=null&&u(e,["speaker"],i);const o=a(t,["voiceConfig"]);return o!=null&&u(e,["voiceConfig"],zg(o)),e}function MC(t){const e={},i=a(t,["speakerVoiceConfigs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>bC(l))),u(e,["speakerVoiceConfigs"],o)}return e}function NC(t){const e={},i=a(t,["voiceConfig"]);i!=null&&u(e,["voiceConfig"],zg(i));const o=a(t,["multiSpeakerVoiceConfig"]);o!=null&&u(e,["multiSpeakerVoiceConfig"],MC(o));const l=a(t,["languageCode"]);return l!=null&&u(e,["languageCode"],l),e}function DC(t){const e={},i=a(t,["fps"]);i!=null&&u(e,["fps"],i);const o=a(t,["endOffset"]);o!=null&&u(e,["endOffset"],o);const l=a(t,["startOffset"]);return l!=null&&u(e,["startOffset"],l),e}function UC(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["data"]);i!=null&&u(e,["data"],i);const o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function IC(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["fileUri"]);i!=null&&u(e,["fileUri"],i);const o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function kC(t){const e={},i=a(t,["id"]);i!=null&&u(e,["id"],i);const o=a(t,["args"]);o!=null&&u(e,["args"],o);const l=a(t,["name"]);return l!=null&&u(e,["name"],l),e}function PC(t){const e={},i=a(t,["videoMetadata"]);i!=null&&u(e,["videoMetadata"],DC(i));const o=a(t,["thought"]);o!=null&&u(e,["thought"],o);const l=a(t,["inlineData"]);l!=null&&u(e,["inlineData"],UC(l));const f=a(t,["fileData"]);f!=null&&u(e,["fileData"],IC(f));const d=a(t,["thoughtSignature"]);d!=null&&u(e,["thoughtSignature"],d);const m=a(t,["functionCall"]);m!=null&&u(e,["functionCall"],kC(m));const g=a(t,["codeExecutionResult"]);g!=null&&u(e,["codeExecutionResult"],g);const p=a(t,["executableCode"]);p!=null&&u(e,["executableCode"],p);const v=a(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const T=a(t,["text"]);return T!=null&&u(e,["text"],T),e}function LC(t){const e={},i=a(t,["parts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(f=>PC(f))),u(e,["parts"],l)}const o=a(t,["role"]);return o!=null&&u(e,["role"],o),e}function qC(t){const e={},i=a(t,["behavior"]);i!=null&&u(e,["behavior"],i);const o=a(t,["description"]);o!=null&&u(e,["description"],o);const l=a(t,["name"]);l!=null&&u(e,["name"],l);const f=a(t,["parameters"]);f!=null&&u(e,["parameters"],f);const d=a(t,["parametersJsonSchema"]);d!=null&&u(e,["parametersJsonSchema"],d);const m=a(t,["response"]);m!=null&&u(e,["response"],m);const g=a(t,["responseJsonSchema"]);return g!=null&&u(e,["responseJsonSchema"],g),e}function VC(t){const e={},i=a(t,["startTime"]);i!=null&&u(e,["startTime"],i);const o=a(t,["endTime"]);return o!=null&&u(e,["endTime"],o),e}function BC(t){const e={},i=a(t,["timeRangeFilter"]);if(i!=null&&u(e,["timeRangeFilter"],VC(i)),a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function GC(t){const e={},i=a(t,["mode"]);i!=null&&u(e,["mode"],i);const o=a(t,["dynamicThreshold"]);return o!=null&&u(e,["dynamicThreshold"],o),e}function OC(t){const e={},i=a(t,["dynamicRetrievalConfig"]);return i!=null&&u(e,["dynamicRetrievalConfig"],GC(i)),e}function HC(){return{}}function FC(t){const e={},i=a(t,["environment"]);return i!=null&&u(e,["environment"],i),e}function zC(t){const e={},i=a(t,["functionDeclarations"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(p=>qC(p))),u(e,["functionDeclarations"],g)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=a(t,["googleSearch"]);o!=null&&u(e,["googleSearch"],BC(o));const l=a(t,["googleSearchRetrieval"]);if(l!=null&&u(e,["googleSearchRetrieval"],OC(l)),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(a(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");a(t,["urlContext"])!=null&&u(e,["urlContext"],HC());const d=a(t,["computerUse"]);d!=null&&u(e,["computerUse"],FC(d));const m=a(t,["codeExecution"]);return m!=null&&u(e,["codeExecution"],m),e}function $C(t){const e={},i=a(t,["handle"]);if(i!=null&&u(e,["handle"],i),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Fm(){return{}}function JC(t){const e={},i=a(t,["disabled"]);i!=null&&u(e,["disabled"],i);const o=a(t,["startOfSpeechSensitivity"]);o!=null&&u(e,["startOfSpeechSensitivity"],o);const l=a(t,["endOfSpeechSensitivity"]);l!=null&&u(e,["endOfSpeechSensitivity"],l);const f=a(t,["prefixPaddingMs"]);f!=null&&u(e,["prefixPaddingMs"],f);const d=a(t,["silenceDurationMs"]);return d!=null&&u(e,["silenceDurationMs"],d),e}function YC(t){const e={},i=a(t,["automaticActivityDetection"]);i!=null&&u(e,["automaticActivityDetection"],JC(i));const o=a(t,["activityHandling"]);o!=null&&u(e,["activityHandling"],o);const l=a(t,["turnCoverage"]);return l!=null&&u(e,["turnCoverage"],l),e}function KC(t){const e={},i=a(t,["targetTokens"]);return i!=null&&u(e,["targetTokens"],i),e}function XC(t){const e={},i=a(t,["triggerTokens"]);i!=null&&u(e,["triggerTokens"],i);const o=a(t,["slidingWindow"]);return o!=null&&u(e,["slidingWindow"],KC(o)),e}function QC(t){const e={},i=a(t,["proactiveAudio"]);return i!=null&&u(e,["proactiveAudio"],i),e}function ZC(t,e){const i={},o=a(t,["generationConfig"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig"],o);const l=a(t,["responseModalities"]);e!==void 0&&l!=null&&u(e,["setup","generationConfig","responseModalities"],l);const f=a(t,["temperature"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","temperature"],f);const d=a(t,["topP"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","topP"],d);const m=a(t,["topK"]);e!==void 0&&m!=null&&u(e,["setup","generationConfig","topK"],m);const g=a(t,["maxOutputTokens"]);e!==void 0&&g!=null&&u(e,["setup","generationConfig","maxOutputTokens"],g);const p=a(t,["mediaResolution"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","mediaResolution"],p);const v=a(t,["seed"]);e!==void 0&&v!=null&&u(e,["setup","generationConfig","seed"],v);const T=a(t,["speechConfig"]);e!==void 0&&T!=null&&u(e,["setup","generationConfig","speechConfig"],NC(xc(T)));const S=a(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],S);const E=a(t,["systemInstruction"]);e!==void 0&&E!=null&&u(e,["setup","systemInstruction"],LC(at(E)));const b=a(t,["tools"]);if(e!==void 0&&b!=null){let z=Eo(b);Array.isArray(z)&&(z=z.map(Y=>zC(Co(Y)))),u(e,["setup","tools"],z)}const N=a(t,["sessionResumption"]);e!==void 0&&N!=null&&u(e,["setup","sessionResumption"],$C(N));const L=a(t,["inputAudioTranscription"]);e!==void 0&&L!=null&&u(e,["setup","inputAudioTranscription"],Fm());const q=a(t,["outputAudioTranscription"]);e!==void 0&&q!=null&&u(e,["setup","outputAudioTranscription"],Fm());const V=a(t,["realtimeInputConfig"]);e!==void 0&&V!=null&&u(e,["setup","realtimeInputConfig"],YC(V));const U=a(t,["contextWindowCompression"]);e!==void 0&&U!=null&&u(e,["setup","contextWindowCompression"],XC(U));const $=a(t,["proactivity"]);return e!==void 0&&$!=null&&u(e,["setup","proactivity"],QC($)),i}function WC(t,e){const i={},o=a(e,["model"]);o!=null&&u(i,["setup","model"],Ee(t,o));const l=a(e,["config"]);return l!=null&&u(i,["config"],ZC(l,i)),i}function jC(){return{}}function eE(){return{}}function tE(t){const e={},i=a(t,["media"]);i!=null&&u(e,["mediaChunks"],Mg(i));const o=a(t,["audio"]);o!=null&&u(e,["audio"],Dg(o));const l=a(t,["audioStreamEnd"]);l!=null&&u(e,["audioStreamEnd"],l);const f=a(t,["video"]);f!=null&&u(e,["video"],Ng(f));const d=a(t,["text"]);return d!=null&&u(e,["text"],d),a(t,["activityStart"])!=null&&u(e,["activityStart"],jC()),a(t,["activityEnd"])!=null&&u(e,["activityEnd"],eE()),e}function $g(t){const e={},i=a(t,["text"]);i!=null&&u(e,["text"],i);const o=a(t,["weight"]);return o!=null&&u(e,["weight"],o),e}function nE(t){const e={},i=a(t,["weightedPrompts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>$g(l))),u(e,["weightedPrompts"],o)}return e}function Jg(t){const e={},i=a(t,["temperature"]);i!=null&&u(e,["temperature"],i);const o=a(t,["topK"]);o!=null&&u(e,["topK"],o);const l=a(t,["seed"]);l!=null&&u(e,["seed"],l);const f=a(t,["guidance"]);f!=null&&u(e,["guidance"],f);const d=a(t,["bpm"]);d!=null&&u(e,["bpm"],d);const m=a(t,["density"]);m!=null&&u(e,["density"],m);const g=a(t,["brightness"]);g!=null&&u(e,["brightness"],g);const p=a(t,["scale"]);p!=null&&u(e,["scale"],p);const v=a(t,["muteBass"]);v!=null&&u(e,["muteBass"],v);const T=a(t,["muteDrums"]);T!=null&&u(e,["muteDrums"],T);const S=a(t,["onlyBassAndDrums"]);S!=null&&u(e,["onlyBassAndDrums"],S);const E=a(t,["musicGenerationMode"]);return E!=null&&u(e,["musicGenerationMode"],E),e}function iE(t){const e={},i=a(t,["musicGenerationConfig"]);return i!=null&&u(e,["musicGenerationConfig"],Jg(i)),e}function Yg(t){const e={},i=a(t,["model"]);return i!=null&&u(e,["model"],i),e}function Kg(t){const e={},i=a(t,["weightedPrompts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>$g(l))),u(e,["weightedPrompts"],o)}return e}function ic(t){const e={},i=a(t,["setup"]);i!=null&&u(e,["setup"],Yg(i));const o=a(t,["clientContent"]);o!=null&&u(e,["clientContent"],Kg(o));const l=a(t,["musicGenerationConfig"]);l!=null&&u(e,["musicGenerationConfig"],Jg(l));const f=a(t,["playbackControl"]);return f!=null&&u(e,["playbackControl"],f),e}function oE(t){const e={},i=a(t,["voiceName"]);return i!=null&&u(e,["voiceName"],i),e}function sE(t){const e={},i=a(t,["prebuiltVoiceConfig"]);return i!=null&&u(e,["prebuiltVoiceConfig"],oE(i)),e}function lE(t){const e={},i=a(t,["voiceConfig"]);if(i!=null&&u(e,["voiceConfig"],sE(i)),a(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=a(t,["languageCode"]);return o!=null&&u(e,["languageCode"],o),e}function rE(t){const e={},i=a(t,["fps"]);i!=null&&u(e,["fps"],i);const o=a(t,["endOffset"]);o!=null&&u(e,["endOffset"],o);const l=a(t,["startOffset"]);return l!=null&&u(e,["startOffset"],l),e}function aE(t){const e={},i=a(t,["displayName"]);i!=null&&u(e,["displayName"],i);const o=a(t,["data"]);o!=null&&u(e,["data"],o);const l=a(t,["mimeType"]);return l!=null&&u(e,["mimeType"],l),e}function uE(t){const e={},i=a(t,["displayName"]);i!=null&&u(e,["displayName"],i);const o=a(t,["fileUri"]);o!=null&&u(e,["fileUri"],o);const l=a(t,["mimeType"]);return l!=null&&u(e,["mimeType"],l),e}function cE(t){const e={},i=a(t,["id"]);i!=null&&u(e,["id"],i);const o=a(t,["args"]);o!=null&&u(e,["args"],o);const l=a(t,["name"]);return l!=null&&u(e,["name"],l),e}function fE(t){const e={},i=a(t,["videoMetadata"]);i!=null&&u(e,["videoMetadata"],rE(i));const o=a(t,["thought"]);o!=null&&u(e,["thought"],o);const l=a(t,["inlineData"]);l!=null&&u(e,["inlineData"],aE(l));const f=a(t,["fileData"]);f!=null&&u(e,["fileData"],uE(f));const d=a(t,["thoughtSignature"]);d!=null&&u(e,["thoughtSignature"],d);const m=a(t,["functionCall"]);m!=null&&u(e,["functionCall"],cE(m));const g=a(t,["codeExecutionResult"]);g!=null&&u(e,["codeExecutionResult"],g);const p=a(t,["executableCode"]);p!=null&&u(e,["executableCode"],p);const v=a(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const T=a(t,["text"]);return T!=null&&u(e,["text"],T),e}function dE(t){const e={},i=a(t,["parts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(f=>fE(f))),u(e,["parts"],l)}const o=a(t,["role"]);return o!=null&&u(e,["role"],o),e}function hE(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=a(t,["description"]);i!=null&&u(e,["description"],i);const o=a(t,["name"]);o!=null&&u(e,["name"],o);const l=a(t,["parameters"]);l!=null&&u(e,["parameters"],l);const f=a(t,["parametersJsonSchema"]);f!=null&&u(e,["parametersJsonSchema"],f);const d=a(t,["response"]);d!=null&&u(e,["response"],d);const m=a(t,["responseJsonSchema"]);return m!=null&&u(e,["responseJsonSchema"],m),e}function pE(t){const e={},i=a(t,["startTime"]);i!=null&&u(e,["startTime"],i);const o=a(t,["endTime"]);return o!=null&&u(e,["endTime"],o),e}function mE(t){const e={},i=a(t,["timeRangeFilter"]);i!=null&&u(e,["timeRangeFilter"],pE(i));const o=a(t,["excludeDomains"]);return o!=null&&u(e,["excludeDomains"],o),e}function gE(t){const e={},i=a(t,["mode"]);i!=null&&u(e,["mode"],i);const o=a(t,["dynamicThreshold"]);return o!=null&&u(e,["dynamicThreshold"],o),e}function yE(t){const e={},i=a(t,["dynamicRetrievalConfig"]);return i!=null&&u(e,["dynamicRetrievalConfig"],gE(i)),e}function vE(t){const e={},i=a(t,["excludeDomains"]);return i!=null&&u(e,["excludeDomains"],i),e}function TE(t){const e={},i=a(t,["apiKeyString"]);return i!=null&&u(e,["apiKeyString"],i),e}function _E(t){const e={},i=a(t,["apiKeyConfig"]);i!=null&&u(e,["apiKeyConfig"],TE(i));const o=a(t,["authType"]);o!=null&&u(e,["authType"],o);const l=a(t,["googleServiceAccountConfig"]);l!=null&&u(e,["googleServiceAccountConfig"],l);const f=a(t,["httpBasicAuthConfig"]);f!=null&&u(e,["httpBasicAuthConfig"],f);const d=a(t,["oauthConfig"]);d!=null&&u(e,["oauthConfig"],d);const m=a(t,["oidcConfig"]);return m!=null&&u(e,["oidcConfig"],m),e}function SE(t){const e={},i=a(t,["authConfig"]);return i!=null&&u(e,["authConfig"],_E(i)),e}function CE(){return{}}function EE(t){const e={},i=a(t,["environment"]);return i!=null&&u(e,["environment"],i),e}function AE(t){const e={},i=a(t,["functionDeclarations"]);if(i!=null){let T=i;Array.isArray(T)&&(T=T.map(S=>hE(S))),u(e,["functionDeclarations"],T)}const o=a(t,["retrieval"]);o!=null&&u(e,["retrieval"],o);const l=a(t,["googleSearch"]);l!=null&&u(e,["googleSearch"],mE(l));const f=a(t,["googleSearchRetrieval"]);f!=null&&u(e,["googleSearchRetrieval"],yE(f));const d=a(t,["enterpriseWebSearch"]);d!=null&&u(e,["enterpriseWebSearch"],vE(d));const m=a(t,["googleMaps"]);m!=null&&u(e,["googleMaps"],SE(m)),a(t,["urlContext"])!=null&&u(e,["urlContext"],CE());const p=a(t,["computerUse"]);p!=null&&u(e,["computerUse"],EE(p));const v=a(t,["codeExecution"]);return v!=null&&u(e,["codeExecution"],v),e}function wE(t){const e={},i=a(t,["handle"]);i!=null&&u(e,["handle"],i);const o=a(t,["transparent"]);return o!=null&&u(e,["transparent"],o),e}function zm(){return{}}function xE(t){const e={},i=a(t,["disabled"]);i!=null&&u(e,["disabled"],i);const o=a(t,["startOfSpeechSensitivity"]);o!=null&&u(e,["startOfSpeechSensitivity"],o);const l=a(t,["endOfSpeechSensitivity"]);l!=null&&u(e,["endOfSpeechSensitivity"],l);const f=a(t,["prefixPaddingMs"]);f!=null&&u(e,["prefixPaddingMs"],f);const d=a(t,["silenceDurationMs"]);return d!=null&&u(e,["silenceDurationMs"],d),e}function RE(t){const e={},i=a(t,["automaticActivityDetection"]);i!=null&&u(e,["automaticActivityDetection"],xE(i));const o=a(t,["activityHandling"]);o!=null&&u(e,["activityHandling"],o);const l=a(t,["turnCoverage"]);return l!=null&&u(e,["turnCoverage"],l),e}function bE(t){const e={},i=a(t,["targetTokens"]);return i!=null&&u(e,["targetTokens"],i),e}function ME(t){const e={},i=a(t,["triggerTokens"]);i!=null&&u(e,["triggerTokens"],i);const o=a(t,["slidingWindow"]);return o!=null&&u(e,["slidingWindow"],bE(o)),e}function NE(t){const e={},i=a(t,["proactiveAudio"]);return i!=null&&u(e,["proactiveAudio"],i),e}function DE(t,e){const i={},o=a(t,["generationConfig"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig"],o);const l=a(t,["responseModalities"]);e!==void 0&&l!=null&&u(e,["setup","generationConfig","responseModalities"],l);const f=a(t,["temperature"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","temperature"],f);const d=a(t,["topP"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","topP"],d);const m=a(t,["topK"]);e!==void 0&&m!=null&&u(e,["setup","generationConfig","topK"],m);const g=a(t,["maxOutputTokens"]);e!==void 0&&g!=null&&u(e,["setup","generationConfig","maxOutputTokens"],g);const p=a(t,["mediaResolution"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","mediaResolution"],p);const v=a(t,["seed"]);e!==void 0&&v!=null&&u(e,["setup","generationConfig","seed"],v);const T=a(t,["speechConfig"]);e!==void 0&&T!=null&&u(e,["setup","generationConfig","speechConfig"],lE(xc(T)));const S=a(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],S);const E=a(t,["systemInstruction"]);e!==void 0&&E!=null&&u(e,["setup","systemInstruction"],dE(at(E)));const b=a(t,["tools"]);if(e!==void 0&&b!=null){let z=Eo(b);Array.isArray(z)&&(z=z.map(Y=>AE(Co(Y)))),u(e,["setup","tools"],z)}const N=a(t,["sessionResumption"]);e!==void 0&&N!=null&&u(e,["setup","sessionResumption"],wE(N));const L=a(t,["inputAudioTranscription"]);e!==void 0&&L!=null&&u(e,["setup","inputAudioTranscription"],zm());const q=a(t,["outputAudioTranscription"]);e!==void 0&&q!=null&&u(e,["setup","outputAudioTranscription"],zm());const V=a(t,["realtimeInputConfig"]);e!==void 0&&V!=null&&u(e,["setup","realtimeInputConfig"],RE(V));const U=a(t,["contextWindowCompression"]);e!==void 0&&U!=null&&u(e,["setup","contextWindowCompression"],ME(U));const $=a(t,["proactivity"]);return e!==void 0&&$!=null&&u(e,["setup","proactivity"],NE($)),i}function UE(t,e){const i={},o=a(e,["model"]);o!=null&&u(i,["setup","model"],Ee(t,o));const l=a(e,["config"]);return l!=null&&u(i,["config"],DE(l,i)),i}function IE(){return{}}function kE(){return{}}function PE(t){const e={},i=a(t,["media"]);i!=null&&u(e,["mediaChunks"],Mg(i));const o=a(t,["audio"]);o!=null&&u(e,["audio"],Dg(o));const l=a(t,["audioStreamEnd"]);l!=null&&u(e,["audioStreamEnd"],l);const f=a(t,["video"]);f!=null&&u(e,["video"],Ng(f));const d=a(t,["text"]);return d!=null&&u(e,["text"],d),a(t,["activityStart"])!=null&&u(e,["activityStart"],IE()),a(t,["activityEnd"])!=null&&u(e,["activityEnd"],kE()),e}function LE(){return{}}function qE(t){const e={},i=a(t,["fps"]);i!=null&&u(e,["fps"],i);const o=a(t,["endOffset"]);o!=null&&u(e,["endOffset"],o);const l=a(t,["startOffset"]);return l!=null&&u(e,["startOffset"],l),e}function VE(t){const e={},i=a(t,["data"]);i!=null&&u(e,["data"],i);const o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function BE(t){const e={},i=a(t,["fileUri"]);i!=null&&u(e,["fileUri"],i);const o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function Xg(t){const e={},i=a(t,["id"]);i!=null&&u(e,["id"],i);const o=a(t,["args"]);o!=null&&u(e,["args"],o);const l=a(t,["name"]);return l!=null&&u(e,["name"],l),e}function GE(t){const e={},i=a(t,["videoMetadata"]);i!=null&&u(e,["videoMetadata"],qE(i));const o=a(t,["thought"]);o!=null&&u(e,["thought"],o);const l=a(t,["inlineData"]);l!=null&&u(e,["inlineData"],VE(l));const f=a(t,["fileData"]);f!=null&&u(e,["fileData"],BE(f));const d=a(t,["thoughtSignature"]);d!=null&&u(e,["thoughtSignature"],d);const m=a(t,["functionCall"]);m!=null&&u(e,["functionCall"],Xg(m));const g=a(t,["codeExecutionResult"]);g!=null&&u(e,["codeExecutionResult"],g);const p=a(t,["executableCode"]);p!=null&&u(e,["executableCode"],p);const v=a(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const T=a(t,["text"]);return T!=null&&u(e,["text"],T),e}function OE(t){const e={},i=a(t,["parts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(f=>GE(f))),u(e,["parts"],l)}const o=a(t,["role"]);return o!=null&&u(e,["role"],o),e}function $m(t){const e={},i=a(t,["text"]);i!=null&&u(e,["text"],i);const o=a(t,["finished"]);return o!=null&&u(e,["finished"],o),e}function HE(t){const e={},i=a(t,["retrievedUrl"]);i!=null&&u(e,["retrievedUrl"],i);const o=a(t,["urlRetrievalStatus"]);return o!=null&&u(e,["urlRetrievalStatus"],o),e}function FE(t){const e={},i=a(t,["urlMetadata"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>HE(l))),u(e,["urlMetadata"],o)}return e}function zE(t){const e={},i=a(t,["modelTurn"]);i!=null&&u(e,["modelTurn"],OE(i));const o=a(t,["turnComplete"]);o!=null&&u(e,["turnComplete"],o);const l=a(t,["interrupted"]);l!=null&&u(e,["interrupted"],l);const f=a(t,["groundingMetadata"]);f!=null&&u(e,["groundingMetadata"],f);const d=a(t,["generationComplete"]);d!=null&&u(e,["generationComplete"],d);const m=a(t,["inputTranscription"]);m!=null&&u(e,["inputTranscription"],$m(m));const g=a(t,["outputTranscription"]);g!=null&&u(e,["outputTranscription"],$m(g));const p=a(t,["urlContextMetadata"]);p!=null&&u(e,["urlContextMetadata"],FE(p));const v=a(t,["turnCompleteReason"]);v!=null&&u(e,["turnCompleteReason"],v);const T=a(t,["waitingForInput"]);return T!=null&&u(e,["waitingForInput"],T),e}function $E(t){const e={},i=a(t,["functionCalls"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>Xg(l))),u(e,["functionCalls"],o)}return e}function JE(t){const e={},i=a(t,["ids"]);return i!=null&&u(e,["ids"],i),e}function Wl(t){const e={},i=a(t,["modality"]);i!=null&&u(e,["modality"],i);const o=a(t,["tokenCount"]);return o!=null&&u(e,["tokenCount"],o),e}function YE(t){const e={},i=a(t,["promptTokenCount"]);i!=null&&u(e,["promptTokenCount"],i);const o=a(t,["cachedContentTokenCount"]);o!=null&&u(e,["cachedContentTokenCount"],o);const l=a(t,["responseTokenCount"]);l!=null&&u(e,["responseTokenCount"],l);const f=a(t,["toolUsePromptTokenCount"]);f!=null&&u(e,["toolUsePromptTokenCount"],f);const d=a(t,["thoughtsTokenCount"]);d!=null&&u(e,["thoughtsTokenCount"],d);const m=a(t,["totalTokenCount"]);m!=null&&u(e,["totalTokenCount"],m);const g=a(t,["promptTokensDetails"]);if(g!=null){let S=g;Array.isArray(S)&&(S=S.map(E=>Wl(E))),u(e,["promptTokensDetails"],S)}const p=a(t,["cacheTokensDetails"]);if(p!=null){let S=p;Array.isArray(S)&&(S=S.map(E=>Wl(E))),u(e,["cacheTokensDetails"],S)}const v=a(t,["responseTokensDetails"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(E=>Wl(E))),u(e,["responseTokensDetails"],S)}const T=a(t,["toolUsePromptTokensDetails"]);if(T!=null){let S=T;Array.isArray(S)&&(S=S.map(E=>Wl(E))),u(e,["toolUsePromptTokensDetails"],S)}return e}function KE(t){const e={},i=a(t,["timeLeft"]);return i!=null&&u(e,["timeLeft"],i),e}function XE(t){const e={},i=a(t,["newHandle"]);i!=null&&u(e,["newHandle"],i);const o=a(t,["resumable"]);o!=null&&u(e,["resumable"],o);const l=a(t,["lastConsumedClientMessageIndex"]);return l!=null&&u(e,["lastConsumedClientMessageIndex"],l),e}function QE(t){const e={};a(t,["setupComplete"])!=null&&u(e,["setupComplete"],LE());const o=a(t,["serverContent"]);o!=null&&u(e,["serverContent"],zE(o));const l=a(t,["toolCall"]);l!=null&&u(e,["toolCall"],$E(l));const f=a(t,["toolCallCancellation"]);f!=null&&u(e,["toolCallCancellation"],JE(f));const d=a(t,["usageMetadata"]);d!=null&&u(e,["usageMetadata"],YE(d));const m=a(t,["goAway"]);m!=null&&u(e,["goAway"],KE(m));const g=a(t,["sessionResumptionUpdate"]);return g!=null&&u(e,["sessionResumptionUpdate"],XE(g)),e}function ZE(){return{}}function WE(t){const e={},i=a(t,["text"]);i!=null&&u(e,["text"],i);const o=a(t,["weight"]);return o!=null&&u(e,["weight"],o),e}function jE(t){const e={},i=a(t,["weightedPrompts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>WE(l))),u(e,["weightedPrompts"],o)}return e}function eA(t){const e={},i=a(t,["temperature"]);i!=null&&u(e,["temperature"],i);const o=a(t,["topK"]);o!=null&&u(e,["topK"],o);const l=a(t,["seed"]);l!=null&&u(e,["seed"],l);const f=a(t,["guidance"]);f!=null&&u(e,["guidance"],f);const d=a(t,["bpm"]);d!=null&&u(e,["bpm"],d);const m=a(t,["density"]);m!=null&&u(e,["density"],m);const g=a(t,["brightness"]);g!=null&&u(e,["brightness"],g);const p=a(t,["scale"]);p!=null&&u(e,["scale"],p);const v=a(t,["muteBass"]);v!=null&&u(e,["muteBass"],v);const T=a(t,["muteDrums"]);T!=null&&u(e,["muteDrums"],T);const S=a(t,["onlyBassAndDrums"]);S!=null&&u(e,["onlyBassAndDrums"],S);const E=a(t,["musicGenerationMode"]);return E!=null&&u(e,["musicGenerationMode"],E),e}function tA(t){const e={},i=a(t,["clientContent"]);i!=null&&u(e,["clientContent"],jE(i));const o=a(t,["musicGenerationConfig"]);return o!=null&&u(e,["musicGenerationConfig"],eA(o)),e}function nA(t){const e={},i=a(t,["data"]);i!=null&&u(e,["data"],i);const o=a(t,["mimeType"]);o!=null&&u(e,["mimeType"],o);const l=a(t,["sourceMetadata"]);return l!=null&&u(e,["sourceMetadata"],tA(l)),e}function iA(t){const e={},i=a(t,["audioChunks"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>nA(l))),u(e,["audioChunks"],o)}return e}function oA(t){const e={},i=a(t,["text"]);i!=null&&u(e,["text"],i);const o=a(t,["filteredReason"]);return o!=null&&u(e,["filteredReason"],o),e}function sA(t){const e={};a(t,["setupComplete"])!=null&&u(e,["setupComplete"],ZE());const o=a(t,["serverContent"]);o!=null&&u(e,["serverContent"],iA(o));const l=a(t,["filteredPrompt"]);return l!=null&&u(e,["filteredPrompt"],oA(l)),e}function lA(t){const e={},i=a(t,["sessionId"]);return i!=null&&u(e,["sessionId"],i),e}function rA(t){const e={},i=a(t,["fps"]);i!=null&&u(e,["fps"],i);const o=a(t,["endOffset"]);o!=null&&u(e,["endOffset"],o);const l=a(t,["startOffset"]);return l!=null&&u(e,["startOffset"],l),e}function aA(t){const e={},i=a(t,["displayName"]);i!=null&&u(e,["displayName"],i);const o=a(t,["data"]);o!=null&&u(e,["data"],o);const l=a(t,["mimeType"]);return l!=null&&u(e,["mimeType"],l),e}function uA(t){const e={},i=a(t,["displayName"]);i!=null&&u(e,["displayName"],i);const o=a(t,["fileUri"]);o!=null&&u(e,["fileUri"],o);const l=a(t,["mimeType"]);return l!=null&&u(e,["mimeType"],l),e}function Qg(t){const e={},i=a(t,["id"]);i!=null&&u(e,["id"],i);const o=a(t,["args"]);o!=null&&u(e,["args"],o);const l=a(t,["name"]);return l!=null&&u(e,["name"],l),e}function cA(t){const e={},i=a(t,["videoMetadata"]);i!=null&&u(e,["videoMetadata"],rA(i));const o=a(t,["thought"]);o!=null&&u(e,["thought"],o);const l=a(t,["inlineData"]);l!=null&&u(e,["inlineData"],aA(l));const f=a(t,["fileData"]);f!=null&&u(e,["fileData"],uA(f));const d=a(t,["thoughtSignature"]);d!=null&&u(e,["thoughtSignature"],d);const m=a(t,["functionCall"]);m!=null&&u(e,["functionCall"],Qg(m));const g=a(t,["codeExecutionResult"]);g!=null&&u(e,["codeExecutionResult"],g);const p=a(t,["executableCode"]);p!=null&&u(e,["executableCode"],p);const v=a(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const T=a(t,["text"]);return T!=null&&u(e,["text"],T),e}function fA(t){const e={},i=a(t,["parts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(f=>cA(f))),u(e,["parts"],l)}const o=a(t,["role"]);return o!=null&&u(e,["role"],o),e}function Jm(t){const e={},i=a(t,["text"]);i!=null&&u(e,["text"],i);const o=a(t,["finished"]);return o!=null&&u(e,["finished"],o),e}function dA(t){const e={},i=a(t,["modelTurn"]);i!=null&&u(e,["modelTurn"],fA(i));const o=a(t,["turnComplete"]);o!=null&&u(e,["turnComplete"],o);const l=a(t,["interrupted"]);l!=null&&u(e,["interrupted"],l);const f=a(t,["groundingMetadata"]);f!=null&&u(e,["groundingMetadata"],f);const d=a(t,["generationComplete"]);d!=null&&u(e,["generationComplete"],d);const m=a(t,["inputTranscription"]);m!=null&&u(e,["inputTranscription"],Jm(m));const g=a(t,["outputTranscription"]);g!=null&&u(e,["outputTranscription"],Jm(g));const p=a(t,["turnCompleteReason"]);p!=null&&u(e,["turnCompleteReason"],p);const v=a(t,["waitingForInput"]);return v!=null&&u(e,["waitingForInput"],v),e}function hA(t){const e={},i=a(t,["functionCalls"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>Qg(l))),u(e,["functionCalls"],o)}return e}function pA(t){const e={},i=a(t,["ids"]);return i!=null&&u(e,["ids"],i),e}function jl(t){const e={},i=a(t,["modality"]);i!=null&&u(e,["modality"],i);const o=a(t,["tokenCount"]);return o!=null&&u(e,["tokenCount"],o),e}function mA(t){const e={},i=a(t,["promptTokenCount"]);i!=null&&u(e,["promptTokenCount"],i);const o=a(t,["cachedContentTokenCount"]);o!=null&&u(e,["cachedContentTokenCount"],o);const l=a(t,["candidatesTokenCount"]);l!=null&&u(e,["responseTokenCount"],l);const f=a(t,["toolUsePromptTokenCount"]);f!=null&&u(e,["toolUsePromptTokenCount"],f);const d=a(t,["thoughtsTokenCount"]);d!=null&&u(e,["thoughtsTokenCount"],d);const m=a(t,["totalTokenCount"]);m!=null&&u(e,["totalTokenCount"],m);const g=a(t,["promptTokensDetails"]);if(g!=null){let E=g;Array.isArray(E)&&(E=E.map(b=>jl(b))),u(e,["promptTokensDetails"],E)}const p=a(t,["cacheTokensDetails"]);if(p!=null){let E=p;Array.isArray(E)&&(E=E.map(b=>jl(b))),u(e,["cacheTokensDetails"],E)}const v=a(t,["candidatesTokensDetails"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(b=>jl(b))),u(e,["responseTokensDetails"],E)}const T=a(t,["toolUsePromptTokensDetails"]);if(T!=null){let E=T;Array.isArray(E)&&(E=E.map(b=>jl(b))),u(e,["toolUsePromptTokensDetails"],E)}const S=a(t,["trafficType"]);return S!=null&&u(e,["trafficType"],S),e}function gA(t){const e={},i=a(t,["timeLeft"]);return i!=null&&u(e,["timeLeft"],i),e}function yA(t){const e={},i=a(t,["newHandle"]);i!=null&&u(e,["newHandle"],i);const o=a(t,["resumable"]);o!=null&&u(e,["resumable"],o);const l=a(t,["lastConsumedClientMessageIndex"]);return l!=null&&u(e,["lastConsumedClientMessageIndex"],l),e}function vA(t){const e={},i=a(t,["setupComplete"]);i!=null&&u(e,["setupComplete"],lA(i));const o=a(t,["serverContent"]);o!=null&&u(e,["serverContent"],dA(o));const l=a(t,["toolCall"]);l!=null&&u(e,["toolCall"],hA(l));const f=a(t,["toolCallCancellation"]);f!=null&&u(e,["toolCallCancellation"],pA(f));const d=a(t,["usageMetadata"]);d!=null&&u(e,["usageMetadata"],mA(d));const m=a(t,["goAway"]);m!=null&&u(e,["goAway"],gA(m));const g=a(t,["sessionResumptionUpdate"]);return g!=null&&u(e,["sessionResumptionUpdate"],yA(g)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TA(t){const e={},i=a(t,["fps"]);i!=null&&u(e,["fps"],i);const o=a(t,["endOffset"]);o!=null&&u(e,["endOffset"],o);const l=a(t,["startOffset"]);return l!=null&&u(e,["startOffset"],l),e}function _A(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["data"]);i!=null&&u(e,["data"],i);const o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function SA(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["fileUri"]);i!=null&&u(e,["fileUri"],i);const o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function CA(t){const e={},i=a(t,["id"]);i!=null&&u(e,["id"],i);const o=a(t,["args"]);o!=null&&u(e,["args"],o);const l=a(t,["name"]);return l!=null&&u(e,["name"],l),e}function EA(t){const e={},i=a(t,["videoMetadata"]);i!=null&&u(e,["videoMetadata"],TA(i));const o=a(t,["thought"]);o!=null&&u(e,["thought"],o);const l=a(t,["inlineData"]);l!=null&&u(e,["inlineData"],_A(l));const f=a(t,["fileData"]);f!=null&&u(e,["fileData"],SA(f));const d=a(t,["thoughtSignature"]);d!=null&&u(e,["thoughtSignature"],d);const m=a(t,["functionCall"]);m!=null&&u(e,["functionCall"],CA(m));const g=a(t,["codeExecutionResult"]);g!=null&&u(e,["codeExecutionResult"],g);const p=a(t,["executableCode"]);p!=null&&u(e,["executableCode"],p);const v=a(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const T=a(t,["text"]);return T!=null&&u(e,["text"],T),e}function mr(t){const e={},i=a(t,["parts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(f=>EA(f))),u(e,["parts"],l)}const o=a(t,["role"]);return o!=null&&u(e,["role"],o),e}function AA(t){const e={},i=a(t,["anyOf"]);i!=null&&u(e,["anyOf"],i);const o=a(t,["default"]);o!=null&&u(e,["default"],o);const l=a(t,["description"]);l!=null&&u(e,["description"],l);const f=a(t,["enum"]);f!=null&&u(e,["enum"],f);const d=a(t,["example"]);d!=null&&u(e,["example"],d);const m=a(t,["format"]);m!=null&&u(e,["format"],m);const g=a(t,["items"]);g!=null&&u(e,["items"],g);const p=a(t,["maxItems"]);p!=null&&u(e,["maxItems"],p);const v=a(t,["maxLength"]);v!=null&&u(e,["maxLength"],v);const T=a(t,["maxProperties"]);T!=null&&u(e,["maxProperties"],T);const S=a(t,["maximum"]);S!=null&&u(e,["maximum"],S);const E=a(t,["minItems"]);E!=null&&u(e,["minItems"],E);const b=a(t,["minLength"]);b!=null&&u(e,["minLength"],b);const N=a(t,["minProperties"]);N!=null&&u(e,["minProperties"],N);const L=a(t,["minimum"]);L!=null&&u(e,["minimum"],L);const q=a(t,["nullable"]);q!=null&&u(e,["nullable"],q);const V=a(t,["pattern"]);V!=null&&u(e,["pattern"],V);const U=a(t,["properties"]);U!=null&&u(e,["properties"],U);const $=a(t,["propertyOrdering"]);$!=null&&u(e,["propertyOrdering"],$);const z=a(t,["required"]);z!=null&&u(e,["required"],z);const Y=a(t,["title"]);Y!=null&&u(e,["title"],Y);const Z=a(t,["type"]);return Z!=null&&u(e,["type"],Z),e}function wA(t){const e={};if(a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=a(t,["category"]);i!=null&&u(e,["category"],i);const o=a(t,["threshold"]);return o!=null&&u(e,["threshold"],o),e}function xA(t){const e={},i=a(t,["behavior"]);i!=null&&u(e,["behavior"],i);const o=a(t,["description"]);o!=null&&u(e,["description"],o);const l=a(t,["name"]);l!=null&&u(e,["name"],l);const f=a(t,["parameters"]);f!=null&&u(e,["parameters"],f);const d=a(t,["parametersJsonSchema"]);d!=null&&u(e,["parametersJsonSchema"],d);const m=a(t,["response"]);m!=null&&u(e,["response"],m);const g=a(t,["responseJsonSchema"]);return g!=null&&u(e,["responseJsonSchema"],g),e}function RA(t){const e={},i=a(t,["startTime"]);i!=null&&u(e,["startTime"],i);const o=a(t,["endTime"]);return o!=null&&u(e,["endTime"],o),e}function bA(t){const e={},i=a(t,["timeRangeFilter"]);if(i!=null&&u(e,["timeRangeFilter"],RA(i)),a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function MA(t){const e={},i=a(t,["mode"]);i!=null&&u(e,["mode"],i);const o=a(t,["dynamicThreshold"]);return o!=null&&u(e,["dynamicThreshold"],o),e}function NA(t){const e={},i=a(t,["dynamicRetrievalConfig"]);return i!=null&&u(e,["dynamicRetrievalConfig"],MA(i)),e}function DA(){return{}}function UA(t){const e={},i=a(t,["environment"]);return i!=null&&u(e,["environment"],i),e}function IA(t){const e={},i=a(t,["functionDeclarations"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(p=>xA(p))),u(e,["functionDeclarations"],g)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=a(t,["googleSearch"]);o!=null&&u(e,["googleSearch"],bA(o));const l=a(t,["googleSearchRetrieval"]);if(l!=null&&u(e,["googleSearchRetrieval"],NA(l)),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(a(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");a(t,["urlContext"])!=null&&u(e,["urlContext"],DA());const d=a(t,["computerUse"]);d!=null&&u(e,["computerUse"],UA(d));const m=a(t,["codeExecution"]);return m!=null&&u(e,["codeExecution"],m),e}function kA(t){const e={},i=a(t,["mode"]);i!=null&&u(e,["mode"],i);const o=a(t,["allowedFunctionNames"]);return o!=null&&u(e,["allowedFunctionNames"],o),e}function PA(t){const e={},i=a(t,["latitude"]);i!=null&&u(e,["latitude"],i);const o=a(t,["longitude"]);return o!=null&&u(e,["longitude"],o),e}function LA(t){const e={},i=a(t,["latLng"]);i!=null&&u(e,["latLng"],PA(i));const o=a(t,["languageCode"]);return o!=null&&u(e,["languageCode"],o),e}function qA(t){const e={},i=a(t,["functionCallingConfig"]);i!=null&&u(e,["functionCallingConfig"],kA(i));const o=a(t,["retrievalConfig"]);return o!=null&&u(e,["retrievalConfig"],LA(o)),e}function VA(t){const e={},i=a(t,["voiceName"]);return i!=null&&u(e,["voiceName"],i),e}function Zg(t){const e={},i=a(t,["prebuiltVoiceConfig"]);return i!=null&&u(e,["prebuiltVoiceConfig"],VA(i)),e}function BA(t){const e={},i=a(t,["speaker"]);i!=null&&u(e,["speaker"],i);const o=a(t,["voiceConfig"]);return o!=null&&u(e,["voiceConfig"],Zg(o)),e}function GA(t){const e={},i=a(t,["speakerVoiceConfigs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>BA(l))),u(e,["speakerVoiceConfigs"],o)}return e}function OA(t){const e={},i=a(t,["voiceConfig"]);i!=null&&u(e,["voiceConfig"],Zg(i));const o=a(t,["multiSpeakerVoiceConfig"]);o!=null&&u(e,["multiSpeakerVoiceConfig"],GA(o));const l=a(t,["languageCode"]);return l!=null&&u(e,["languageCode"],l),e}function HA(t){const e={},i=a(t,["includeThoughts"]);i!=null&&u(e,["includeThoughts"],i);const o=a(t,["thinkingBudget"]);return o!=null&&u(e,["thinkingBudget"],o),e}function FA(t,e,i){const o={},l=a(e,["systemInstruction"]);i!==void 0&&l!=null&&u(i,["systemInstruction"],mr(at(l)));const f=a(e,["temperature"]);f!=null&&u(o,["temperature"],f);const d=a(e,["topP"]);d!=null&&u(o,["topP"],d);const m=a(e,["topK"]);m!=null&&u(o,["topK"],m);const g=a(e,["candidateCount"]);g!=null&&u(o,["candidateCount"],g);const p=a(e,["maxOutputTokens"]);p!=null&&u(o,["maxOutputTokens"],p);const v=a(e,["stopSequences"]);v!=null&&u(o,["stopSequences"],v);const T=a(e,["responseLogprobs"]);T!=null&&u(o,["responseLogprobs"],T);const S=a(e,["logprobs"]);S!=null&&u(o,["logprobs"],S);const E=a(e,["presencePenalty"]);E!=null&&u(o,["presencePenalty"],E);const b=a(e,["frequencyPenalty"]);b!=null&&u(o,["frequencyPenalty"],b);const N=a(e,["seed"]);N!=null&&u(o,["seed"],N);const L=a(e,["responseMimeType"]);L!=null&&u(o,["responseMimeType"],L);const q=a(e,["responseSchema"]);q!=null&&u(o,["responseSchema"],AA(Ac(q)));const V=a(e,["responseJsonSchema"]);if(V!=null&&u(o,["responseJsonSchema"],V),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const U=a(e,["safetySettings"]);if(i!==void 0&&U!=null){let ie=U;Array.isArray(ie)&&(ie=ie.map(fe=>wA(fe))),u(i,["safetySettings"],ie)}const $=a(e,["tools"]);if(i!==void 0&&$!=null){let ie=Eo($);Array.isArray(ie)&&(ie=ie.map(fe=>IA(Co(fe)))),u(i,["tools"],ie)}const z=a(e,["toolConfig"]);if(i!==void 0&&z!=null&&u(i,["toolConfig"],qA(z)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Y=a(e,["cachedContent"]);i!==void 0&&Y!=null&&u(i,["cachedContent"],mn(t,Y));const Z=a(e,["responseModalities"]);Z!=null&&u(o,["responseModalities"],Z);const ue=a(e,["mediaResolution"]);ue!=null&&u(o,["mediaResolution"],ue);const ne=a(e,["speechConfig"]);if(ne!=null&&u(o,["speechConfig"],OA(wc(ne))),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ee=a(e,["thinkingConfig"]);return ee!=null&&u(o,["thinkingConfig"],HA(ee)),o}function Ym(t,e){const i={},o=a(e,["model"]);o!=null&&u(i,["_url","model"],Ee(t,o));const l=a(e,["contents"]);if(l!=null){let d=qt(l);Array.isArray(d)&&(d=d.map(m=>mr(m))),u(i,["contents"],d)}const f=a(e,["config"]);return f!=null&&u(i,["generationConfig"],FA(t,f,i)),i}function zA(t,e){const i={},o=a(t,["taskType"]);e!==void 0&&o!=null&&u(e,["requests[]","taskType"],o);const l=a(t,["title"]);e!==void 0&&l!=null&&u(e,["requests[]","title"],l);const f=a(t,["outputDimensionality"]);if(e!==void 0&&f!=null&&u(e,["requests[]","outputDimensionality"],f),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function $A(t,e){const i={},o=a(e,["model"]);o!=null&&u(i,["_url","model"],Ee(t,o));const l=a(e,["contents"]);l!=null&&u(i,["requests[]","content"],Ec(t,l));const f=a(e,["config"]);f!=null&&u(i,["config"],zA(f,i));const d=a(e,["model"]);return d!==void 0&&u(i,["requests[]","model"],Ee(t,d)),i}function JA(t,e){const i={};if(a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=a(t,["numberOfImages"]);e!==void 0&&o!=null&&u(e,["parameters","sampleCount"],o);const l=a(t,["aspectRatio"]);e!==void 0&&l!=null&&u(e,["parameters","aspectRatio"],l);const f=a(t,["guidanceScale"]);if(e!==void 0&&f!=null&&u(e,["parameters","guidanceScale"],f),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=a(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&u(e,["parameters","safetySetting"],d);const m=a(t,["personGeneration"]);e!==void 0&&m!=null&&u(e,["parameters","personGeneration"],m);const g=a(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&u(e,["parameters","includeSafetyAttributes"],g);const p=a(t,["includeRaiReason"]);e!==void 0&&p!=null&&u(e,["parameters","includeRaiReason"],p);const v=a(t,["language"]);e!==void 0&&v!=null&&u(e,["parameters","language"],v);const T=a(t,["outputMimeType"]);e!==void 0&&T!=null&&u(e,["parameters","outputOptions","mimeType"],T);const S=a(t,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&u(e,["parameters","outputOptions","compressionQuality"],S),a(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const E=a(t,["imageSize"]);if(e!==void 0&&E!=null&&u(e,["parameters","sampleImageSize"],E),a(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function YA(t,e){const i={},o=a(e,["model"]);o!=null&&u(i,["_url","model"],Ee(t,o));const l=a(e,["prompt"]);l!=null&&u(i,["instances[0]","prompt"],l);const f=a(e,["config"]);return f!=null&&u(i,["config"],JA(f,i)),i}function KA(t,e){const i={},o=a(e,["model"]);o!=null&&u(i,["_url","name"],Ee(t,o));const l=a(e,["config"]);return l!=null&&u(i,["config"],l),i}function XA(t,e,i){const o={},l=a(e,["pageSize"]);i!==void 0&&l!=null&&u(i,["_query","pageSize"],l);const f=a(e,["pageToken"]);i!==void 0&&f!=null&&u(i,["_query","pageToken"],f);const d=a(e,["filter"]);i!==void 0&&d!=null&&u(i,["_query","filter"],d);const m=a(e,["queryBase"]);return i!==void 0&&m!=null&&u(i,["_url","models_url"],Pg(t,m)),o}function QA(t,e){const i={},o=a(e,["config"]);return o!=null&&u(i,["config"],XA(t,o,i)),i}function ZA(t,e){const i={},o=a(t,["displayName"]);e!==void 0&&o!=null&&u(e,["displayName"],o);const l=a(t,["description"]);e!==void 0&&l!=null&&u(e,["description"],l);const f=a(t,["defaultCheckpointId"]);return e!==void 0&&f!=null&&u(e,["defaultCheckpointId"],f),i}function WA(t,e){const i={},o=a(e,["model"]);o!=null&&u(i,["_url","name"],Ee(t,o));const l=a(e,["config"]);return l!=null&&u(i,["config"],ZA(l,i)),i}function jA(t,e){const i={},o=a(e,["model"]);o!=null&&u(i,["_url","name"],Ee(t,o));const l=a(e,["config"]);return l!=null&&u(i,["config"],l),i}function ew(t){const e={};if(a(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(a(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(a(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function tw(t,e){const i={},o=a(e,["model"]);o!=null&&u(i,["_url","model"],Ee(t,o));const l=a(e,["contents"]);if(l!=null){let d=qt(l);Array.isArray(d)&&(d=d.map(m=>mr(m))),u(i,["contents"],d)}const f=a(e,["config"]);return f!=null&&u(i,["config"],ew(f)),i}function Wg(t){const e={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=a(t,["imageBytes"]);i!=null&&u(e,["bytesBase64Encoded"],mi(i));const o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function nw(t,e){const i={},o=a(t,["prompt"]);e!==void 0&&o!=null&&u(e,["instances[0]","prompt"],o);const l=a(t,["image"]);if(e!==void 0&&l!=null&&u(e,["instances[0]","image"],Wg(l)),a(t,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");return i}function iw(t,e){const i={},o=a(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&u(e,["parameters","sampleCount"],o),a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=a(t,["durationSeconds"]);if(e!==void 0&&l!=null&&u(e,["parameters","durationSeconds"],l),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const f=a(t,["aspectRatio"]);e!==void 0&&f!=null&&u(e,["parameters","aspectRatio"],f);const d=a(t,["resolution"]);e!==void 0&&d!=null&&u(e,["parameters","resolution"],d);const m=a(t,["personGeneration"]);if(e!==void 0&&m!=null&&u(e,["parameters","personGeneration"],m),a(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=a(t,["negativePrompt"]);e!==void 0&&g!=null&&u(e,["parameters","negativePrompt"],g);const p=a(t,["enhancePrompt"]);if(e!==void 0&&p!=null&&u(e,["parameters","enhancePrompt"],p),a(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(a(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(a(t,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(a(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(a(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function ow(t,e){const i={},o=a(e,["model"]);o!=null&&u(i,["_url","model"],Ee(t,o));const l=a(e,["prompt"]);l!=null&&u(i,["instances[0]","prompt"],l);const f=a(e,["image"]);if(f!=null&&u(i,["instances[0]","image"],Wg(f)),a(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const d=a(e,["source"]);d!=null&&u(i,["config"],nw(d,i));const m=a(e,["config"]);return m!=null&&u(i,["config"],iw(m,i)),i}function sw(t){const e={},i=a(t,["fps"]);i!=null&&u(e,["fps"],i);const o=a(t,["endOffset"]);o!=null&&u(e,["endOffset"],o);const l=a(t,["startOffset"]);return l!=null&&u(e,["startOffset"],l),e}function lw(t){const e={},i=a(t,["displayName"]);i!=null&&u(e,["displayName"],i);const o=a(t,["data"]);o!=null&&u(e,["data"],o);const l=a(t,["mimeType"]);return l!=null&&u(e,["mimeType"],l),e}function rw(t){const e={},i=a(t,["displayName"]);i!=null&&u(e,["displayName"],i);const o=a(t,["fileUri"]);o!=null&&u(e,["fileUri"],o);const l=a(t,["mimeType"]);return l!=null&&u(e,["mimeType"],l),e}function aw(t){const e={},i=a(t,["id"]);i!=null&&u(e,["id"],i);const o=a(t,["args"]);o!=null&&u(e,["args"],o);const l=a(t,["name"]);return l!=null&&u(e,["name"],l),e}function uw(t){const e={},i=a(t,["videoMetadata"]);i!=null&&u(e,["videoMetadata"],sw(i));const o=a(t,["thought"]);o!=null&&u(e,["thought"],o);const l=a(t,["inlineData"]);l!=null&&u(e,["inlineData"],lw(l));const f=a(t,["fileData"]);f!=null&&u(e,["fileData"],rw(f));const d=a(t,["thoughtSignature"]);d!=null&&u(e,["thoughtSignature"],d);const m=a(t,["functionCall"]);m!=null&&u(e,["functionCall"],aw(m));const g=a(t,["codeExecutionResult"]);g!=null&&u(e,["codeExecutionResult"],g);const p=a(t,["executableCode"]);p!=null&&u(e,["executableCode"],p);const v=a(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const T=a(t,["text"]);return T!=null&&u(e,["text"],T),e}function wo(t){const e={},i=a(t,["parts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(f=>uw(f))),u(e,["parts"],l)}const o=a(t,["role"]);return o!=null&&u(e,["role"],o),e}function cw(t){const e={},i=a(t,["anyOf"]);i!=null&&u(e,["anyOf"],i);const o=a(t,["default"]);o!=null&&u(e,["default"],o);const l=a(t,["description"]);l!=null&&u(e,["description"],l);const f=a(t,["enum"]);f!=null&&u(e,["enum"],f);const d=a(t,["example"]);d!=null&&u(e,["example"],d);const m=a(t,["format"]);m!=null&&u(e,["format"],m);const g=a(t,["items"]);g!=null&&u(e,["items"],g);const p=a(t,["maxItems"]);p!=null&&u(e,["maxItems"],p);const v=a(t,["maxLength"]);v!=null&&u(e,["maxLength"],v);const T=a(t,["maxProperties"]);T!=null&&u(e,["maxProperties"],T);const S=a(t,["maximum"]);S!=null&&u(e,["maximum"],S);const E=a(t,["minItems"]);E!=null&&u(e,["minItems"],E);const b=a(t,["minLength"]);b!=null&&u(e,["minLength"],b);const N=a(t,["minProperties"]);N!=null&&u(e,["minProperties"],N);const L=a(t,["minimum"]);L!=null&&u(e,["minimum"],L);const q=a(t,["nullable"]);q!=null&&u(e,["nullable"],q);const V=a(t,["pattern"]);V!=null&&u(e,["pattern"],V);const U=a(t,["properties"]);U!=null&&u(e,["properties"],U);const $=a(t,["propertyOrdering"]);$!=null&&u(e,["propertyOrdering"],$);const z=a(t,["required"]);z!=null&&u(e,["required"],z);const Y=a(t,["title"]);Y!=null&&u(e,["title"],Y);const Z=a(t,["type"]);return Z!=null&&u(e,["type"],Z),e}function fw(t){const e={},i=a(t,["featureSelectionPreference"]);return i!=null&&u(e,["featureSelectionPreference"],i),e}function dw(t){const e={},i=a(t,["method"]);i!=null&&u(e,["method"],i);const o=a(t,["category"]);o!=null&&u(e,["category"],o);const l=a(t,["threshold"]);return l!=null&&u(e,["threshold"],l),e}function hw(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=a(t,["description"]);i!=null&&u(e,["description"],i);const o=a(t,["name"]);o!=null&&u(e,["name"],o);const l=a(t,["parameters"]);l!=null&&u(e,["parameters"],l);const f=a(t,["parametersJsonSchema"]);f!=null&&u(e,["parametersJsonSchema"],f);const d=a(t,["response"]);d!=null&&u(e,["response"],d);const m=a(t,["responseJsonSchema"]);return m!=null&&u(e,["responseJsonSchema"],m),e}function pw(t){const e={},i=a(t,["startTime"]);i!=null&&u(e,["startTime"],i);const o=a(t,["endTime"]);return o!=null&&u(e,["endTime"],o),e}function mw(t){const e={},i=a(t,["timeRangeFilter"]);i!=null&&u(e,["timeRangeFilter"],pw(i));const o=a(t,["excludeDomains"]);return o!=null&&u(e,["excludeDomains"],o),e}function gw(t){const e={},i=a(t,["mode"]);i!=null&&u(e,["mode"],i);const o=a(t,["dynamicThreshold"]);return o!=null&&u(e,["dynamicThreshold"],o),e}function yw(t){const e={},i=a(t,["dynamicRetrievalConfig"]);return i!=null&&u(e,["dynamicRetrievalConfig"],gw(i)),e}function vw(t){const e={},i=a(t,["excludeDomains"]);return i!=null&&u(e,["excludeDomains"],i),e}function Tw(t){const e={},i=a(t,["apiKeyString"]);return i!=null&&u(e,["apiKeyString"],i),e}function _w(t){const e={},i=a(t,["apiKeyConfig"]);i!=null&&u(e,["apiKeyConfig"],Tw(i));const o=a(t,["authType"]);o!=null&&u(e,["authType"],o);const l=a(t,["googleServiceAccountConfig"]);l!=null&&u(e,["googleServiceAccountConfig"],l);const f=a(t,["httpBasicAuthConfig"]);f!=null&&u(e,["httpBasicAuthConfig"],f);const d=a(t,["oauthConfig"]);d!=null&&u(e,["oauthConfig"],d);const m=a(t,["oidcConfig"]);return m!=null&&u(e,["oidcConfig"],m),e}function Sw(t){const e={},i=a(t,["authConfig"]);return i!=null&&u(e,["authConfig"],_w(i)),e}function Cw(){return{}}function Ew(t){const e={},i=a(t,["environment"]);return i!=null&&u(e,["environment"],i),e}function jg(t){const e={},i=a(t,["functionDeclarations"]);if(i!=null){let T=i;Array.isArray(T)&&(T=T.map(S=>hw(S))),u(e,["functionDeclarations"],T)}const o=a(t,["retrieval"]);o!=null&&u(e,["retrieval"],o);const l=a(t,["googleSearch"]);l!=null&&u(e,["googleSearch"],mw(l));const f=a(t,["googleSearchRetrieval"]);f!=null&&u(e,["googleSearchRetrieval"],yw(f));const d=a(t,["enterpriseWebSearch"]);d!=null&&u(e,["enterpriseWebSearch"],vw(d));const m=a(t,["googleMaps"]);m!=null&&u(e,["googleMaps"],Sw(m)),a(t,["urlContext"])!=null&&u(e,["urlContext"],Cw());const p=a(t,["computerUse"]);p!=null&&u(e,["computerUse"],Ew(p));const v=a(t,["codeExecution"]);return v!=null&&u(e,["codeExecution"],v),e}function Aw(t){const e={},i=a(t,["mode"]);i!=null&&u(e,["mode"],i);const o=a(t,["allowedFunctionNames"]);return o!=null&&u(e,["allowedFunctionNames"],o),e}function ww(t){const e={},i=a(t,["latitude"]);i!=null&&u(e,["latitude"],i);const o=a(t,["longitude"]);return o!=null&&u(e,["longitude"],o),e}function xw(t){const e={},i=a(t,["latLng"]);i!=null&&u(e,["latLng"],ww(i));const o=a(t,["languageCode"]);return o!=null&&u(e,["languageCode"],o),e}function Rw(t){const e={},i=a(t,["functionCallingConfig"]);i!=null&&u(e,["functionCallingConfig"],Aw(i));const o=a(t,["retrievalConfig"]);return o!=null&&u(e,["retrievalConfig"],xw(o)),e}function bw(t){const e={},i=a(t,["voiceName"]);return i!=null&&u(e,["voiceName"],i),e}function Mw(t){const e={},i=a(t,["prebuiltVoiceConfig"]);return i!=null&&u(e,["prebuiltVoiceConfig"],bw(i)),e}function Nw(t){const e={},i=a(t,["voiceConfig"]);if(i!=null&&u(e,["voiceConfig"],Mw(i)),a(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=a(t,["languageCode"]);return o!=null&&u(e,["languageCode"],o),e}function Dw(t){const e={},i=a(t,["includeThoughts"]);i!=null&&u(e,["includeThoughts"],i);const o=a(t,["thinkingBudget"]);return o!=null&&u(e,["thinkingBudget"],o),e}function Uw(t,e,i){const o={},l=a(e,["systemInstruction"]);i!==void 0&&l!=null&&u(i,["systemInstruction"],wo(at(l)));const f=a(e,["temperature"]);f!=null&&u(o,["temperature"],f);const d=a(e,["topP"]);d!=null&&u(o,["topP"],d);const m=a(e,["topK"]);m!=null&&u(o,["topK"],m);const g=a(e,["candidateCount"]);g!=null&&u(o,["candidateCount"],g);const p=a(e,["maxOutputTokens"]);p!=null&&u(o,["maxOutputTokens"],p);const v=a(e,["stopSequences"]);v!=null&&u(o,["stopSequences"],v);const T=a(e,["responseLogprobs"]);T!=null&&u(o,["responseLogprobs"],T);const S=a(e,["logprobs"]);S!=null&&u(o,["logprobs"],S);const E=a(e,["presencePenalty"]);E!=null&&u(o,["presencePenalty"],E);const b=a(e,["frequencyPenalty"]);b!=null&&u(o,["frequencyPenalty"],b);const N=a(e,["seed"]);N!=null&&u(o,["seed"],N);const L=a(e,["responseMimeType"]);L!=null&&u(o,["responseMimeType"],L);const q=a(e,["responseSchema"]);q!=null&&u(o,["responseSchema"],cw(Ac(q)));const V=a(e,["responseJsonSchema"]);V!=null&&u(o,["responseJsonSchema"],V);const U=a(e,["routingConfig"]);U!=null&&u(o,["routingConfig"],U);const $=a(e,["modelSelectionConfig"]);$!=null&&u(o,["modelConfig"],fw($));const z=a(e,["safetySettings"]);if(i!==void 0&&z!=null){let we=z;Array.isArray(we)&&(we=we.map(B=>dw(B))),u(i,["safetySettings"],we)}const Y=a(e,["tools"]);if(i!==void 0&&Y!=null){let we=Eo(Y);Array.isArray(we)&&(we=we.map(B=>jg(Co(B)))),u(i,["tools"],we)}const Z=a(e,["toolConfig"]);i!==void 0&&Z!=null&&u(i,["toolConfig"],Rw(Z));const ue=a(e,["labels"]);i!==void 0&&ue!=null&&u(i,["labels"],ue);const ne=a(e,["cachedContent"]);i!==void 0&&ne!=null&&u(i,["cachedContent"],mn(t,ne));const ee=a(e,["responseModalities"]);ee!=null&&u(o,["responseModalities"],ee);const ie=a(e,["mediaResolution"]);ie!=null&&u(o,["mediaResolution"],ie);const fe=a(e,["speechConfig"]);fe!=null&&u(o,["speechConfig"],Nw(wc(fe)));const ot=a(e,["audioTimestamp"]);ot!=null&&u(o,["audioTimestamp"],ot);const $e=a(e,["thinkingConfig"]);return $e!=null&&u(o,["thinkingConfig"],Dw($e)),o}function Km(t,e){const i={},o=a(e,["model"]);o!=null&&u(i,["_url","model"],Ee(t,o));const l=a(e,["contents"]);if(l!=null){let d=qt(l);Array.isArray(d)&&(d=d.map(m=>wo(m))),u(i,["contents"],d)}const f=a(e,["config"]);return f!=null&&u(i,["generationConfig"],Uw(t,f,i)),i}function Iw(t,e){const i={},o=a(t,["taskType"]);e!==void 0&&o!=null&&u(e,["instances[]","task_type"],o);const l=a(t,["title"]);e!==void 0&&l!=null&&u(e,["instances[]","title"],l);const f=a(t,["outputDimensionality"]);e!==void 0&&f!=null&&u(e,["parameters","outputDimensionality"],f);const d=a(t,["mimeType"]);e!==void 0&&d!=null&&u(e,["instances[]","mimeType"],d);const m=a(t,["autoTruncate"]);return e!==void 0&&m!=null&&u(e,["parameters","autoTruncate"],m),i}function kw(t,e){const i={},o=a(e,["model"]);o!=null&&u(i,["_url","model"],Ee(t,o));const l=a(e,["contents"]);l!=null&&u(i,["instances[]","content"],Ec(t,l));const f=a(e,["config"]);return f!=null&&u(i,["config"],Iw(f,i)),i}function Pw(t,e){const i={},o=a(t,["outputGcsUri"]);e!==void 0&&o!=null&&u(e,["parameters","storageUri"],o);const l=a(t,["negativePrompt"]);e!==void 0&&l!=null&&u(e,["parameters","negativePrompt"],l);const f=a(t,["numberOfImages"]);e!==void 0&&f!=null&&u(e,["parameters","sampleCount"],f);const d=a(t,["aspectRatio"]);e!==void 0&&d!=null&&u(e,["parameters","aspectRatio"],d);const m=a(t,["guidanceScale"]);e!==void 0&&m!=null&&u(e,["parameters","guidanceScale"],m);const g=a(t,["seed"]);e!==void 0&&g!=null&&u(e,["parameters","seed"],g);const p=a(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&u(e,["parameters","safetySetting"],p);const v=a(t,["personGeneration"]);e!==void 0&&v!=null&&u(e,["parameters","personGeneration"],v);const T=a(t,["includeSafetyAttributes"]);e!==void 0&&T!=null&&u(e,["parameters","includeSafetyAttributes"],T);const S=a(t,["includeRaiReason"]);e!==void 0&&S!=null&&u(e,["parameters","includeRaiReason"],S);const E=a(t,["language"]);e!==void 0&&E!=null&&u(e,["parameters","language"],E);const b=a(t,["outputMimeType"]);e!==void 0&&b!=null&&u(e,["parameters","outputOptions","mimeType"],b);const N=a(t,["outputCompressionQuality"]);e!==void 0&&N!=null&&u(e,["parameters","outputOptions","compressionQuality"],N);const L=a(t,["addWatermark"]);e!==void 0&&L!=null&&u(e,["parameters","addWatermark"],L);const q=a(t,["imageSize"]);e!==void 0&&q!=null&&u(e,["parameters","sampleImageSize"],q);const V=a(t,["enhancePrompt"]);return e!==void 0&&V!=null&&u(e,["parameters","enhancePrompt"],V),i}function Lw(t,e){const i={},o=a(e,["model"]);o!=null&&u(i,["_url","model"],Ee(t,o));const l=a(e,["prompt"]);l!=null&&u(i,["instances[0]","prompt"],l);const f=a(e,["config"]);return f!=null&&u(i,["config"],Pw(f,i)),i}function Ft(t){const e={},i=a(t,["gcsUri"]);i!=null&&u(e,["gcsUri"],i);const o=a(t,["imageBytes"]);o!=null&&u(e,["bytesBase64Encoded"],mi(o));const l=a(t,["mimeType"]);return l!=null&&u(e,["mimeType"],l),e}function qw(t){const e={},i=a(t,["maskMode"]);i!=null&&u(e,["maskMode"],i);const o=a(t,["segmentationClasses"]);o!=null&&u(e,["maskClasses"],o);const l=a(t,["maskDilation"]);return l!=null&&u(e,["dilation"],l),e}function Vw(t){const e={},i=a(t,["controlType"]);i!=null&&u(e,["controlType"],i);const o=a(t,["enableControlImageComputation"]);return o!=null&&u(e,["computeControl"],o),e}function Bw(t){const e={},i=a(t,["styleDescription"]);return i!=null&&u(e,["styleDescription"],i),e}function Gw(t){const e={},i=a(t,["subjectType"]);i!=null&&u(e,["subjectType"],i);const o=a(t,["subjectDescription"]);return o!=null&&u(e,["subjectDescription"],o),e}function Ow(t){const e={},i=a(t,["referenceImage"]);i!=null&&u(e,["referenceImage"],Ft(i));const o=a(t,["referenceId"]);o!=null&&u(e,["referenceId"],o);const l=a(t,["referenceType"]);l!=null&&u(e,["referenceType"],l);const f=a(t,["maskImageConfig"]);f!=null&&u(e,["maskImageConfig"],qw(f));const d=a(t,["controlImageConfig"]);d!=null&&u(e,["controlImageConfig"],Vw(d));const m=a(t,["styleImageConfig"]);m!=null&&u(e,["styleImageConfig"],Bw(m));const g=a(t,["subjectImageConfig"]);return g!=null&&u(e,["subjectImageConfig"],Gw(g)),e}function Hw(t,e){const i={},o=a(t,["outputGcsUri"]);e!==void 0&&o!=null&&u(e,["parameters","storageUri"],o);const l=a(t,["negativePrompt"]);e!==void 0&&l!=null&&u(e,["parameters","negativePrompt"],l);const f=a(t,["numberOfImages"]);e!==void 0&&f!=null&&u(e,["parameters","sampleCount"],f);const d=a(t,["aspectRatio"]);e!==void 0&&d!=null&&u(e,["parameters","aspectRatio"],d);const m=a(t,["guidanceScale"]);e!==void 0&&m!=null&&u(e,["parameters","guidanceScale"],m);const g=a(t,["seed"]);e!==void 0&&g!=null&&u(e,["parameters","seed"],g);const p=a(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&u(e,["parameters","safetySetting"],p);const v=a(t,["personGeneration"]);e!==void 0&&v!=null&&u(e,["parameters","personGeneration"],v);const T=a(t,["includeSafetyAttributes"]);e!==void 0&&T!=null&&u(e,["parameters","includeSafetyAttributes"],T);const S=a(t,["includeRaiReason"]);e!==void 0&&S!=null&&u(e,["parameters","includeRaiReason"],S);const E=a(t,["language"]);e!==void 0&&E!=null&&u(e,["parameters","language"],E);const b=a(t,["outputMimeType"]);e!==void 0&&b!=null&&u(e,["parameters","outputOptions","mimeType"],b);const N=a(t,["outputCompressionQuality"]);e!==void 0&&N!=null&&u(e,["parameters","outputOptions","compressionQuality"],N);const L=a(t,["addWatermark"]);e!==void 0&&L!=null&&u(e,["parameters","addWatermark"],L);const q=a(t,["editMode"]);e!==void 0&&q!=null&&u(e,["parameters","editMode"],q);const V=a(t,["baseSteps"]);return e!==void 0&&V!=null&&u(e,["parameters","editConfig","baseSteps"],V),i}function Fw(t,e){const i={},o=a(e,["model"]);o!=null&&u(i,["_url","model"],Ee(t,o));const l=a(e,["prompt"]);l!=null&&u(i,["instances[0]","prompt"],l);const f=a(e,["referenceImages"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(g=>Ow(g))),u(i,["instances[0]","referenceImages"],m)}const d=a(e,["config"]);return d!=null&&u(i,["config"],Hw(d,i)),i}function zw(t,e){const i={},o=a(t,["outputGcsUri"]);e!==void 0&&o!=null&&u(e,["parameters","storageUri"],o);const l=a(t,["includeRaiReason"]);e!==void 0&&l!=null&&u(e,["parameters","includeRaiReason"],l);const f=a(t,["outputMimeType"]);e!==void 0&&f!=null&&u(e,["parameters","outputOptions","mimeType"],f);const d=a(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&u(e,["parameters","outputOptions","compressionQuality"],d);const m=a(t,["enhanceInputImage"]);e!==void 0&&m!=null&&u(e,["parameters","upscaleConfig","enhanceInputImage"],m);const g=a(t,["imagePreservationFactor"]);e!==void 0&&g!=null&&u(e,["parameters","upscaleConfig","imagePreservationFactor"],g);const p=a(t,["numberOfImages"]);e!==void 0&&p!=null&&u(e,["parameters","sampleCount"],p);const v=a(t,["mode"]);return e!==void 0&&v!=null&&u(e,["parameters","mode"],v),i}function $w(t,e){const i={},o=a(e,["model"]);o!=null&&u(i,["_url","model"],Ee(t,o));const l=a(e,["image"]);l!=null&&u(i,["instances[0]","image"],Ft(l));const f=a(e,["upscaleFactor"]);f!=null&&u(i,["parameters","upscaleConfig","upscaleFactor"],f);const d=a(e,["config"]);return d!=null&&u(i,["config"],zw(d,i)),i}function Jw(t){const e={},i=a(t,["productImage"]);return i!=null&&u(e,["image"],Ft(i)),e}function Yw(t,e){const i={},o=a(t,["prompt"]);e!==void 0&&o!=null&&u(e,["instances[0]","prompt"],o);const l=a(t,["personImage"]);e!==void 0&&l!=null&&u(e,["instances[0]","personImage","image"],Ft(l));const f=a(t,["productImages"]);if(e!==void 0&&f!=null){let d=f;Array.isArray(d)&&(d=d.map(m=>Jw(m))),u(e,["instances[0]","productImages"],d)}return i}function Kw(t,e){const i={},o=a(t,["numberOfImages"]);e!==void 0&&o!=null&&u(e,["parameters","sampleCount"],o);const l=a(t,["baseSteps"]);e!==void 0&&l!=null&&u(e,["parameters","editConfig","baseSteps"],l);const f=a(t,["outputGcsUri"]);e!==void 0&&f!=null&&u(e,["parameters","storageUri"],f);const d=a(t,["seed"]);e!==void 0&&d!=null&&u(e,["parameters","seed"],d);const m=a(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&u(e,["parameters","safetySetting"],m);const g=a(t,["personGeneration"]);e!==void 0&&g!=null&&u(e,["parameters","personGeneration"],g);const p=a(t,["addWatermark"]);e!==void 0&&p!=null&&u(e,["parameters","addWatermark"],p);const v=a(t,["outputMimeType"]);e!==void 0&&v!=null&&u(e,["parameters","outputOptions","mimeType"],v);const T=a(t,["outputCompressionQuality"]);e!==void 0&&T!=null&&u(e,["parameters","outputOptions","compressionQuality"],T);const S=a(t,["enhancePrompt"]);return e!==void 0&&S!=null&&u(e,["parameters","enhancePrompt"],S),i}function Xw(t,e){const i={},o=a(e,["model"]);o!=null&&u(i,["_url","model"],Ee(t,o));const l=a(e,["source"]);l!=null&&u(i,["config"],Yw(l,i));const f=a(e,["config"]);return f!=null&&u(i,["config"],Kw(f,i)),i}function Qw(t){const e={},i=a(t,["image"]);return i!=null&&u(e,["image"],Ft(i)),e}function Zw(t,e){const i={},o=a(t,["prompt"]);e!==void 0&&o!=null&&u(e,["instances[0]","prompt"],o);const l=a(t,["image"]);e!==void 0&&l!=null&&u(e,["instances[0]","image"],Ft(l));const f=a(t,["scribbleImage"]);return e!==void 0&&f!=null&&u(e,["instances[0]","scribble"],Qw(f)),i}function Ww(t,e){const i={},o=a(t,["mode"]);e!==void 0&&o!=null&&u(e,["parameters","mode"],o);const l=a(t,["maxPredictions"]);e!==void 0&&l!=null&&u(e,["parameters","maxPredictions"],l);const f=a(t,["confidenceThreshold"]);e!==void 0&&f!=null&&u(e,["parameters","confidenceThreshold"],f);const d=a(t,["maskDilation"]);e!==void 0&&d!=null&&u(e,["parameters","maskDilation"],d);const m=a(t,["binaryColorThreshold"]);return e!==void 0&&m!=null&&u(e,["parameters","binaryColorThreshold"],m),i}function jw(t,e){const i={},o=a(e,["model"]);o!=null&&u(i,["_url","model"],Ee(t,o));const l=a(e,["source"]);l!=null&&u(i,["config"],Zw(l,i));const f=a(e,["config"]);return f!=null&&u(i,["config"],Ww(f,i)),i}function ex(t,e){const i={},o=a(e,["model"]);o!=null&&u(i,["_url","name"],Ee(t,o));const l=a(e,["config"]);return l!=null&&u(i,["config"],l),i}function tx(t,e,i){const o={},l=a(e,["pageSize"]);i!==void 0&&l!=null&&u(i,["_query","pageSize"],l);const f=a(e,["pageToken"]);i!==void 0&&f!=null&&u(i,["_query","pageToken"],f);const d=a(e,["filter"]);i!==void 0&&d!=null&&u(i,["_query","filter"],d);const m=a(e,["queryBase"]);return i!==void 0&&m!=null&&u(i,["_url","models_url"],Pg(t,m)),o}function nx(t,e){const i={},o=a(e,["config"]);return o!=null&&u(i,["config"],tx(t,o,i)),i}function ix(t,e){const i={},o=a(t,["displayName"]);e!==void 0&&o!=null&&u(e,["displayName"],o);const l=a(t,["description"]);e!==void 0&&l!=null&&u(e,["description"],l);const f=a(t,["defaultCheckpointId"]);return e!==void 0&&f!=null&&u(e,["defaultCheckpointId"],f),i}function ox(t,e){const i={},o=a(e,["model"]);o!=null&&u(i,["_url","model"],Ee(t,o));const l=a(e,["config"]);return l!=null&&u(i,["config"],ix(l,i)),i}function sx(t,e){const i={},o=a(e,["model"]);o!=null&&u(i,["_url","name"],Ee(t,o));const l=a(e,["config"]);return l!=null&&u(i,["config"],l),i}function lx(t,e){const i={},o=a(t,["systemInstruction"]);e!==void 0&&o!=null&&u(e,["systemInstruction"],wo(at(o)));const l=a(t,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(m=>jg(m))),u(e,["tools"],d)}const f=a(t,["generationConfig"]);return e!==void 0&&f!=null&&u(e,["generationConfig"],f),i}function rx(t,e){const i={},o=a(e,["model"]);o!=null&&u(i,["_url","model"],Ee(t,o));const l=a(e,["contents"]);if(l!=null){let d=qt(l);Array.isArray(d)&&(d=d.map(m=>wo(m))),u(i,["contents"],d)}const f=a(e,["config"]);return f!=null&&u(i,["config"],lx(f,i)),i}function ax(t,e){const i={},o=a(e,["model"]);o!=null&&u(i,["_url","model"],Ee(t,o));const l=a(e,["contents"]);if(l!=null){let d=qt(l);Array.isArray(d)&&(d=d.map(m=>wo(m))),u(i,["contents"],d)}const f=a(e,["config"]);return f!=null&&u(i,["config"],f),i}function ey(t){const e={},i=a(t,["uri"]);i!=null&&u(e,["gcsUri"],i);const o=a(t,["videoBytes"]);o!=null&&u(e,["bytesBase64Encoded"],mi(o));const l=a(t,["mimeType"]);return l!=null&&u(e,["mimeType"],l),e}function ux(t,e){const i={},o=a(t,["prompt"]);e!==void 0&&o!=null&&u(e,["instances[0]","prompt"],o);const l=a(t,["image"]);e!==void 0&&l!=null&&u(e,["instances[0]","image"],Ft(l));const f=a(t,["video"]);return e!==void 0&&f!=null&&u(e,["instances[0]","video"],ey(f)),i}function cx(t){const e={},i=a(t,["image"]);i!=null&&u(e,["image"],Ft(i));const o=a(t,["referenceType"]);return o!=null&&u(e,["referenceType"],o),e}function fx(t){const e={},i=a(t,["image"]);i!=null&&u(e,["_self"],Ft(i));const o=a(t,["maskMode"]);return o!=null&&u(e,["maskMode"],o),e}function dx(t,e){const i={},o=a(t,["numberOfVideos"]);e!==void 0&&o!=null&&u(e,["parameters","sampleCount"],o);const l=a(t,["outputGcsUri"]);e!==void 0&&l!=null&&u(e,["parameters","storageUri"],l);const f=a(t,["fps"]);e!==void 0&&f!=null&&u(e,["parameters","fps"],f);const d=a(t,["durationSeconds"]);e!==void 0&&d!=null&&u(e,["parameters","durationSeconds"],d);const m=a(t,["seed"]);e!==void 0&&m!=null&&u(e,["parameters","seed"],m);const g=a(t,["aspectRatio"]);e!==void 0&&g!=null&&u(e,["parameters","aspectRatio"],g);const p=a(t,["resolution"]);e!==void 0&&p!=null&&u(e,["parameters","resolution"],p);const v=a(t,["personGeneration"]);e!==void 0&&v!=null&&u(e,["parameters","personGeneration"],v);const T=a(t,["pubsubTopic"]);e!==void 0&&T!=null&&u(e,["parameters","pubsubTopic"],T);const S=a(t,["negativePrompt"]);e!==void 0&&S!=null&&u(e,["parameters","negativePrompt"],S);const E=a(t,["enhancePrompt"]);e!==void 0&&E!=null&&u(e,["parameters","enhancePrompt"],E);const b=a(t,["generateAudio"]);e!==void 0&&b!=null&&u(e,["parameters","generateAudio"],b);const N=a(t,["lastFrame"]);e!==void 0&&N!=null&&u(e,["instances[0]","lastFrame"],Ft(N));const L=a(t,["referenceImages"]);if(e!==void 0&&L!=null){let U=L;Array.isArray(U)&&(U=U.map($=>cx($))),u(e,["instances[0]","referenceImages"],U)}const q=a(t,["mask"]);e!==void 0&&q!=null&&u(e,["instances[0]","mask"],fx(q));const V=a(t,["compressionQuality"]);return e!==void 0&&V!=null&&u(e,["parameters","compressionQuality"],V),i}function hx(t,e){const i={},o=a(e,["model"]);o!=null&&u(i,["_url","model"],Ee(t,o));const l=a(e,["prompt"]);l!=null&&u(i,["instances[0]","prompt"],l);const f=a(e,["image"]);f!=null&&u(i,["instances[0]","image"],Ft(f));const d=a(e,["video"]);d!=null&&u(i,["instances[0]","video"],ey(d));const m=a(e,["source"]);m!=null&&u(i,["config"],ux(m,i));const g=a(e,["config"]);return g!=null&&u(i,["config"],dx(g,i)),i}function px(t){const e={},i=a(t,["fps"]);i!=null&&u(e,["fps"],i);const o=a(t,["endOffset"]);o!=null&&u(e,["endOffset"],o);const l=a(t,["startOffset"]);return l!=null&&u(e,["startOffset"],l),e}function mx(t){const e={},i=a(t,["data"]);i!=null&&u(e,["data"],i);const o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function gx(t){const e={},i=a(t,["fileUri"]);i!=null&&u(e,["fileUri"],i);const o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function yx(t){const e={},i=a(t,["id"]);i!=null&&u(e,["id"],i);const o=a(t,["args"]);o!=null&&u(e,["args"],o);const l=a(t,["name"]);return l!=null&&u(e,["name"],l),e}function vx(t){const e={},i=a(t,["videoMetadata"]);i!=null&&u(e,["videoMetadata"],px(i));const o=a(t,["thought"]);o!=null&&u(e,["thought"],o);const l=a(t,["inlineData"]);l!=null&&u(e,["inlineData"],mx(l));const f=a(t,["fileData"]);f!=null&&u(e,["fileData"],gx(f));const d=a(t,["thoughtSignature"]);d!=null&&u(e,["thoughtSignature"],d);const m=a(t,["functionCall"]);m!=null&&u(e,["functionCall"],yx(m));const g=a(t,["codeExecutionResult"]);g!=null&&u(e,["codeExecutionResult"],g);const p=a(t,["executableCode"]);p!=null&&u(e,["executableCode"],p);const v=a(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const T=a(t,["text"]);return T!=null&&u(e,["text"],T),e}function Tx(t){const e={},i=a(t,["parts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(f=>vx(f))),u(e,["parts"],l)}const o=a(t,["role"]);return o!=null&&u(e,["role"],o),e}function _x(t){const e={},i=a(t,["citationSources"]);return i!=null&&u(e,["citations"],i),e}function Sx(t){const e={},i=a(t,["retrievedUrl"]);i!=null&&u(e,["retrievedUrl"],i);const o=a(t,["urlRetrievalStatus"]);return o!=null&&u(e,["urlRetrievalStatus"],o),e}function Cx(t){const e={},i=a(t,["urlMetadata"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>Sx(l))),u(e,["urlMetadata"],o)}return e}function Ex(t){const e={},i=a(t,["content"]);i!=null&&u(e,["content"],Tx(i));const o=a(t,["citationMetadata"]);o!=null&&u(e,["citationMetadata"],_x(o));const l=a(t,["tokenCount"]);l!=null&&u(e,["tokenCount"],l);const f=a(t,["finishReason"]);f!=null&&u(e,["finishReason"],f);const d=a(t,["urlContextMetadata"]);d!=null&&u(e,["urlContextMetadata"],Cx(d));const m=a(t,["avgLogprobs"]);m!=null&&u(e,["avgLogprobs"],m);const g=a(t,["groundingMetadata"]);g!=null&&u(e,["groundingMetadata"],g);const p=a(t,["index"]);p!=null&&u(e,["index"],p);const v=a(t,["logprobsResult"]);v!=null&&u(e,["logprobsResult"],v);const T=a(t,["safetyRatings"]);return T!=null&&u(e,["safetyRatings"],T),e}function Xm(t){const e={},i=a(t,["sdkHttpResponse"]);i!=null&&u(e,["sdkHttpResponse"],i);const o=a(t,["candidates"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(p=>Ex(p))),u(e,["candidates"],g)}const l=a(t,["modelVersion"]);l!=null&&u(e,["modelVersion"],l);const f=a(t,["promptFeedback"]);f!=null&&u(e,["promptFeedback"],f);const d=a(t,["responseId"]);d!=null&&u(e,["responseId"],d);const m=a(t,["usageMetadata"]);return m!=null&&u(e,["usageMetadata"],m),e}function Ax(t){const e={},i=a(t,["values"]);return i!=null&&u(e,["values"],i),e}function wx(){return{}}function xx(t){const e={},i=a(t,["sdkHttpResponse"]);i!=null&&u(e,["sdkHttpResponse"],i);const o=a(t,["embeddings"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(d=>Ax(d))),u(e,["embeddings"],f)}return a(t,["metadata"])!=null&&u(e,["metadata"],wx()),e}function Rx(t){const e={},i=a(t,["bytesBase64Encoded"]);i!=null&&u(e,["imageBytes"],mi(i));const o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function ty(t){const e={},i=a(t,["safetyAttributes","categories"]);i!=null&&u(e,["categories"],i);const o=a(t,["safetyAttributes","scores"]);o!=null&&u(e,["scores"],o);const l=a(t,["contentType"]);return l!=null&&u(e,["contentType"],l),e}function bx(t){const e={},i=a(t,["_self"]);i!=null&&u(e,["image"],Rx(i));const o=a(t,["raiFilteredReason"]);o!=null&&u(e,["raiFilteredReason"],o);const l=a(t,["_self"]);return l!=null&&u(e,["safetyAttributes"],ty(l)),e}function Mx(t){const e={},i=a(t,["sdkHttpResponse"]);i!=null&&u(e,["sdkHttpResponse"],i);const o=a(t,["predictions"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(d=>bx(d))),u(e,["generatedImages"],f)}const l=a(t,["positivePromptSafetyAttributes"]);return l!=null&&u(e,["positivePromptSafetyAttributes"],ty(l)),e}function Nx(t){const e={},i=a(t,["baseModel"]);i!=null&&u(e,["baseModel"],i);const o=a(t,["createTime"]);o!=null&&u(e,["createTime"],o);const l=a(t,["updateTime"]);return l!=null&&u(e,["updateTime"],l),e}function oc(t){const e={},i=a(t,["name"]);i!=null&&u(e,["name"],i);const o=a(t,["displayName"]);o!=null&&u(e,["displayName"],o);const l=a(t,["description"]);l!=null&&u(e,["description"],l);const f=a(t,["version"]);f!=null&&u(e,["version"],f);const d=a(t,["_self"]);d!=null&&u(e,["tunedModelInfo"],Nx(d));const m=a(t,["inputTokenLimit"]);m!=null&&u(e,["inputTokenLimit"],m);const g=a(t,["outputTokenLimit"]);g!=null&&u(e,["outputTokenLimit"],g);const p=a(t,["supportedGenerationMethods"]);return p!=null&&u(e,["supportedActions"],p),e}function Dx(t){const e={},i=a(t,["sdkHttpResponse"]);i!=null&&u(e,["sdkHttpResponse"],i);const o=a(t,["nextPageToken"]);o!=null&&u(e,["nextPageToken"],o);const l=a(t,["_self"]);if(l!=null){let f=Lg(l);Array.isArray(f)&&(f=f.map(d=>oc(d))),u(e,["models"],f)}return e}function Ux(t){const e={},i=a(t,["sdkHttpResponse"]);return i!=null&&u(e,["sdkHttpResponse"],i),e}function Ix(t){const e={},i=a(t,["sdkHttpResponse"]);i!=null&&u(e,["sdkHttpResponse"],i);const o=a(t,["totalTokens"]);o!=null&&u(e,["totalTokens"],o);const l=a(t,["cachedContentTokenCount"]);return l!=null&&u(e,["cachedContentTokenCount"],l),e}function kx(t){const e={},i=a(t,["video","uri"]);i!=null&&u(e,["uri"],i);const o=a(t,["video","encodedVideo"]);o!=null&&u(e,["videoBytes"],mi(o));const l=a(t,["encoding"]);return l!=null&&u(e,["mimeType"],l),e}function Px(t){const e={},i=a(t,["_self"]);return i!=null&&u(e,["video"],kx(i)),e}function Lx(t){const e={},i=a(t,["generatedSamples"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(d=>Px(d))),u(e,["generatedVideos"],f)}const o=a(t,["raiMediaFilteredCount"]);o!=null&&u(e,["raiMediaFilteredCount"],o);const l=a(t,["raiMediaFilteredReasons"]);return l!=null&&u(e,["raiMediaFilteredReasons"],l),e}function qx(t){const e={},i=a(t,["name"]);i!=null&&u(e,["name"],i);const o=a(t,["metadata"]);o!=null&&u(e,["metadata"],o);const l=a(t,["done"]);l!=null&&u(e,["done"],l);const f=a(t,["error"]);f!=null&&u(e,["error"],f);const d=a(t,["response","generateVideoResponse"]);return d!=null&&u(e,["response"],Lx(d)),e}function Vx(t){const e={},i=a(t,["fps"]);i!=null&&u(e,["fps"],i);const o=a(t,["endOffset"]);o!=null&&u(e,["endOffset"],o);const l=a(t,["startOffset"]);return l!=null&&u(e,["startOffset"],l),e}function Bx(t){const e={},i=a(t,["displayName"]);i!=null&&u(e,["displayName"],i);const o=a(t,["data"]);o!=null&&u(e,["data"],o);const l=a(t,["mimeType"]);return l!=null&&u(e,["mimeType"],l),e}function Gx(t){const e={},i=a(t,["displayName"]);i!=null&&u(e,["displayName"],i);const o=a(t,["fileUri"]);o!=null&&u(e,["fileUri"],o);const l=a(t,["mimeType"]);return l!=null&&u(e,["mimeType"],l),e}function Ox(t){const e={},i=a(t,["id"]);i!=null&&u(e,["id"],i);const o=a(t,["args"]);o!=null&&u(e,["args"],o);const l=a(t,["name"]);return l!=null&&u(e,["name"],l),e}function Hx(t){const e={},i=a(t,["videoMetadata"]);i!=null&&u(e,["videoMetadata"],Vx(i));const o=a(t,["thought"]);o!=null&&u(e,["thought"],o);const l=a(t,["inlineData"]);l!=null&&u(e,["inlineData"],Bx(l));const f=a(t,["fileData"]);f!=null&&u(e,["fileData"],Gx(f));const d=a(t,["thoughtSignature"]);d!=null&&u(e,["thoughtSignature"],d);const m=a(t,["functionCall"]);m!=null&&u(e,["functionCall"],Ox(m));const g=a(t,["codeExecutionResult"]);g!=null&&u(e,["codeExecutionResult"],g);const p=a(t,["executableCode"]);p!=null&&u(e,["executableCode"],p);const v=a(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const T=a(t,["text"]);return T!=null&&u(e,["text"],T),e}function Fx(t){const e={},i=a(t,["parts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(f=>Hx(f))),u(e,["parts"],l)}const o=a(t,["role"]);return o!=null&&u(e,["role"],o),e}function zx(t){const e={},i=a(t,["citations"]);return i!=null&&u(e,["citations"],i),e}function $x(t){const e={},i=a(t,["retrievedUrl"]);i!=null&&u(e,["retrievedUrl"],i);const o=a(t,["urlRetrievalStatus"]);return o!=null&&u(e,["urlRetrievalStatus"],o),e}function Jx(t){const e={},i=a(t,["urlMetadata"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>$x(l))),u(e,["urlMetadata"],o)}return e}function Yx(t){const e={},i=a(t,["content"]);i!=null&&u(e,["content"],Fx(i));const o=a(t,["citationMetadata"]);o!=null&&u(e,["citationMetadata"],zx(o));const l=a(t,["finishMessage"]);l!=null&&u(e,["finishMessage"],l);const f=a(t,["finishReason"]);f!=null&&u(e,["finishReason"],f);const d=a(t,["urlContextMetadata"]);d!=null&&u(e,["urlContextMetadata"],Jx(d));const m=a(t,["avgLogprobs"]);m!=null&&u(e,["avgLogprobs"],m);const g=a(t,["groundingMetadata"]);g!=null&&u(e,["groundingMetadata"],g);const p=a(t,["index"]);p!=null&&u(e,["index"],p);const v=a(t,["logprobsResult"]);v!=null&&u(e,["logprobsResult"],v);const T=a(t,["safetyRatings"]);return T!=null&&u(e,["safetyRatings"],T),e}function Qm(t){const e={},i=a(t,["sdkHttpResponse"]);i!=null&&u(e,["sdkHttpResponse"],i);const o=a(t,["candidates"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(v=>Yx(v))),u(e,["candidates"],p)}const l=a(t,["createTime"]);l!=null&&u(e,["createTime"],l);const f=a(t,["modelVersion"]);f!=null&&u(e,["modelVersion"],f);const d=a(t,["promptFeedback"]);d!=null&&u(e,["promptFeedback"],d);const m=a(t,["responseId"]);m!=null&&u(e,["responseId"],m);const g=a(t,["usageMetadata"]);return g!=null&&u(e,["usageMetadata"],g),e}function Kx(t){const e={},i=a(t,["truncated"]);i!=null&&u(e,["truncated"],i);const o=a(t,["token_count"]);return o!=null&&u(e,["tokenCount"],o),e}function Xx(t){const e={},i=a(t,["values"]);i!=null&&u(e,["values"],i);const o=a(t,["statistics"]);return o!=null&&u(e,["statistics"],Kx(o)),e}function Qx(t){const e={},i=a(t,["billableCharacterCount"]);return i!=null&&u(e,["billableCharacterCount"],i),e}function Zx(t){const e={},i=a(t,["sdkHttpResponse"]);i!=null&&u(e,["sdkHttpResponse"],i);const o=a(t,["predictions[]","embeddings"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(d=>Xx(d))),u(e,["embeddings"],f)}const l=a(t,["metadata"]);return l!=null&&u(e,["metadata"],Qx(l)),e}function ny(t){const e={},i=a(t,["gcsUri"]);i!=null&&u(e,["gcsUri"],i);const o=a(t,["bytesBase64Encoded"]);o!=null&&u(e,["imageBytes"],mi(o));const l=a(t,["mimeType"]);return l!=null&&u(e,["mimeType"],l),e}function iy(t){const e={},i=a(t,["safetyAttributes","categories"]);i!=null&&u(e,["categories"],i);const o=a(t,["safetyAttributes","scores"]);o!=null&&u(e,["scores"],o);const l=a(t,["contentType"]);return l!=null&&u(e,["contentType"],l),e}function gr(t){const e={},i=a(t,["_self"]);i!=null&&u(e,["image"],ny(i));const o=a(t,["raiFilteredReason"]);o!=null&&u(e,["raiFilteredReason"],o);const l=a(t,["_self"]);l!=null&&u(e,["safetyAttributes"],iy(l));const f=a(t,["prompt"]);return f!=null&&u(e,["enhancedPrompt"],f),e}function Wx(t){const e={},i=a(t,["sdkHttpResponse"]);i!=null&&u(e,["sdkHttpResponse"],i);const o=a(t,["predictions"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(d=>gr(d))),u(e,["generatedImages"],f)}const l=a(t,["positivePromptSafetyAttributes"]);return l!=null&&u(e,["positivePromptSafetyAttributes"],iy(l)),e}function jx(t){const e={},i=a(t,["sdkHttpResponse"]);i!=null&&u(e,["sdkHttpResponse"],i);const o=a(t,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(f=>gr(f))),u(e,["generatedImages"],l)}return e}function eR(t){const e={},i=a(t,["sdkHttpResponse"]);i!=null&&u(e,["sdkHttpResponse"],i);const o=a(t,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(f=>gr(f))),u(e,["generatedImages"],l)}return e}function tR(t){const e={},i=a(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>gr(l))),u(e,["generatedImages"],o)}return e}function nR(t){const e={},i=a(t,["label"]);i!=null&&u(e,["label"],i);const o=a(t,["score"]);return o!=null&&u(e,["score"],o),e}function iR(t){const e={},i=a(t,["_self"]);i!=null&&u(e,["mask"],ny(i));const o=a(t,["labels"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(f=>nR(f))),u(e,["labels"],l)}return e}function oR(t){const e={},i=a(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>iR(l))),u(e,["generatedMasks"],o)}return e}function sR(t){const e={},i=a(t,["endpoint"]);i!=null&&u(e,["name"],i);const o=a(t,["deployedModelId"]);return o!=null&&u(e,["deployedModelId"],o),e}function lR(t){const e={},i=a(t,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&u(e,["baseModel"],i);const o=a(t,["createTime"]);o!=null&&u(e,["createTime"],o);const l=a(t,["updateTime"]);return l!=null&&u(e,["updateTime"],l),e}function rR(t){const e={},i=a(t,["checkpointId"]);i!=null&&u(e,["checkpointId"],i);const o=a(t,["epoch"]);o!=null&&u(e,["epoch"],o);const l=a(t,["step"]);return l!=null&&u(e,["step"],l),e}function sc(t){const e={},i=a(t,["name"]);i!=null&&u(e,["name"],i);const o=a(t,["displayName"]);o!=null&&u(e,["displayName"],o);const l=a(t,["description"]);l!=null&&u(e,["description"],l);const f=a(t,["versionId"]);f!=null&&u(e,["version"],f);const d=a(t,["deployedModels"]);if(d!=null){let T=d;Array.isArray(T)&&(T=T.map(S=>sR(S))),u(e,["endpoints"],T)}const m=a(t,["labels"]);m!=null&&u(e,["labels"],m);const g=a(t,["_self"]);g!=null&&u(e,["tunedModelInfo"],lR(g));const p=a(t,["defaultCheckpointId"]);p!=null&&u(e,["defaultCheckpointId"],p);const v=a(t,["checkpoints"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(S=>rR(S))),u(e,["checkpoints"],T)}return e}function aR(t){const e={},i=a(t,["sdkHttpResponse"]);i!=null&&u(e,["sdkHttpResponse"],i);const o=a(t,["nextPageToken"]);o!=null&&u(e,["nextPageToken"],o);const l=a(t,["_self"]);if(l!=null){let f=Lg(l);Array.isArray(f)&&(f=f.map(d=>sc(d))),u(e,["models"],f)}return e}function uR(t){const e={},i=a(t,["sdkHttpResponse"]);return i!=null&&u(e,["sdkHttpResponse"],i),e}function cR(t){const e={},i=a(t,["sdkHttpResponse"]);i!=null&&u(e,["sdkHttpResponse"],i);const o=a(t,["totalTokens"]);return o!=null&&u(e,["totalTokens"],o),e}function fR(t){const e={},i=a(t,["sdkHttpResponse"]);i!=null&&u(e,["sdkHttpResponse"],i);const o=a(t,["tokensInfo"]);return o!=null&&u(e,["tokensInfo"],o),e}function dR(t){const e={},i=a(t,["gcsUri"]);i!=null&&u(e,["uri"],i);const o=a(t,["bytesBase64Encoded"]);o!=null&&u(e,["videoBytes"],mi(o));const l=a(t,["mimeType"]);return l!=null&&u(e,["mimeType"],l),e}function hR(t){const e={},i=a(t,["_self"]);return i!=null&&u(e,["video"],dR(i)),e}function pR(t){const e={},i=a(t,["videos"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(d=>hR(d))),u(e,["generatedVideos"],f)}const o=a(t,["raiMediaFilteredCount"]);o!=null&&u(e,["raiMediaFilteredCount"],o);const l=a(t,["raiMediaFilteredReasons"]);return l!=null&&u(e,["raiMediaFilteredReasons"],l),e}function mR(t){const e={},i=a(t,["name"]);i!=null&&u(e,["name"],i);const o=a(t,["metadata"]);o!=null&&u(e,["metadata"],o);const l=a(t,["done"]);l!=null&&u(e,["done"],l);const f=a(t,["error"]);f!=null&&u(e,["error"],f);const d=a(t,["response"]);return d!=null&&u(e,["response"],pR(d)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gR="Content-Type",yR="X-Server-Timeout",vR="User-Agent",lc="x-goog-api-client",TR="1.20.0",_R=`google-genai-sdk/${TR}`,SR="v1beta1",CR="v1beta",Zm=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class ER{constructor(e){var i,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const l={};this.clientOptions.vertexai?(l.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:SR,l.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(l.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:CR,l.baseUrl="https://generativelanguage.googleapis.com/"),l.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=l,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(l,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),i=new URL(e);return i.protocol=i.protocol=="http:"?"ws":"wss",i.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,i,o){const l=[this.getRequestUrlInternal(i)];return o&&l.push(this.getBaseResourcePath()),e!==""&&l.push(e),new URL(`${l.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),l=this.constructUrl(e.path,i,o);if(e.queryParams)for(const[d,m]of Object.entries(e.queryParams))l.searchParams.append(d,String(m));let f={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else f.body=e.body;return f=await this.includeExtraHttpOptionsToRequestInit(f,i,e.abortSignal),this.unaryApiCall(l,f,e.httpMethod)}patchHttpOptions(e,i){const o=JSON.parse(JSON.stringify(e));for(const[l,f]of Object.entries(i))typeof f=="object"?o[l]=Object.assign(Object.assign({},o[l]),f):f!==void 0&&(o[l]=f);return o}async requestStream(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),l=this.constructUrl(e.path,i,o);(!l.searchParams.has("alt")||l.searchParams.get("alt")!=="sse")&&l.searchParams.set("alt","sse");let f={};return f.body=e.body,f=await this.includeExtraHttpOptionsToRequestInit(f,i,e.abortSignal),this.streamApiCall(l,f,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,i,o){if(i&&i.timeout||o){const l=new AbortController,f=l.signal;if(i.timeout&&(i==null?void 0:i.timeout)>0){const d=setTimeout(()=>l.abort(),i.timeout);d&&typeof d.unref=="function"&&d.unref()}o&&o.addEventListener("abort",()=>{l.abort()}),e.signal=f}return i&&i.extraBody!==null&&AR(e,i.extraBody),e.headers=await this.getHeadersInternal(i),e}async unaryApiCall(e,i,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:o})).then(async l=>(await Wm(l),new ju(l))).catch(l=>{throw l instanceof Error?l:new Error(JSON.stringify(l))})}async streamApiCall(e,i,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:o})).then(async l=>(await Wm(l),this.processStreamResponse(l))).catch(l=>{throw l instanceof Error?l:new Error(JSON.stringify(l))})}processStreamResponse(e){var i;return vo(this,arguments,function*(){const l=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),f=new TextDecoder("utf-8");if(!l)throw new Error("Response body is empty");try{let d="";for(;;){const{done:m,value:g}=yield ke(l.read());if(m){if(d.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=f.decode(g,{stream:!0});try{const T=JSON.parse(p);if("error"in T){const S=JSON.parse(JSON.stringify(T.error)),E=S.status,b=S.code,N=`got status: ${E}. ${JSON.stringify(T)}`;if(b>=400&&b<600)throw new pr({message:N,status:b})}}catch(T){if(T.name==="ApiError")throw T}d+=p;let v=d.match(Zm);for(;v;){const T=v[1];try{const S=new Response(T,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ke(new ju(S)),d=d.slice(v[0].length),v=d.match(Zm)}catch(S){throw new Error(`exception parsing stream chunk ${T}. ${S}`)}}}}finally{l.releaseLock()}})}async apiCall(e,i){return fetch(e,i).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},i=_R+" "+this.clientOptions.userAgentExtra;return e[vR]=i,e[lc]=i,e[gR]="application/json",e}async getHeadersInternal(e){const i=new Headers;if(e&&e.headers){for(const[o,l]of Object.entries(e.headers))i.append(o,l);e.timeout&&e.timeout>0&&i.append(yR,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i),i}async uploadFile(e,i){var o;const l={};i!=null&&(l.mimeType=i.mimeType,l.name=i.name,l.displayName=i.displayName),l.name&&!l.name.startsWith("files/")&&(l.name=`files/${l.name}`);const f=this.clientOptions.uploader,d=await f.stat(e);l.sizeBytes=String(d.size);const m=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:d.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");l.mimeType=m;const g=await this.fetchUploadUrl(l,i);return f.upload(e,g,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,i){var o;let l={};i!=null&&i.httpOptions?l=i.httpOptions:l={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const f={file:e},d=await this.request({path:W("upload/v1beta/files",f._url),body:JSON.stringify(f),httpMethod:"POST",httpOptions:l});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const m=(o=d==null?void 0:d.headers)===null||o===void 0?void 0:o["x-goog-upload-url"];if(m===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return m}}async function Wm(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const i=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const l=JSON.stringify(o);throw i>=400&&i<600?new pr({message:l,status:i}):new Error(l)}}function AR(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let i={};if(typeof t.body=="string"&&t.body.length>0)try{const f=JSON.parse(t.body);if(typeof f=="object"&&f!==null&&!Array.isArray(f))i=f;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(f,d){const m=Object.assign({},f);for(const g in d)if(Object.prototype.hasOwnProperty.call(d,g)){const p=d[g],v=m[g];p&&typeof p=="object"&&!Array.isArray(p)&&v&&typeof v=="object"&&!Array.isArray(v)?m[g]=o(v,p):(v&&p&&typeof v!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof v}, New type: ${typeof p}. Overwriting.`),m[g]=p)}return m}const l=o(i,e);t.body=JSON.stringify(l)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wR="mcp_used/unknown";let xR=!1;function oy(t){for(const e of t)if(RR(e)||typeof e=="object"&&"inputSchema"in e)return!0;return xR}function sy(t){var e;const i=(e=t[lc])!==null&&e!==void 0?e:"";t[lc]=(i+` ${wR}`).trimStart()}function RR(t){return t!==null&&typeof t=="object"&&t instanceof bc}function bR(t,e=100){return vo(this,arguments,function*(){let o,l=0;for(;l<e;){const f=yield ke(t.listTools({cursor:o}));for(const d of f.tools)yield yield ke(d),l++;if(!f.nextCursor)break;o=f.nextCursor}})}class bc{constructor(e=[],i){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=i}static create(e,i){return new bc(e,i)}async initialize(){var e,i,o,l;if(this.mcpTools.length>0)return;const f={},d=[];for(const v of this.mcpClients)try{for(var m=!0,g=(i=void 0,bs(bR(v))),p;p=await g.next(),e=p.done,!e;m=!0){l=p.value,m=!1;const T=l;d.push(T);const S=T.name;if(f[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);f[S]=v}}catch(T){i={error:T}}finally{try{!m&&!e&&(o=g.return)&&await o.call(g)}finally{if(i)throw i.error}}this.mcpTools=d,this.functionNameToMcpClient=f}async tool(){return await this.initialize(),FT(this.mcpTools,this.config)}async callTool(e){await this.initialize();const i=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const l=this.functionNameToMcpClient[o.name];let f;this.config.timeout&&(f={timeout:this.config.timeout});const d=await l.callTool({name:o.name,arguments:o.args},void 0,f);i.push({functionResponse:{name:o.name,response:d.isError?{error:d}:d}})}return i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function MR(t,e,i){const o=new PT;let l;i.data instanceof Blob?l=JSON.parse(await i.data.text()):l=JSON.parse(i.data);const f=sA(l);Object.assign(o,f),e(o)}class NR{constructor(e,i,o){this.apiClient=e,this.auth=i,this.webSocketFactory=o}async connect(e){var i,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const l=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion(),d=IR(this.apiClient.getDefaultHeaders()),m=this.apiClient.getApiKey(),g=`${l}/ws/google.ai.generativelanguage.${f}.GenerativeService.BidiGenerateMusic?key=${m}`;let p=()=>{};const v=new Promise(U=>{p=U}),T=e.callbacks,S=function(){p({})},E=this.apiClient,b={onopen:S,onmessage:U=>{MR(E,T.onmessage,U)},onerror:(i=T==null?void 0:T.onerror)!==null&&i!==void 0?i:function(U){},onclose:(o=T==null?void 0:T.onclose)!==null&&o!==void 0?o:function(U){}},N=this.webSocketFactory.create(g,UR(d),b);N.connect(),await v;const L=Ee(this.apiClient,e.model),q=Yg({model:L}),V=ic({setup:q});return N.send(JSON.stringify(V)),new DR(N,this.apiClient)}}class DR{constructor(e,i){this.conn=e,this.apiClient=i}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const i=nE(e),o=Kg(i);this.conn.send(JSON.stringify({clientContent:o}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const i=iE(e),o=ic(i);this.conn.send(JSON.stringify(o))}sendPlaybackControl(e){const i=ic({playbackControl:e});this.conn.send(JSON.stringify(i))}play(){this.sendPlaybackControl(go.PLAY)}pause(){this.sendPlaybackControl(go.PAUSE)}stop(){this.sendPlaybackControl(go.STOP)}resetContext(){this.sendPlaybackControl(go.RESET_CONTEXT)}close(){this.conn.close()}}function UR(t){const e={};return t.forEach((i,o)=>{e[o]=i}),e}function IR(t){const e=new Headers;for(const[i,o]of Object.entries(t))e.append(i,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kR="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function PR(t,e,i){const o=new kT;let l;i.data instanceof Blob?l=await i.data.text():i.data instanceof ArrayBuffer?l=new TextDecoder().decode(i.data):l=i.data;const f=JSON.parse(l);if(t.isVertexAI()){const d=vA(f);Object.assign(o,d)}else{const d=QE(f);Object.assign(o,d)}e(o)}class LR{constructor(e,i,o){this.apiClient=e,this.auth=i,this.webSocketFactory=o,this.music=new NR(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var i,o,l,f,d,m;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let v;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&oy(e.config.tools)&&sy(T);const S=GR(T);if(this.apiClient.isVertexAI())v=`${g}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S);else{const ne=this.apiClient.getApiKey();let ee="BidiGenerateContent",ie="key";ne!=null&&ne.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),ee="BidiGenerateContentConstrained",ie="access_token"),v=`${g}/ws/google.ai.generativelanguage.${p}.GenerativeService.${ee}?${ie}=${ne}`}let E=()=>{};const b=new Promise(ne=>{E=ne}),N=e.callbacks,L=function(){var ne;(ne=N==null?void 0:N.onopen)===null||ne===void 0||ne.call(N),E({})},q=this.apiClient,V={onopen:L,onmessage:ne=>{PR(q,N.onmessage,ne)},onerror:(i=N==null?void 0:N.onerror)!==null&&i!==void 0?i:function(ne){},onclose:(o=N==null?void 0:N.onclose)!==null&&o!==void 0?o:function(ne){}},U=this.webSocketFactory.create(v,BR(S),V);U.connect(),await b;let $=Ee(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&$.startsWith("publishers/")){const ne=this.apiClient.getProject(),ee=this.apiClient.getLocation();$=`projects/${ne}/locations/${ee}/`+$}let z={};this.apiClient.isVertexAI()&&((l=e.config)===null||l===void 0?void 0:l.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ur.AUDIO]}:e.config.responseModalities=[ur.AUDIO]),!((f=e.config)===null||f===void 0)&&f.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const Y=(m=(d=e.config)===null||d===void 0?void 0:d.tools)!==null&&m!==void 0?m:[],Z=[];for(const ne of Y)if(this.isCallableTool(ne)){const ee=ne;Z.push(await ee.tool())}else Z.push(ne);Z.length>0&&(e.config.tools=Z);const ue={model:$,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?z=UE(this.apiClient,ue):z=WC(this.apiClient,ue),delete z.config,U.send(JSON.stringify(z)),new VR(U,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const qR={turnComplete:!0};class VR{constructor(e,i){this.conn=e,this.apiClient=i}tLiveClientContent(e,i){if(i.turns!==null&&i.turns!==void 0){let o=[];try{o=qt(i.turns),e.isVertexAI()?o=o.map(l=>wo(l)):o=o.map(l=>mr(l))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof i.turns}'`)}return{clientContent:{turns:o,turnComplete:i.turnComplete}}}return{clientContent:{turnComplete:i.turnComplete}}}tLiveClienttToolResponse(e,i){let o=[];if(i.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(i.functionResponses)?o=i.functionResponses:o=[i.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const f of o){if(typeof f!="object"||f===null||!("name"in f)||!("response"in f))throw new Error(`Could not parse function response, type '${typeof f}'.`);if(!e.isVertexAI()&&!("id"in f))throw new Error(kR)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},qR),e);const i=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(i))}sendRealtimeInput(e){let i={};this.apiClient.isVertexAI()?i={realtimeInput:PE(e)}:i={realtimeInput:tE(e)},this.conn.send(JSON.stringify(i))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const i=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(i))}close(){this.conn.close()}}function BR(t){const e={};return t.forEach((i,o)=>{e[o]=i}),e}function GR(t){const e=new Headers;for(const[i,o]of Object.entries(t))e.append(i,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jm=10;function eg(t){var e,i,o;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let l=!1;for(const d of(i=t==null?void 0:t.tools)!==null&&i!==void 0?i:[])if(To(d)){l=!0;break}if(!l)return!0;const f=(o=t==null?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return f&&(f<0||!Number.isInteger(f))||f==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",f),!0):!1}function To(t){return"callTool"in t&&typeof t.callTool=="function"}function OR(t){var e,i,o;return(o=(i=(e=t.config)===null||e===void 0?void 0:e.tools)===null||i===void 0?void 0:i.some(l=>To(l)))!==null&&o!==void 0?o:!1}function HR(t){var e,i,o;return(o=(i=(e=t.config)===null||e===void 0?void 0:e.tools)===null||i===void 0?void 0:i.some(l=>!To(l)))!==null&&o!==void 0?o:!1}function tg(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FR extends pi{constructor(e){super(),this.apiClient=e,this.generateContent=async i=>{var o,l,f,d,m;const g=await this.processParamsMaybeAddMcpUsage(i);if(this.maybeMoveToResponseJsonSchem(i),!OR(i)||eg(i.config))return await this.generateContentInternal(g);if(HR(i))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let p,v;const T=qt(g.contents),S=(f=(l=(o=g.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||l===void 0?void 0:l.maximumRemoteCalls)!==null&&f!==void 0?f:jm;let E=0;for(;E<S&&(p=await this.generateContentInternal(g),!(!p.functionCalls||p.functionCalls.length===0));){const b=p.candidates[0].content,N=[];for(const L of(m=(d=i.config)===null||d===void 0?void 0:d.tools)!==null&&m!==void 0?m:[])if(To(L)){const V=await L.callTool(p.functionCalls);N.push(...V)}E++,v={role:"user",parts:N},g.contents=qt(g.contents),g.contents.push(b),g.contents.push(v),tg(g.config)&&(T.push(b),T.push(v))}return tg(g.config)&&(p.automaticFunctionCallingHistory=T),p},this.generateContentStream=async i=>{if(this.maybeMoveToResponseJsonSchem(i),eg(i.config)){const o=await this.processParamsMaybeAddMcpUsage(i);return await this.generateContentStreamInternal(o)}else return await this.processAfcStream(i)},this.generateImages=async i=>await this.generateImagesInternal(i).then(o=>{var l;let f;const d=[];if(o!=null&&o.generatedImages)for(const g of o.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((l=g==null?void 0:g.safetyAttributes)===null||l===void 0?void 0:l.contentType)==="Positive Prompt"?f=g==null?void 0:g.safetyAttributes:d.push(g);let m;return f?m={generatedImages:d,positivePromptSafetyAttributes:f,sdkHttpResponse:o.sdkHttpResponse}:m={generatedImages:d,sdkHttpResponse:o.sdkHttpResponse},m}),this.list=async i=>{var o;const d={config:Object.assign(Object.assign({},{queryBase:!0}),i==null?void 0:i.config)};if(this.apiClient.isVertexAI()&&!d.config.queryBase){if(!((o=d.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");d.config.filter="labels.tune-type:*"}return new ks(hi.PAGED_ITEM_MODELS,m=>this.listInternal(m),await this.listInternal(d),d)},this.editImage=async i=>{const o={model:i.model,prompt:i.prompt,referenceImages:[],config:i.config};return i.referenceImages&&i.referenceImages&&(o.referenceImages=i.referenceImages.map(l=>l.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async i=>{let o={numberOfImages:1,mode:"upscale"};i.config&&(o=Object.assign(Object.assign({},o),i.config));const l={model:i.model,image:i.image,upscaleFactor:i.upscaleFactor,config:o};return await this.upscaleImageInternal(l)},this.generateVideos=async i=>{if((i.prompt||i.image||i.video)&&i.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(i)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var i,o,l;const f=(i=e.config)===null||i===void 0?void 0:i.tools;if(!f)return e;const d=await Promise.all(f.map(async g=>To(g)?await g.tool():g)),m={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:d})};if(m.config.tools=d,e.config&&e.config.tools&&oy(e.config.tools)){const g=(l=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&l!==void 0?l:{};let p=Object.assign({},g);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),sy(p),m.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return m}async initAfcToolsMap(e){var i,o,l;const f=new Map;for(const d of(o=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&o!==void 0?o:[])if(To(d)){const m=d,g=await m.tool();for(const p of(l=g.functionDeclarations)!==null&&l!==void 0?l:[]){if(!p.name)throw new Error("Function declaration name is required.");if(f.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);f.set(p.name,m)}}return f}async processAfcStream(e){var i,o,l;const f=(l=(o=(i=e.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&l!==void 0?l:jm;let d=!1,m=0;const g=await this.initAfcToolsMap(e);return(function(p,v,T){var S,E;return vo(this,arguments,function*(){for(var b,N,L,q;m<f;){d&&(m++,d=!1);const z=yield ke(p.processParamsMaybeAddMcpUsage(T)),Y=yield ke(p.generateContentStreamInternal(z)),Z=[],ue=[];try{for(var V=!0,U=(N=void 0,bs(Y)),$;$=yield ke(U.next()),b=$.done,!b;V=!0){q=$.value,V=!1;const ne=q;if(yield yield ke(ne),ne.candidates&&(!((S=ne.candidates[0])===null||S===void 0)&&S.content)){ue.push(ne.candidates[0].content);for(const ee of(E=ne.candidates[0].content.parts)!==null&&E!==void 0?E:[])if(m<f&&ee.functionCall){if(!ee.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(ee.functionCall.name)){const ie=yield ke(v.get(ee.functionCall.name).callTool([ee.functionCall]));Z.push(...ie)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${ee.functionCall.name}`)}}}}catch(ne){N={error:ne}}finally{try{!V&&!b&&(L=U.return)&&(yield ke(L.call(U)))}finally{if(N)throw N.error}}if(Z.length>0){d=!0;const ne=new xs;ne.candidates=[{content:{role:"user",parts:Z}}],yield yield ke(ne);const ee=[];ee.push(...ue),ee.push({role:"user",parts:Z});const ie=qt(T.contents).concat(ee);T.contents=ie}else break}})})(this,g,e)}async generateContentInternal(e){var i,o,l,f;let d,m="",g={};if(this.apiClient.isVertexAI()){const p=Km(this.apiClient,e);return m=W("{model}:generateContent",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const T=Qm(v),S=new xs;return Object.assign(S,T),S})}else{const p=Ym(this.apiClient,e);return m=W("{model}:generateContent",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const T=Xm(v),S=new xs;return Object.assign(S,T),S})}}async generateContentStreamInternal(e){var i,o,l,f;let d,m="",g={};if(this.apiClient.isVertexAI()){const p=Km(this.apiClient,e);return m=W("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.requestStream({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),d.then(function(T){return vo(this,arguments,function*(){var S,E,b,N;try{for(var L=!0,q=bs(T),V;V=yield ke(q.next()),S=V.done,!S;L=!0){N=V.value,L=!1;const U=N,$=Qm(yield ke(U.json()));$.sdkHttpResponse={headers:U.headers};const z=new xs;Object.assign(z,$),yield yield ke(z)}}catch(U){E={error:U}}finally{try{!L&&!S&&(b=q.return)&&(yield ke(b.call(q)))}finally{if(E)throw E.error}}})})}else{const p=Ym(this.apiClient,e);return m=W("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.requestStream({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}),d.then(function(T){return vo(this,arguments,function*(){var S,E,b,N;try{for(var L=!0,q=bs(T),V;V=yield ke(q.next()),S=V.done,!S;L=!0){N=V.value,L=!1;const U=N,$=Xm(yield ke(U.json()));$.sdkHttpResponse={headers:U.headers};const z=new xs;Object.assign(z,$),yield yield ke(z)}}catch(U){E={error:U}}finally{try{!L&&!S&&(b=q.return)&&(yield ke(b.call(q)))}finally{if(E)throw E.error}}})})}}async embedContent(e){var i,o,l,f;let d,m="",g={};if(this.apiClient.isVertexAI()){const p=kw(this.apiClient,e);return m=W("{model}:predict",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const T=Zx(v),S=new Rm;return Object.assign(S,T),S})}else{const p=$A(this.apiClient,e);return m=W("{model}:batchEmbedContents",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const T=xx(v),S=new Rm;return Object.assign(S,T),S})}}async generateImagesInternal(e){var i,o,l,f;let d,m="",g={};if(this.apiClient.isVertexAI()){const p=Lw(this.apiClient,e);return m=W("{model}:predict",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const T=Wx(v),S=new bm;return Object.assign(S,T),S})}else{const p=YA(this.apiClient,e);return m=W("{model}:predict",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const T=Mx(v),S=new bm;return Object.assign(S,T),S})}}async editImageInternal(e){var i,o;let l,f="",d={};if(this.apiClient.isVertexAI()){const m=Fw(this.apiClient,e);return f=W("{model}:predict",m._url),d=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>{const p=jx(g),v=new xT;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var i,o;let l,f="",d={};if(this.apiClient.isVertexAI()){const m=$w(this.apiClient,e);return f=W("{model}:predict",m._url),d=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>{const p=eR(g),v=new RT;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var i,o;let l,f="",d={};if(this.apiClient.isVertexAI()){const m=Xw(this.apiClient,e);return f=W("{model}:predict",m._url),d=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>{const p=tR(g),v=new bT;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var i,o;let l,f="",d={};if(this.apiClient.isVertexAI()){const m=jw(this.apiClient,e);return f=W("{model}:predict",m._url),d=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>{const p=oR(g),v=new MT;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var i,o,l,f;let d,m="",g={};if(this.apiClient.isVertexAI()){const p=ex(this.apiClient,e);return m=W("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),d.then(v=>sc(v))}else{const p=KA(this.apiClient,e);return m=W("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),d.then(v=>oc(v))}}async listInternal(e){var i,o,l,f;let d,m="",g={};if(this.apiClient.isVertexAI()){const p=nx(this.apiClient,e);return m=W("{models_url}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const T=aR(v),S=new Mm;return Object.assign(S,T),S})}else{const p=QA(this.apiClient,e);return m=W("{models_url}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const T=Dx(v),S=new Mm;return Object.assign(S,T),S})}}async update(e){var i,o,l,f;let d,m="",g={};if(this.apiClient.isVertexAI()){const p=ox(this.apiClient,e);return m=W("{model}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),d.then(v=>sc(v))}else{const p=WA(this.apiClient,e);return m=W("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),d.then(v=>oc(v))}}async delete(e){var i,o,l,f;let d,m="",g={};if(this.apiClient.isVertexAI()){const p=sx(this.apiClient,e);return m=W("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const T=uR(v),S=new Nm;return Object.assign(S,T),S})}else{const p=jA(this.apiClient,e);return m=W("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const T=Ux(v),S=new Nm;return Object.assign(S,T),S})}}async countTokens(e){var i,o,l,f;let d,m="",g={};if(this.apiClient.isVertexAI()){const p=rx(this.apiClient,e);return m=W("{model}:countTokens",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const T=cR(v),S=new Dm;return Object.assign(S,T),S})}else{const p=tw(this.apiClient,e);return m=W("{model}:countTokens",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const T=Ix(v),S=new Dm;return Object.assign(S,T),S})}}async computeTokens(e){var i,o;let l,f="",d={};if(this.apiClient.isVertexAI()){const m=ax(this.apiClient,e);return f=W("{model}:computeTokens",m._url),d=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>{const p=fR(g),v=new NT;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var i,o,l,f;let d,m="",g={};if(this.apiClient.isVertexAI()){const p=hx(this.apiClient,e);return m=W("{model}:predictLongRunning",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),d.then(v=>{const T=mR(v),S=new cr;return Object.assign(S,T),S})}else{const p=ow(this.apiClient,e);return m=W("{model}:predictLongRunning",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),d.then(v=>{const T=qx(v),S=new cr;return Object.assign(S,T),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zR extends pi{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const i=e.operation,o=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const l=i.name.split("/operations/")[0];let f;o&&"httpOptions"in o&&(f=o.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:l,config:{httpOptions:f}});return i._fromAPIResponse({apiResponse:d,isVertexAI:!0})}else{const l=await this.getVideosOperationInternal({operationName:i.name,config:o});return i._fromAPIResponse({apiResponse:l,isVertexAI:!1})}}async get(e){const i=e.operation,o=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const l=i.name.split("/operations/")[0];let f;o&&"httpOptions"in o&&(f=o.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:l,config:{httpOptions:f}});return i._fromAPIResponse({apiResponse:d,isVertexAI:!0})}else{const l=await this.getVideosOperationInternal({operationName:i.name,config:o});return i._fromAPIResponse({apiResponse:l,isVertexAI:!1})}}async getVideosOperationInternal(e){var i,o,l,f;let d,m="",g={};if(this.apiClient.isVertexAI()){const p=yT(e);return m=W("{operationName}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),d}else{const p=mT(e);return m=W("{operationName}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),d}}async fetchPredictVideosOperationInternal(e){var i,o;let l,f="",d={};if(this.apiClient.isVertexAI()){const m=gT(e);return f=W("{resourceName}:fetchPredictOperation",m._url),d=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $R(t){const e={},i=a(t,["voiceName"]);return i!=null&&u(e,["voiceName"],i),e}function ly(t){const e={},i=a(t,["prebuiltVoiceConfig"]);return i!=null&&u(e,["prebuiltVoiceConfig"],$R(i)),e}function JR(t){const e={},i=a(t,["speaker"]);i!=null&&u(e,["speaker"],i);const o=a(t,["voiceConfig"]);return o!=null&&u(e,["voiceConfig"],ly(o)),e}function YR(t){const e={},i=a(t,["speakerVoiceConfigs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>JR(l))),u(e,["speakerVoiceConfigs"],o)}return e}function KR(t){const e={},i=a(t,["voiceConfig"]);i!=null&&u(e,["voiceConfig"],ly(i));const o=a(t,["multiSpeakerVoiceConfig"]);o!=null&&u(e,["multiSpeakerVoiceConfig"],YR(o));const l=a(t,["languageCode"]);return l!=null&&u(e,["languageCode"],l),e}function XR(t){const e={},i=a(t,["fps"]);i!=null&&u(e,["fps"],i);const o=a(t,["endOffset"]);o!=null&&u(e,["endOffset"],o);const l=a(t,["startOffset"]);return l!=null&&u(e,["startOffset"],l),e}function QR(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["data"]);i!=null&&u(e,["data"],i);const o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function ZR(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["fileUri"]);i!=null&&u(e,["fileUri"],i);const o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function WR(t){const e={},i=a(t,["id"]);i!=null&&u(e,["id"],i);const o=a(t,["args"]);o!=null&&u(e,["args"],o);const l=a(t,["name"]);return l!=null&&u(e,["name"],l),e}function jR(t){const e={},i=a(t,["videoMetadata"]);i!=null&&u(e,["videoMetadata"],XR(i));const o=a(t,["thought"]);o!=null&&u(e,["thought"],o);const l=a(t,["inlineData"]);l!=null&&u(e,["inlineData"],QR(l));const f=a(t,["fileData"]);f!=null&&u(e,["fileData"],ZR(f));const d=a(t,["thoughtSignature"]);d!=null&&u(e,["thoughtSignature"],d);const m=a(t,["functionCall"]);m!=null&&u(e,["functionCall"],WR(m));const g=a(t,["codeExecutionResult"]);g!=null&&u(e,["codeExecutionResult"],g);const p=a(t,["executableCode"]);p!=null&&u(e,["executableCode"],p);const v=a(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const T=a(t,["text"]);return T!=null&&u(e,["text"],T),e}function eb(t){const e={},i=a(t,["parts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(f=>jR(f))),u(e,["parts"],l)}const o=a(t,["role"]);return o!=null&&u(e,["role"],o),e}function tb(t){const e={},i=a(t,["behavior"]);i!=null&&u(e,["behavior"],i);const o=a(t,["description"]);o!=null&&u(e,["description"],o);const l=a(t,["name"]);l!=null&&u(e,["name"],l);const f=a(t,["parameters"]);f!=null&&u(e,["parameters"],f);const d=a(t,["parametersJsonSchema"]);d!=null&&u(e,["parametersJsonSchema"],d);const m=a(t,["response"]);m!=null&&u(e,["response"],m);const g=a(t,["responseJsonSchema"]);return g!=null&&u(e,["responseJsonSchema"],g),e}function nb(t){const e={},i=a(t,["startTime"]);i!=null&&u(e,["startTime"],i);const o=a(t,["endTime"]);return o!=null&&u(e,["endTime"],o),e}function ib(t){const e={},i=a(t,["timeRangeFilter"]);if(i!=null&&u(e,["timeRangeFilter"],nb(i)),a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function ob(t){const e={},i=a(t,["mode"]);i!=null&&u(e,["mode"],i);const o=a(t,["dynamicThreshold"]);return o!=null&&u(e,["dynamicThreshold"],o),e}function sb(t){const e={},i=a(t,["dynamicRetrievalConfig"]);return i!=null&&u(e,["dynamicRetrievalConfig"],ob(i)),e}function lb(){return{}}function rb(t){const e={},i=a(t,["environment"]);return i!=null&&u(e,["environment"],i),e}function ab(t){const e={},i=a(t,["functionDeclarations"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(p=>tb(p))),u(e,["functionDeclarations"],g)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=a(t,["googleSearch"]);o!=null&&u(e,["googleSearch"],ib(o));const l=a(t,["googleSearchRetrieval"]);if(l!=null&&u(e,["googleSearchRetrieval"],sb(l)),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(a(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");a(t,["urlContext"])!=null&&u(e,["urlContext"],lb());const d=a(t,["computerUse"]);d!=null&&u(e,["computerUse"],rb(d));const m=a(t,["codeExecution"]);return m!=null&&u(e,["codeExecution"],m),e}function ub(t){const e={},i=a(t,["handle"]);if(i!=null&&u(e,["handle"],i),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function ng(){return{}}function cb(t){const e={},i=a(t,["disabled"]);i!=null&&u(e,["disabled"],i);const o=a(t,["startOfSpeechSensitivity"]);o!=null&&u(e,["startOfSpeechSensitivity"],o);const l=a(t,["endOfSpeechSensitivity"]);l!=null&&u(e,["endOfSpeechSensitivity"],l);const f=a(t,["prefixPaddingMs"]);f!=null&&u(e,["prefixPaddingMs"],f);const d=a(t,["silenceDurationMs"]);return d!=null&&u(e,["silenceDurationMs"],d),e}function fb(t){const e={},i=a(t,["automaticActivityDetection"]);i!=null&&u(e,["automaticActivityDetection"],cb(i));const o=a(t,["activityHandling"]);o!=null&&u(e,["activityHandling"],o);const l=a(t,["turnCoverage"]);return l!=null&&u(e,["turnCoverage"],l),e}function db(t){const e={},i=a(t,["targetTokens"]);return i!=null&&u(e,["targetTokens"],i),e}function hb(t){const e={},i=a(t,["triggerTokens"]);i!=null&&u(e,["triggerTokens"],i);const o=a(t,["slidingWindow"]);return o!=null&&u(e,["slidingWindow"],db(o)),e}function pb(t){const e={},i=a(t,["proactiveAudio"]);return i!=null&&u(e,["proactiveAudio"],i),e}function mb(t,e){const i={},o=a(t,["generationConfig"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig"],o);const l=a(t,["responseModalities"]);e!==void 0&&l!=null&&u(e,["setup","generationConfig","responseModalities"],l);const f=a(t,["temperature"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","temperature"],f);const d=a(t,["topP"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","topP"],d);const m=a(t,["topK"]);e!==void 0&&m!=null&&u(e,["setup","generationConfig","topK"],m);const g=a(t,["maxOutputTokens"]);e!==void 0&&g!=null&&u(e,["setup","generationConfig","maxOutputTokens"],g);const p=a(t,["mediaResolution"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","mediaResolution"],p);const v=a(t,["seed"]);e!==void 0&&v!=null&&u(e,["setup","generationConfig","seed"],v);const T=a(t,["speechConfig"]);e!==void 0&&T!=null&&u(e,["setup","generationConfig","speechConfig"],KR(xc(T)));const S=a(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],S);const E=a(t,["systemInstruction"]);e!==void 0&&E!=null&&u(e,["setup","systemInstruction"],eb(at(E)));const b=a(t,["tools"]);if(e!==void 0&&b!=null){let z=Eo(b);Array.isArray(z)&&(z=z.map(Y=>ab(Co(Y)))),u(e,["setup","tools"],z)}const N=a(t,["sessionResumption"]);e!==void 0&&N!=null&&u(e,["setup","sessionResumption"],ub(N));const L=a(t,["inputAudioTranscription"]);e!==void 0&&L!=null&&u(e,["setup","inputAudioTranscription"],ng());const q=a(t,["outputAudioTranscription"]);e!==void 0&&q!=null&&u(e,["setup","outputAudioTranscription"],ng());const V=a(t,["realtimeInputConfig"]);e!==void 0&&V!=null&&u(e,["setup","realtimeInputConfig"],fb(V));const U=a(t,["contextWindowCompression"]);e!==void 0&&U!=null&&u(e,["setup","contextWindowCompression"],hb(U));const $=a(t,["proactivity"]);return e!==void 0&&$!=null&&u(e,["setup","proactivity"],pb($)),i}function gb(t,e){const i={},o=a(e,["model"]);o!=null&&u(i,["setup","model"],Ee(t,o));const l=a(e,["config"]);return l!=null&&u(i,["config"],mb(l,i)),i}function yb(t,e,i){const o={},l=a(e,["expireTime"]);i!==void 0&&l!=null&&u(i,["expireTime"],l);const f=a(e,["newSessionExpireTime"]);i!==void 0&&f!=null&&u(i,["newSessionExpireTime"],f);const d=a(e,["uses"]);i!==void 0&&d!=null&&u(i,["uses"],d);const m=a(e,["liveConnectConstraints"]);i!==void 0&&m!=null&&u(i,["bidiGenerateContentSetup"],gb(t,m));const g=a(e,["lockAdditionalFields"]);return i!==void 0&&g!=null&&u(i,["fieldMask"],g),o}function vb(t,e){const i={},o=a(e,["config"]);return o!=null&&u(i,["config"],yb(t,o,i)),i}function Tb(t){const e={},i=a(t,["name"]);return i!=null&&u(e,["name"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _b(t){const e=[];for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const o=t[i];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const l=Object.keys(o).map(f=>`${i}.${f}`);e.push(...l)}else e.push(i)}return e.join(",")}function Sb(t,e){let i=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const f=o.setup;typeof f=="object"&&f!==null?(t.bidiGenerateContentSetup=f,i=f):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const l=t.fieldMask;if(i){const f=_b(i);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)f?t.fieldMask=f:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&l!==null&&Array.isArray(l)&&l.length>0){const d=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let m=[];l.length>0&&(m=l.map(p=>d.includes(p)?`generationConfig.${p}`:p));const g=[];f&&g.push(f),m.length>0&&g.push(...m),g.length>0?t.fieldMask=g.join(","):delete t.fieldMask}else delete t.fieldMask}else l!==null&&Array.isArray(l)&&l.length>0?t.fieldMask=l.join(","):delete t.fieldMask;return t}class Cb extends pi{constructor(e){super(),this.apiClient=e}async create(e){var i,o;let l,f="",d={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const m=vb(this.apiClient,e);f=W("auth_tokens",m._url),d=m._query,delete m.config,delete m._url,delete m._query;const g=Sb(m,e.config);return l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>Tb(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Eb(t){const e={},i=a(t,["name"]);i!=null&&u(e,["_url","name"],i);const o=a(t,["config"]);return o!=null&&u(e,["config"],o),e}function Ab(t,e){const i={},o=a(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);const l=a(t,["pageToken"]);e!==void 0&&l!=null&&u(e,["_query","pageToken"],l);const f=a(t,["filter"]);return e!==void 0&&f!=null&&u(e,["_query","filter"],f),i}function wb(t){const e={},i=a(t,["config"]);return i!=null&&u(e,["config"],Ab(i,e)),e}function xb(t){const e={},i=a(t,["name"]);i!=null&&u(e,["_url","name"],i);const o=a(t,["config"]);return o!=null&&u(e,["config"],o),e}function Rb(t){const e={},i=a(t,["textInput"]);i!=null&&u(e,["textInput"],i);const o=a(t,["output"]);return o!=null&&u(e,["output"],o),e}function bb(t){const e={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=a(t,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>Rb(l))),u(e,["examples","examples"],o)}return e}function Mb(t,e){const i={};if(a(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=a(t,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&u(e,["displayName"],o),a(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=a(t,["epochCount"]);e!==void 0&&l!=null&&u(e,["tuningTask","hyperparameters","epochCount"],l);const f=a(t,["learningRateMultiplier"]);if(f!=null&&u(i,["tuningTask","hyperparameters","learningRateMultiplier"],f),a(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(a(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(a(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=a(t,["batchSize"]);e!==void 0&&d!=null&&u(e,["tuningTask","hyperparameters","batchSize"],d);const m=a(t,["learningRate"]);if(e!==void 0&&m!=null&&u(e,["tuningTask","hyperparameters","learningRate"],m),a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return i}function Nb(t){const e={},i=a(t,["baseModel"]);i!=null&&u(e,["baseModel"],i);const o=a(t,["preTunedModel"]);o!=null&&u(e,["preTunedModel"],o);const l=a(t,["trainingDataset"]);l!=null&&u(e,["tuningTask","trainingData"],bb(l));const f=a(t,["config"]);return f!=null&&u(e,["config"],Mb(f,e)),e}function Db(t){const e={},i=a(t,["name"]);i!=null&&u(e,["_url","name"],i);const o=a(t,["config"]);return o!=null&&u(e,["config"],o),e}function Ub(t,e){const i={},o=a(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);const l=a(t,["pageToken"]);e!==void 0&&l!=null&&u(e,["_query","pageToken"],l);const f=a(t,["filter"]);return e!==void 0&&f!=null&&u(e,["_query","filter"],f),i}function Ib(t){const e={},i=a(t,["config"]);return i!=null&&u(e,["config"],Ub(i,e)),e}function kb(t){const e={},i=a(t,["name"]);i!=null&&u(e,["_url","name"],i);const o=a(t,["config"]);return o!=null&&u(e,["config"],o),e}function Pb(t,e){const i={},o=a(t,["gcsUri"]);e!==void 0&&o!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],o);const l=a(t,["vertexDatasetResource"]);if(e!==void 0&&l!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],l),a(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function Lb(t,e){const i={},o=a(t,["gcsUri"]);o!=null&&u(i,["validationDatasetUri"],o);const l=a(t,["vertexDatasetResource"]);return e!==void 0&&l!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],l),i}function qb(t,e){const i={},o=a(t,["validationDataset"]);e!==void 0&&o!=null&&u(e,["supervisedTuningSpec"],Lb(o,i));const l=a(t,["tunedModelDisplayName"]);e!==void 0&&l!=null&&u(e,["tunedModelDisplayName"],l);const f=a(t,["description"]);e!==void 0&&f!=null&&u(e,["description"],f);const d=a(t,["epochCount"]);e!==void 0&&d!=null&&u(e,["supervisedTuningSpec","hyperParameters","epochCount"],d);const m=a(t,["learningRateMultiplier"]);e!==void 0&&m!=null&&u(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],m);const g=a(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&u(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g);const p=a(t,["preTunedModelCheckpointId"]);p!=null&&u(i,["preTunedModel","checkpointId"],p);const v=a(t,["adapterSize"]);if(e!==void 0&&v!=null&&u(e,["supervisedTuningSpec","hyperParameters","adapterSize"],v),a(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(a(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const T=a(t,["labels"]);return e!==void 0&&T!=null&&u(e,["labels"],T),i}function Vb(t){const e={},i=a(t,["baseModel"]);i!=null&&u(e,["baseModel"],i);const o=a(t,["preTunedModel"]);o!=null&&u(e,["preTunedModel"],o);const l=a(t,["trainingDataset"]);l!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],Pb(l,e));const f=a(t,["config"]);return f!=null&&u(e,["config"],qb(f,e)),e}function Bb(t){const e={},i=a(t,["name"]);i!=null&&u(e,["model"],i);const o=a(t,["name"]);return o!=null&&u(e,["endpoint"],o),e}function ry(t){const e={},i=a(t,["sdkHttpResponse"]);i!=null&&u(e,["sdkHttpResponse"],i);const o=a(t,["name"]);o!=null&&u(e,["name"],o);const l=a(t,["state"]);l!=null&&u(e,["state"],Ig(l));const f=a(t,["createTime"]);f!=null&&u(e,["createTime"],f);const d=a(t,["tuningTask","startTime"]);d!=null&&u(e,["startTime"],d);const m=a(t,["tuningTask","completeTime"]);m!=null&&u(e,["endTime"],m);const g=a(t,["updateTime"]);g!=null&&u(e,["updateTime"],g);const p=a(t,["description"]);p!=null&&u(e,["description"],p);const v=a(t,["baseModel"]);v!=null&&u(e,["baseModel"],v);const T=a(t,["_self"]);T!=null&&u(e,["tunedModel"],Bb(T));const S=a(t,["customBaseModel"]);S!=null&&u(e,["customBaseModel"],S);const E=a(t,["experiment"]);E!=null&&u(e,["experiment"],E);const b=a(t,["labels"]);b!=null&&u(e,["labels"],b);const N=a(t,["outputUri"]);N!=null&&u(e,["outputUri"],N);const L=a(t,["pipelineJob"]);L!=null&&u(e,["pipelineJob"],L);const q=a(t,["serviceAccount"]);q!=null&&u(e,["serviceAccount"],q);const V=a(t,["tunedModelDisplayName"]);return V!=null&&u(e,["tunedModelDisplayName"],V),e}function Gb(t){const e={},i=a(t,["sdkHttpResponse"]);i!=null&&u(e,["sdkHttpResponse"],i);const o=a(t,["nextPageToken"]);o!=null&&u(e,["nextPageToken"],o);const l=a(t,["tunedModels"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(d=>ry(d))),u(e,["tuningJobs"],f)}return e}function Ob(t){const e={},i=a(t,["sdkHttpResponse"]);i!=null&&u(e,["sdkHttpResponse"],i);const o=a(t,["name"]);o!=null&&u(e,["name"],o);const l=a(t,["metadata"]);l!=null&&u(e,["metadata"],l);const f=a(t,["done"]);f!=null&&u(e,["done"],f);const d=a(t,["error"]);return d!=null&&u(e,["error"],d),e}function Hb(t){const e={},i=a(t,["checkpointId"]);i!=null&&u(e,["checkpointId"],i);const o=a(t,["epoch"]);o!=null&&u(e,["epoch"],o);const l=a(t,["step"]);l!=null&&u(e,["step"],l);const f=a(t,["endpoint"]);return f!=null&&u(e,["endpoint"],f),e}function Fb(t){const e={},i=a(t,["model"]);i!=null&&u(e,["model"],i);const o=a(t,["endpoint"]);o!=null&&u(e,["endpoint"],o);const l=a(t,["checkpoints"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(d=>Hb(d))),u(e,["checkpoints"],f)}return e}function rc(t){const e={},i=a(t,["sdkHttpResponse"]);i!=null&&u(e,["sdkHttpResponse"],i);const o=a(t,["name"]);o!=null&&u(e,["name"],o);const l=a(t,["state"]);l!=null&&u(e,["state"],Ig(l));const f=a(t,["createTime"]);f!=null&&u(e,["createTime"],f);const d=a(t,["startTime"]);d!=null&&u(e,["startTime"],d);const m=a(t,["endTime"]);m!=null&&u(e,["endTime"],m);const g=a(t,["updateTime"]);g!=null&&u(e,["updateTime"],g);const p=a(t,["error"]);p!=null&&u(e,["error"],p);const v=a(t,["description"]);v!=null&&u(e,["description"],v);const T=a(t,["baseModel"]);T!=null&&u(e,["baseModel"],T);const S=a(t,["tunedModel"]);S!=null&&u(e,["tunedModel"],Fb(S));const E=a(t,["preTunedModel"]);E!=null&&u(e,["preTunedModel"],E);const b=a(t,["supervisedTuningSpec"]);b!=null&&u(e,["supervisedTuningSpec"],b);const N=a(t,["tuningDataStats"]);N!=null&&u(e,["tuningDataStats"],N);const L=a(t,["encryptionSpec"]);L!=null&&u(e,["encryptionSpec"],L);const q=a(t,["partnerModelTuningSpec"]);q!=null&&u(e,["partnerModelTuningSpec"],q);const V=a(t,["customBaseModel"]);V!=null&&u(e,["customBaseModel"],V);const U=a(t,["experiment"]);U!=null&&u(e,["experiment"],U);const $=a(t,["labels"]);$!=null&&u(e,["labels"],$);const z=a(t,["outputUri"]);z!=null&&u(e,["outputUri"],z);const Y=a(t,["pipelineJob"]);Y!=null&&u(e,["pipelineJob"],Y);const Z=a(t,["serviceAccount"]);Z!=null&&u(e,["serviceAccount"],Z);const ue=a(t,["tunedModelDisplayName"]);return ue!=null&&u(e,["tunedModelDisplayName"],ue),e}function zb(t){const e={},i=a(t,["sdkHttpResponse"]);i!=null&&u(e,["sdkHttpResponse"],i);const o=a(t,["nextPageToken"]);o!=null&&u(e,["nextPageToken"],o);const l=a(t,["tuningJobs"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(d=>rc(d))),u(e,["tuningJobs"],f)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $b extends pi{constructor(e){super(),this.apiClient=e,this.get=async i=>await this.getInternal(i),this.list=async(i={})=>new ks(hi.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(i),i),this.tune=async i=>{if(this.apiClient.isVertexAI())if(i.baseModel.startsWith("projects/")){const o={tunedModelName:i.baseModel},l=Object.assign(Object.assign({},i),{preTunedModel:o});return l.baseModel=void 0,await this.tuneInternal(l)}else{const o=Object.assign({},i);return await this.tuneInternal(o)}else{const o=Object.assign({},i),l=await this.tuneMldevInternal(o);let f="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?f=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(f=l.name.split("/operations/")[0]),{name:f,state:Wu.JOB_STATE_QUEUED}}}}async getInternal(e){var i,o,l,f;let d,m="",g={};if(this.apiClient.isVertexAI()){const p=Db(e);return m=W("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>rc(v))}else{const p=Eb(e);return m=W("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>ry(v))}}async listInternal(e){var i,o,l,f;let d,m="",g={};if(this.apiClient.isVertexAI()){const p=Ib(e);return m=W("tuningJobs",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const T=zb(v),S=new Um;return Object.assign(S,T),S})}else{const p=wb(e);return m=W("tunedModels",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const T=Gb(v),S=new Um;return Object.assign(S,T),S})}}async cancel(e){var i,o,l,f;let d="",m={};if(this.apiClient.isVertexAI()){const g=kb(e);d=W("{name}:cancel",g._url),m=g._query,delete g.config,delete g._url,delete g._query,await this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const g=xb(e);d=W("{name}:cancel",g._url),m=g._query,delete g.config,delete g._url,delete g._query,await this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal})}}async tuneInternal(e){var i,o;let l,f="",d={};if(this.apiClient.isVertexAI()){const m=Vb(e);return f=W("tuningJobs",m._url),d=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>rc(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var i,o;let l,f="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=Nb(e);return f=W("tunedModels",m._url),d=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>Ob(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jb{async download(e,i){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Yb=1024*1024*8,Kb=3,Xb=1e3,Qb=2,Fu="x-goog-upload-status";async function Zb(t,e,i){var o,l,f;let d=0,m=0,g=new ju(new Response),p="upload";for(d=t.size;m<d;){const T=Math.min(Yb,d-m),S=t.slice(m,m+T);m+T>=d&&(p+=", finalize");let E=0,b=Xb;for(;E<Kb&&(g=await i.request({path:"",body:S,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(m),"Content-Length":String(T)}}}),!(!((o=g==null?void 0:g.headers)===null||o===void 0)&&o[Fu]));)E++,await jb(b),b=b*Qb;if(m+=T,((l=g==null?void 0:g.headers)===null||l===void 0?void 0:l[Fu])!=="active")break;if(d<=m)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const v=await(g==null?void 0:g.json());if(((f=g==null?void 0:g.headers)===null||f===void 0?void 0:f[Fu])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return v.file}async function Wb(t){return{size:t.size,type:t.type}}function jb(t){return new Promise(e=>setTimeout(e,t))}class eM{async upload(e,i,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Zb(e,i,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Wb(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tM{create(e,i,o){return new nM(e,i,o)}}class nM{constructor(e,i,o){this.url=e,this.headers=i,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ig="x-goog-api-key";class iM{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(ig)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(ig,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oM="gl-node/";class sM{constructor(e){var i;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(i=e.vertexai)!==null&&i!==void 0?i:!1,this.apiKey=e.apiKey;const o=pT(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion;const l=new iM(this.apiKey);this.apiClient=new ER({auth:l,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:oM+"web",uploader:new eM,downloader:new Jb}),this.models=new FR(this.apiClient),this.live=new LR(this.apiClient,l,new tM),this.batches=new sS(this.apiClient),this.chats=new hC(this.models,this.apiClient),this.caches=new cC(this.apiClient),this.files=new xC(this.apiClient),this.operations=new zR(this.apiClient),this.authTokens=new Cb(this.apiClient),this.tunings=new $b(this.apiClient)}}const lM={type:ft.OBJECT,properties:{title:{type:ft.STRING},author:{type:ft.STRING},publicationYear:{type:ft.STRING},genre:{type:ft.STRING},description:{type:ft.STRING}},required:["title","author","publicationYear","genre","description"]},rM=async(t,e,i)=>{if(!t)throw new Error("Gemini API key is not configured. Please add it in the settings.");const o=new sM({apiKey:t}),l="gemini-2.5-flash",f={text:`
      Analyze the provided image containing books. Identify each distinct book visible. For each book, extract the following details with high accuracy:
      1. The full title of the book.
      2. The full name of the author.
      3. The year the book was FIRST published.
      4. The primary literary genre of the book (e.g., Fiction, Sci-Fi, History).
      5. A concise, one-sentence description of the book's content or plot.

      If any piece of information cannot be determined, use the string "Unknown". Return the data for all identified books in the specified JSON format.
    `},d={inlineData:{data:e,mimeType:i}};try{const g=(await o.models.generateContent({model:l,contents:{parts:[d,f]},config:{responseMimeType:"application/json",responseSchema:{type:ft.ARRAY,items:lM}}})).text.trim();return JSON.parse(g).map(T=>({title:T.title,author:T.author,publicationYear:T.publicationYear,genre:T.genre,description:T.description}))}catch(m){throw console.error("Gemini API call failed:",m),new Error("Failed to get a valid response from the AI model. Please check if your Gemini API key is correct and has been entered in the settings.")}},Ms=t=>{const e=t.trim().split(`
`);if(e.length<2)return[];const i=e[0].replace(/^\uFEFF/,"").split(",").map(p=>p.trim().replace(/^"|"$/g,"")),o=p=>{for(const v of p){const T=i.findIndex(S=>S.toLowerCase()===v.toLowerCase());if(T!==-1)return T}return-1},l=o(["title","name"]),f=o(["author","authors"]),d=o(["publicationyear","first published year","published","year"]),m=o(["genre","category"]),g=o(["description","summary","desc"]);if(l===-1||f===-1)throw new Error("CSV must contain 'Title' and 'Author' columns.");return e.slice(1).map(p=>{if(!p.trim())return null;const v=p.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/).map(T=>T.trim().replace(/^"|"$/g,"").trim());return{title:v[l]||"Unknown",author:v[f]||"Unknown",publicationYear:d!==-1&&v[d]||"Unknown",genre:m!==-1&&v[m]||"Unknown",description:g!==-1&&v[g]||"Unknown"}}).filter(p=>p!==null)},rr=t=>{const e="Title,Author,First Published Year,Genre,Description";if(!t||t.length===0)return e;const i=t.map(o=>`"${String(o.title||"").replace(/"/g,'""')}","${String(o.author||"").replace(/"/g,'""')}",${o.publicationYear},"${String(o.genre||"").replace(/"/g,'""')}","${String(o.description||"").replace(/"/g,'""')}"`);return[e,...i].join(`
`)},aM=(t,e)=>{const i=(l,f)=>f.some(d=>d.title.toLowerCase().trim()===l.title.toLowerCase().trim()&&d.author.toLowerCase().trim()===l.author.toLowerCase().trim()),o=e.filter(l=>!i(l,t));return{mergedBooks:[...t,...o],addedCount:o.length}},uM=({onFileUpload:t,onTakePhotoClick:e})=>{const[i,o]=se.useState(!1),l=se.useCallback(p=>{p.preventDefault(),p.stopPropagation(),o(!0)},[]),f=se.useCallback(p=>{p.preventDefault(),p.stopPropagation(),o(!1)},[]),d=se.useCallback(p=>{p.preventDefault(),p.stopPropagation()},[]),m=se.useCallback(p=>{p.preventDefault(),p.stopPropagation(),o(!1),p.dataTransfer.files&&p.dataTransfer.files.length>0&&t(p.dataTransfer.files[0])},[t]),g=p=>{p.target.files&&p.target.files.length>0&&t(p.target.files[0])};return A.jsxs("div",{className:"flex flex-col items-center",children:[A.jsxs("div",{className:`relative flex flex-col items-center justify-center w-full h-64 border-2 border-dashed rounded-lg cursor-pointer transition-colors duration-300 ${i?"border-blue-400 bg-gray-700":"border-gray-600 bg-gray-800 hover:bg-gray-700"}`,onDragEnter:l,onDragLeave:f,onDragOver:d,onDrop:m,children:[A.jsx("input",{type:"file",id:"file-upload",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",accept:"image/png, image/jpeg, image/webp, text/csv, text/plain",onChange:g}),A.jsxs("label",{htmlFor:"file-upload",className:"flex flex-col items-center justify-center pt-5 pb-6 text-gray-400 cursor-pointer",children:[A.jsx("svg",{className:"w-10 h-10 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),A.jsxs("p",{className:"mb-2 text-sm",children:[A.jsx("span",{className:"font-semibold text-blue-400",children:"Click to upload"})," or drag and drop"]}),A.jsx("p",{className:"text-xs",children:"Image (PNG, JPG), CSV, or TXT file"})]})]}),A.jsxs("div",{className:"flex items-center my-6 w-full max-w-md",children:[A.jsx("div",{className:"flex-grow border-t border-gray-600"}),A.jsx("span",{className:"flex-shrink mx-4 text-gray-400 uppercase text-sm font-semibold",children:"Or"}),A.jsx("div",{className:"flex-grow border-t border-gray-600"})]}),A.jsxs("button",{onClick:e,className:"w-full sm:w-auto flex items-center justify-center gap-3 font-bold py-3 px-8 rounded-lg shadow-md transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900 bg-teal-600 text-white hover:bg-teal-500 focus:ring-teal-500","aria-label":"Use camera to take a picture",children:[A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),A.jsx("span",{children:"Use Your Camera"})]})]})},cM="modulepreload",fM=function(t){return"/bookshelf_AI/"+t},og={},Ps=function(e,i,o){let l=Promise.resolve();if(i&&i.length>0){let d=function(p){return Promise.all(p.map(v=>Promise.resolve(v).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),g=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));l=d(i.map(p=>{if(p=fM(p),p in og)return;og[p]=!0;const v=p.endsWith(".css"),T=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${T}`))return;const S=document.createElement("link");if(S.rel=v?"stylesheet":cM,v||(S.as="script"),S.crossOrigin="",S.href=p,g&&S.setAttribute("nonce",g),document.head.appendChild(S),v)return new Promise((E,b)=>{S.addEventListener("load",E),S.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${p}`)))})}))}function f(d){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=d,window.dispatchEvent(m),!m.defaultPrevented)throw d}return l.then(d=>{for(const m of d||[])m.status==="rejected"&&f(m.reason);return e().catch(f)})},dM=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...i)=>Ps(async()=>{const{default:o}=await Promise.resolve().then(()=>xo);return{default:o}},void 0).then(({default:o})=>o(...i)):e=fetch,(...i)=>e(...i)};class Mc extends Error{constructor(e,i="FunctionsError",o){super(e),this.name=i,this.context=o}}class hM extends Mc{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class sg extends Mc{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class lg extends Mc{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ac;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(ac||(ac={}));var pM=function(t,e,i,o){function l(f){return f instanceof i?f:new i(function(d){d(f)})}return new(i||(i=Promise))(function(f,d){function m(v){try{p(o.next(v))}catch(T){d(T)}}function g(v){try{p(o.throw(v))}catch(T){d(T)}}function p(v){v.done?f(v.value):l(v.value).then(m,g)}p((o=o.apply(t,e||[])).next())})};class mM{constructor(e,{headers:i={},customFetch:o,region:l=ac.Any}={}){this.url=e,this.headers=i,this.region=l,this.fetch=dM(o)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,i={}){var o;return pM(this,void 0,void 0,function*(){try{const{headers:l,method:f,body:d}=i;let m={},{region:g}=i;g||(g=this.region);const p=new URL(`${this.url}/${e}`);g&&g!=="any"&&(m["x-region"]=g,p.searchParams.set("forceFunctionRegion",g));let v;d&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)&&(typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",v=d):typeof d=="string"?(m["Content-Type"]="text/plain",v=d):typeof FormData<"u"&&d instanceof FormData?v=d:(m["Content-Type"]="application/json",v=JSON.stringify(d)));const T=yield this.fetch(p.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),l),body:v}).catch(N=>{throw new hM(N)}),S=T.headers.get("x-relay-error");if(S&&S==="true")throw new sg(T);if(!T.ok)throw new lg(T);let E=((o=T.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),b;return E==="application/json"?b=yield T.json():E==="application/octet-stream"?b=yield T.blob():E==="text/event-stream"?b=T:E==="multipart/form-data"?b=yield T.formData():b=yield T.text(),{data:b,error:null,response:T}}catch(l){return{data:null,error:l,response:l instanceof lg||l instanceof sg?l.context:void 0}}})}}var et={},no={},io={},oo={},so={},lo={},gM=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},_o=gM();const yM=_o.fetch,ay=_o.fetch.bind(_o),uy=_o.Headers,vM=_o.Request,TM=_o.Response,xo=Object.freeze(Object.defineProperty({__proto__:null,Headers:uy,Request:vM,Response:TM,default:ay,fetch:yM},Symbol.toStringTag,{value:"Module"})),_M=Q0(xo);var er={},rg;function cy(){if(rg)return er;rg=1,Object.defineProperty(er,"__esModule",{value:!0});class t extends Error{constructor(i){super(i.message),this.name="PostgrestError",this.details=i.details,this.hint=i.hint,this.code=i.code}}return er.default=t,er}var ag;function fy(){if(ag)return lo;ag=1;var t=lo&&lo.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(lo,"__esModule",{value:!0});const e=t(_M),i=t(cy());class o{constructor(f){var d,m;this.shouldThrowOnError=!1,this.method=f.method,this.url=f.url,this.headers=new Headers(f.headers),this.schema=f.schema,this.body=f.body,this.shouldThrowOnError=(d=f.shouldThrowOnError)!==null&&d!==void 0?d:!1,this.signal=f.signal,this.isMaybeSingle=(m=f.isMaybeSingle)!==null&&m!==void 0?m:!1,f.fetch?this.fetch=f.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(f,d){return this.headers=new Headers(this.headers),this.headers.set(f,d),this}then(f,d){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const m=this.fetch;let g=m(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var v,T,S,E;let b=null,N=null,L=null,q=p.status,V=p.statusText;if(p.ok){if(this.method!=="HEAD"){const Y=await p.text();Y===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((v=this.headers.get("Accept"))===null||v===void 0)&&v.includes("application/vnd.pgrst.plan+text"))?N=Y:N=JSON.parse(Y))}const $=(T=this.headers.get("Prefer"))===null||T===void 0?void 0:T.match(/count=(exact|planned|estimated)/),z=(S=p.headers.get("content-range"))===null||S===void 0?void 0:S.split("/");$&&z&&z.length>1&&(L=parseInt(z[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(N)&&(N.length>1?(b={code:"PGRST116",details:`Results contain ${N.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},N=null,L=null,q=406,V="Not Acceptable"):N.length===1?N=N[0]:N=null)}else{const $=await p.text();try{b=JSON.parse($),Array.isArray(b)&&p.status===404&&(N=[],b=null,q=200,V="OK")}catch{p.status===404&&$===""?(q=204,V="No Content"):b={message:$}}if(b&&this.isMaybeSingle&&(!((E=b==null?void 0:b.details)===null||E===void 0)&&E.includes("0 rows"))&&(b=null,q=200,V="OK"),b&&this.shouldThrowOnError)throw new i.default(b)}return{error:b,data:N,count:L,status:q,statusText:V}});return this.shouldThrowOnError||(g=g.catch(p=>{var v,T,S;return{error:{message:`${(v=p==null?void 0:p.name)!==null&&v!==void 0?v:"FetchError"}: ${p==null?void 0:p.message}`,details:`${(T=p==null?void 0:p.stack)!==null&&T!==void 0?T:""}`,hint:"",code:`${(S=p==null?void 0:p.code)!==null&&S!==void 0?S:""}`},data:null,count:null,status:0,statusText:""}})),g.then(f,d)}returns(){return this}overrideTypes(){return this}}return lo.default=o,lo}var ug;function dy(){if(ug)return so;ug=1;var t=so&&so.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(so,"__esModule",{value:!0});const e=t(fy());class i extends e.default{select(l){let f=!1;const d=(l??"*").split("").map(m=>/\s/.test(m)&&!f?"":(m==='"'&&(f=!f),m)).join("");return this.url.searchParams.set("select",d),this.headers.append("Prefer","return=representation"),this}order(l,{ascending:f=!0,nullsFirst:d,foreignTable:m,referencedTable:g=m}={}){const p=g?`${g}.order`:"order",v=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${v?`${v},`:""}${l}.${f?"asc":"desc"}${d===void 0?"":d?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:f,referencedTable:d=f}={}){const m=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(m,`${l}`),this}range(l,f,{foreignTable:d,referencedTable:m=d}={}){const g=typeof m>"u"?"offset":`${m}.offset`,p=typeof m>"u"?"limit":`${m}.limit`;return this.url.searchParams.set(g,`${l}`),this.url.searchParams.set(p,`${f-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:l=!1,verbose:f=!1,settings:d=!1,buffers:m=!1,wal:g=!1,format:p="text"}={}){var v;const T=[l?"analyze":null,f?"verbose":null,d?"settings":null,m?"buffers":null,g?"wal":null].filter(Boolean).join("|"),S=(v=this.headers.get("Accept"))!==null&&v!==void 0?v:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${S}"; options=${T};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(l){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${l}`),this}}return so.default=i,so}var cg;function Nc(){if(cg)return oo;cg=1;var t=oo&&oo.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(oo,"__esModule",{value:!0});const e=t(dy());class i extends e.default{eq(l,f){return this.url.searchParams.append(l,`eq.${f}`),this}neq(l,f){return this.url.searchParams.append(l,`neq.${f}`),this}gt(l,f){return this.url.searchParams.append(l,`gt.${f}`),this}gte(l,f){return this.url.searchParams.append(l,`gte.${f}`),this}lt(l,f){return this.url.searchParams.append(l,`lt.${f}`),this}lte(l,f){return this.url.searchParams.append(l,`lte.${f}`),this}like(l,f){return this.url.searchParams.append(l,`like.${f}`),this}likeAllOf(l,f){return this.url.searchParams.append(l,`like(all).{${f.join(",")}}`),this}likeAnyOf(l,f){return this.url.searchParams.append(l,`like(any).{${f.join(",")}}`),this}ilike(l,f){return this.url.searchParams.append(l,`ilike.${f}`),this}ilikeAllOf(l,f){return this.url.searchParams.append(l,`ilike(all).{${f.join(",")}}`),this}ilikeAnyOf(l,f){return this.url.searchParams.append(l,`ilike(any).{${f.join(",")}}`),this}is(l,f){return this.url.searchParams.append(l,`is.${f}`),this}in(l,f){const d=Array.from(new Set(f)).map(m=>typeof m=="string"&&new RegExp("[,()]").test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(l,`in.(${d})`),this}contains(l,f){return typeof f=="string"?this.url.searchParams.append(l,`cs.${f}`):Array.isArray(f)?this.url.searchParams.append(l,`cs.{${f.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(f)}`),this}containedBy(l,f){return typeof f=="string"?this.url.searchParams.append(l,`cd.${f}`):Array.isArray(f)?this.url.searchParams.append(l,`cd.{${f.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(f)}`),this}rangeGt(l,f){return this.url.searchParams.append(l,`sr.${f}`),this}rangeGte(l,f){return this.url.searchParams.append(l,`nxl.${f}`),this}rangeLt(l,f){return this.url.searchParams.append(l,`sl.${f}`),this}rangeLte(l,f){return this.url.searchParams.append(l,`nxr.${f}`),this}rangeAdjacent(l,f){return this.url.searchParams.append(l,`adj.${f}`),this}overlaps(l,f){return typeof f=="string"?this.url.searchParams.append(l,`ov.${f}`):this.url.searchParams.append(l,`ov.{${f.join(",")}}`),this}textSearch(l,f,{config:d,type:m}={}){let g="";m==="plain"?g="pl":m==="phrase"?g="ph":m==="websearch"&&(g="w");const p=d===void 0?"":`(${d})`;return this.url.searchParams.append(l,`${g}fts${p}.${f}`),this}match(l){return Object.entries(l).forEach(([f,d])=>{this.url.searchParams.append(f,`eq.${d}`)}),this}not(l,f,d){return this.url.searchParams.append(l,`not.${f}.${d}`),this}or(l,{foreignTable:f,referencedTable:d=f}={}){const m=d?`${d}.or`:"or";return this.url.searchParams.append(m,`(${l})`),this}filter(l,f,d){return this.url.searchParams.append(l,`${f}.${d}`),this}}return oo.default=i,oo}var fg;function hy(){if(fg)return io;fg=1;var t=io&&io.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(io,"__esModule",{value:!0});const e=t(Nc());class i{constructor(l,{headers:f={},schema:d,fetch:m}){this.url=l,this.headers=new Headers(f),this.schema=d,this.fetch=m}select(l,{head:f=!1,count:d}={}){const m=f?"HEAD":"GET";let g=!1;const p=(l??"*").split("").map(v=>/\s/.test(v)&&!g?"":(v==='"'&&(g=!g),v)).join("");return this.url.searchParams.set("select",p),d&&this.headers.append("Prefer",`count=${d}`),new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(l,{count:f,defaultToNull:d=!0}={}){var m;const g="POST";if(f&&this.headers.append("Prefer",`count=${f}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const p=l.reduce((v,T)=>v.concat(Object.keys(T)),[]);if(p.length>0){const v=[...new Set(p)].map(T=>`"${T}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}upsert(l,{onConflict:f,ignoreDuplicates:d=!1,count:m,defaultToNull:g=!0}={}){var p;const v="POST";if(this.headers.append("Prefer",`resolution=${d?"ignore":"merge"}-duplicates`),f!==void 0&&this.url.searchParams.set("on_conflict",f),m&&this.headers.append("Prefer",`count=${m}`),g||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const T=l.reduce((S,E)=>S.concat(Object.keys(E)),[]);if(T.length>0){const S=[...new Set(T)].map(E=>`"${E}"`);this.url.searchParams.set("columns",S.join(","))}}return new e.default({method:v,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(l,{count:f}={}){var d;const m="PATCH";return f&&this.headers.append("Prefer",`count=${f}`),new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}delete({count:l}={}){var f;const d="DELETE";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}}return io.default=i,io}var dg;function SM(){if(dg)return no;dg=1;var t=no&&no.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(no,"__esModule",{value:!0});const e=t(hy()),i=t(Nc());class o{constructor(f,{headers:d={},schema:m,fetch:g}={}){this.url=f,this.headers=new Headers(d),this.schemaName=m,this.fetch=g}from(f){const d=new URL(`${this.url}/${f}`);return new e.default(d,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(f){return new o(this.url,{headers:this.headers,schema:f,fetch:this.fetch})}rpc(f,d={},{head:m=!1,get:g=!1,count:p}={}){var v;let T;const S=new URL(`${this.url}/rpc/${f}`);let E;m||g?(T=m?"HEAD":"GET",Object.entries(d).filter(([N,L])=>L!==void 0).map(([N,L])=>[N,Array.isArray(L)?`{${L.join(",")}}`:`${L}`]).forEach(([N,L])=>{S.searchParams.append(N,L)})):(T="POST",E=d);const b=new Headers(this.headers);return p&&b.set("Prefer",`count=${p}`),new i.default({method:T,url:S,headers:b,schema:this.schemaName,body:E,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}}return no.default=o,no}var hg;function CM(){if(hg)return et;hg=1;var t=et&&et.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(et,"__esModule",{value:!0}),et.PostgrestError=et.PostgrestBuilder=et.PostgrestTransformBuilder=et.PostgrestFilterBuilder=et.PostgrestQueryBuilder=et.PostgrestClient=void 0;const e=t(SM());et.PostgrestClient=e.default;const i=t(hy());et.PostgrestQueryBuilder=i.default;const o=t(Nc());et.PostgrestFilterBuilder=o.default;const l=t(dy());et.PostgrestTransformBuilder=l.default;const f=t(fy());et.PostgrestBuilder=f.default;const d=t(cy());return et.PostgrestError=d.default,et.default={PostgrestClient:e.default,PostgrestQueryBuilder:i.default,PostgrestFilterBuilder:o.default,PostgrestTransformBuilder:l.default,PostgrestBuilder:f.default,PostgrestError:d.default},et}var EM=CM();const AM=_c(EM),{PostgrestClient:wM,PostgrestQueryBuilder:_D,PostgrestFilterBuilder:SD,PostgrestTransformBuilder:CD,PostgrestBuilder:ED,PostgrestError:AD}=AM;class xM{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const i=process.versions;if(i&&i.node){const o=i.node,l=parseInt(o.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let i=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(i+=`

Suggested solution: ${e.workaround}`),new Error(i)}static createWebSocket(e,i){const o=this.getWebSocketConstructor();return new o(e,i)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const RM="2.15.5",bM=`realtime-js/${RM}`,MM="1.0.0",uc=1e4,NM=1e3,DM=100;var Ns;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ns||(Ns={}));var Ke;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ke||(Ke={}));var Ht;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ht||(Ht={}));var cc;(function(t){t.websocket="websocket"})(cc||(cc={}));var di;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(di||(di={}));class UM{constructor(){this.HEADER_LENGTH=1}decode(e,i){return e.constructor===ArrayBuffer?i(this._binaryDecode(e)):i(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const i=new DataView(e),o=new TextDecoder;return this._decodeBroadcast(e,i,o)}_decodeBroadcast(e,i,o){const l=i.getUint8(1),f=i.getUint8(2);let d=this.HEADER_LENGTH+2;const m=o.decode(e.slice(d,d+l));d=d+l;const g=o.decode(e.slice(d,d+f));d=d+f;const p=JSON.parse(o.decode(e.slice(d,e.byteLength)));return{ref:null,topic:m,event:g,payload:p}}}class py{constructor(e,i){this.callback=e,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ie;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ie||(Ie={}));const pg=(t,e,i={})=>{var o;const l=(o=i.skipTypes)!==null&&o!==void 0?o:[];return Object.keys(e).reduce((f,d)=>(f[d]=IM(d,t,e,l),f),{})},IM=(t,e,i,o)=>{const l=e.find(m=>m.name===t),f=l==null?void 0:l.type,d=i[t];return f&&!o.includes(f)?my(f,d):fc(d)},my=(t,e)=>{if(t.charAt(0)==="_"){const i=t.slice(1,t.length);return qM(e,i)}switch(t){case Ie.bool:return kM(e);case Ie.float4:case Ie.float8:case Ie.int2:case Ie.int4:case Ie.int8:case Ie.numeric:case Ie.oid:return PM(e);case Ie.json:case Ie.jsonb:return LM(e);case Ie.timestamp:return VM(e);case Ie.abstime:case Ie.date:case Ie.daterange:case Ie.int4range:case Ie.int8range:case Ie.money:case Ie.reltime:case Ie.text:case Ie.time:case Ie.timestamptz:case Ie.timetz:case Ie.tsrange:case Ie.tstzrange:return fc(e);default:return fc(e)}},fc=t=>t,kM=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},PM=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},LM=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},qM=(t,e)=>{if(typeof t!="string")return t;const i=t.length-1,o=t[i];if(t[0]==="{"&&o==="}"){let f;const d=t.slice(1,i);try{f=JSON.parse("["+d+"]")}catch{f=d?d.split(","):[]}return f.map(m=>my(e,m))}return t},VM=t=>typeof t=="string"?t.replace(" ","T"):t,gy=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class zu{constructor(e,i,o={},l=uc){this.channel=e,this.event=i,this.payload=o,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,i){var o;return this._hasReceived(e)&&i((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:e,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:i}){this.recHooks.filter(o=>o.status===e).forEach(o=>o.callback(i))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var mg;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(mg||(mg={}));class Ds{constructor(e,i){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=(i==null?void 0:i.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},l=>{const{onJoin:f,onLeave:d,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ds.syncState(this.state,l,f,d),this.pendingDiffs.forEach(g=>{this.state=Ds.syncDiff(this.state,g,f,d)}),this.pendingDiffs=[],m()}),this.channel._on(o.diff,{},l=>{const{onJoin:f,onLeave:d,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=Ds.syncDiff(this.state,l,f,d),m())}),this.onJoin((l,f,d)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:f,newPresences:d})}),this.onLeave((l,f,d)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:f,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,i,o,l){const f=this.cloneDeep(e),d=this.transformState(i),m={},g={};return this.map(f,(p,v)=>{d[p]||(g[p]=v)}),this.map(d,(p,v)=>{const T=f[p];if(T){const S=v.map(L=>L.presence_ref),E=T.map(L=>L.presence_ref),b=v.filter(L=>E.indexOf(L.presence_ref)<0),N=T.filter(L=>S.indexOf(L.presence_ref)<0);b.length>0&&(m[p]=b),N.length>0&&(g[p]=N)}else m[p]=v}),this.syncDiff(f,{joins:m,leaves:g},o,l)}static syncDiff(e,i,o,l){const{joins:f,leaves:d}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return o||(o=()=>{}),l||(l=()=>{}),this.map(f,(m,g)=>{var p;const v=(p=e[m])!==null&&p!==void 0?p:[];if(e[m]=this.cloneDeep(g),v.length>0){const T=e[m].map(E=>E.presence_ref),S=v.filter(E=>T.indexOf(E.presence_ref)<0);e[m].unshift(...S)}o(m,v,g)}),this.map(d,(m,g)=>{let p=e[m];if(!p)return;const v=g.map(T=>T.presence_ref);p=p.filter(T=>v.indexOf(T.presence_ref)<0),e[m]=p,l(m,p,g),p.length===0&&delete e[m]}),e}static map(e,i){return Object.getOwnPropertyNames(e).map(o=>i(o,e[o]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((i,o)=>{const l=e[o];return"metas"in l?i[o]=l.metas.map(f=>(f.presence_ref=f.phx_ref,delete f.phx_ref,delete f.phx_ref_prev,f)):i[o]=l,i},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var gg;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(gg||(gg={}));var Us;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Us||(Us={}));var pn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(pn||(pn={}));class Dc{constructor(e,i={config:{}},o){this.topic=e,this.params=i,this.socket=o,this.bindings={},this.state=Ke.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new zu(this,Ht.join,this.params,this.timeout),this.rejoinTimer=new py(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ke.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ke.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Ke.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ke.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Ke.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ht.reply,{},(l,f)=>{this._trigger(this._replyEventName(f),l)}),this.presence=new Ds(this),this.broadcastEndpointURL=gy(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,i=this.timeout){var o,l,f;if(this.socket.isConnected()||this.socket.connect(),this.state==Ke.closed){const{config:{broadcast:d,presence:m,private:g}}=this.params,p=(l=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(E=>E.filter))!==null&&l!==void 0?l:[],v=!!this.bindings[Us.PRESENCE]&&this.bindings[Us.PRESENCE].length>0||((f=this.params.config.presence)===null||f===void 0?void 0:f.enabled)===!0,T={},S={broadcast:d,presence:Object.assign(Object.assign({},m),{enabled:v}),postgres_changes:p,private:g};this.socket.accessTokenValue&&(T.access_token=this.socket.accessTokenValue),this._onError(E=>e==null?void 0:e(pn.CHANNEL_ERROR,E)),this._onClose(()=>e==null?void 0:e(pn.CLOSED)),this.updateJoinPayload(Object.assign({config:S},T)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:E})=>{var b;if(this.socket.setAuth(),E===void 0){e==null||e(pn.SUBSCRIBED);return}else{const N=this.bindings.postgres_changes,L=(b=N==null?void 0:N.length)!==null&&b!==void 0?b:0,q=[];for(let V=0;V<L;V++){const U=N[V],{filter:{event:$,schema:z,table:Y,filter:Z}}=U,ue=E&&E[V];if(ue&&ue.event===$&&ue.schema===z&&ue.table===Y&&ue.filter===Z)q.push(Object.assign(Object.assign({},U),{id:ue.id}));else{this.unsubscribe(),this.state=Ke.errored,e==null||e(pn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=q,e&&e(pn.SUBSCRIBED);return}}).receive("error",E=>{this.state=Ke.errored,e==null||e(pn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(E).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(pn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,i={}){return await this.send({type:"presence",event:"track",payload:e},i.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,i,o){return this.state===Ke.joined&&e===Us.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,i,o)}async send(e,i={}){var o,l;if(!this._canPush()&&e.type==="broadcast"){const{event:f,payload:d}=e,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:f,payload:d,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(o=i.timeout)!==null&&o!==void 0?o:this.timeout);return await((l=p.body)===null||l===void 0?void 0:l.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(f=>{var d,m,g;const p=this._push(e.type,e,i.timeout||this.timeout);e.type==="broadcast"&&!(!((g=(m=(d=this.params)===null||d===void 0?void 0:d.config)===null||m===void 0?void 0:m.broadcast)===null||g===void 0)&&g.ack)&&f("ok"),p.receive("ok",()=>f("ok")),p.receive("error",()=>f("error")),p.receive("timeout",()=>f("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ke.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ht.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(l=>{o=new zu(this,Ht.leave,{},e),o.receive("ok",()=>{i(),l("ok")}).receive("timeout",()=>{i(),l("timed out")}).receive("error",()=>{l("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o==null||o.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ke.closed,this.bindings={}}async _fetchWithTimeout(e,i,o){const l=new AbortController,f=setTimeout(()=>l.abort(),o),d=await this.socket.fetch(e,Object.assign(Object.assign({},i),{signal:l.signal}));return clearTimeout(f),d}_push(e,i,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new zu(this,e,i,o);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>DM){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(e,i,o){return i}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,i,o){var l,f;const d=e.toLocaleLowerCase(),{close:m,error:g,leave:p,join:v}=Ht;if(o&&[m,g,p,v].indexOf(d)>=0&&o!==this._joinRef())return;let S=this._onMessage(d,i,o);if(i&&!S)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(E=>{var b,N,L;return((b=E.filter)===null||b===void 0?void 0:b.event)==="*"||((L=(N=E.filter)===null||N===void 0?void 0:N.event)===null||L===void 0?void 0:L.toLocaleLowerCase())===d}).map(E=>E.callback(S,o)):(f=this.bindings[d])===null||f===void 0||f.filter(E=>{var b,N,L,q,V,U;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in E){const $=E.id,z=(b=E.filter)===null||b===void 0?void 0:b.event;return $&&((N=i.ids)===null||N===void 0?void 0:N.includes($))&&(z==="*"||(z==null?void 0:z.toLocaleLowerCase())===((L=i.data)===null||L===void 0?void 0:L.type.toLocaleLowerCase()))}else{const $=(V=(q=E==null?void 0:E.filter)===null||q===void 0?void 0:q.event)===null||V===void 0?void 0:V.toLocaleLowerCase();return $==="*"||$===((U=i==null?void 0:i.event)===null||U===void 0?void 0:U.toLocaleLowerCase())}else return E.type.toLocaleLowerCase()===d}).map(E=>{if(typeof S=="object"&&"ids"in S){const b=S.data,{schema:N,table:L,commit_timestamp:q,type:V,errors:U}=b;S=Object.assign(Object.assign({},{schema:N,table:L,commit_timestamp:q,eventType:V,new:{},old:{},errors:U}),this._getPayloadRecords(b))}E.callback(S,o)})}_isClosed(){return this.state===Ke.closed}_isJoined(){return this.state===Ke.joined}_isJoining(){return this.state===Ke.joining}_isLeaving(){return this.state===Ke.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,i,o){const l=e.toLocaleLowerCase(),f={type:l,filter:i,callback:o};return this.bindings[l]?this.bindings[l].push(f):this.bindings[l]=[f],this}_off(e,i){const o=e.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(l=>{var f;return!(((f=l.type)===null||f===void 0?void 0:f.toLocaleLowerCase())===o&&Dc.isEqual(l.filter,i))})),this}static isEqual(e,i){if(Object.keys(e).length!==Object.keys(i).length)return!1;for(const o in e)if(e[o]!==i[o])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ht.close,{},e)}_onError(e){this._on(Ht.error,{},i=>e(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ke.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const i={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(i.new=pg(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(i.old=pg(e.columns,e.old_record)),i}}const $u=()=>{},tr={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},BM=[1e3,2e3,5e3,1e4],GM=1e4,OM=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class HM{constructor(e,i){var o;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=uc,this.transport=null,this.heartbeatIntervalMs=tr.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=$u,this.ref=0,this.reconnectTimer=null,this.logger=$u,this.conn=null,this.sendBuffer=[],this.serializer=new UM,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=l=>{let f;return l?f=l:typeof fetch>"u"?f=(...d)=>Ps(async()=>{const{default:m}=await Promise.resolve().then(()=>xo);return{default:m}},void 0).then(({default:m})=>m(...d)).catch(m=>{throw new Error(`Failed to load @supabase/node-fetch: ${m.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):f=fetch,(...d)=>f(...d)},!(!((o=i==null?void 0:i.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${e}/${cc.websocket}`,this.httpEndpoint=gy(e),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i==null?void 0:i.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=xM.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const i=e.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:MM}))}disconnect(e,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},e?this.conn.close(e,i??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const i=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const e=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,i,o){this.logger(e,i,o)}connectionState(){switch(this.conn&&this.conn.readyState){case Ns.connecting:return di.Connecting;case Ns.open:return di.Open;case Ns.closing:return di.Closing;default:return di.Closed}}isConnected(){return this.connectionState()===di.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,i={config:{}}){const o=`realtime:${e}`,l=this.getChannels().find(f=>f.topic===o);if(l)return l;{const f=new Dc(`realtime:${e}`,i,this);return this.channels.push(f),f}}push(e){const{topic:i,event:o,payload:l,ref:f}=e,d=()=>{this.encode(e,m=>{var g;(g=this.conn)===null||g===void 0||g.send(m)})};this.log("push",`${i} ${o} (${f})`,l),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(i){this.log("error","error in heartbeat callback",i)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(i){this.log("error","error in heartbeat callback",i)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(NM,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},tr.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(i){this.log("error","error in heartbeat callback",i)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let i=this.channels.find(o=>o.topic===e&&(o._isJoined()||o._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${e}"`),i.unsubscribe())}_remove(e){this.channels=this.channels.filter(i=>i.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,i=>{if(i.topic==="phoenix"&&i.event==="phx_reply")try{this.heartbeatCallback(i.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}i.ref&&i.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:l,payload:f,ref:d}=i,m=d?`(${d})`:"",g=f.status||"";this.log("receive",`${g} ${o} ${l} ${m}`.trim(),f),this.channels.filter(p=>p._isMember(o)).forEach(p=>p._trigger(l,f,d)),this._triggerStateCallbacks("message",i)})}_clearTimer(e){var i;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this.workerRef.terminate()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var i;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ht.error))}_appendParams(e,i){if(Object.keys(i).length===0)return e;const o=e.match(/\?/)?"&":"?",l=new URLSearchParams(i);return`${e}${o}${l}`}_workerObjectUrl(e){let i;if(e)i=e;else{const o=new Blob([OM],{type:"application/javascript"});i=URL.createObjectURL(o)}return i}_setConnectionState(e,i=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(e=null){let i;e?i=e:this.accessToken?i=await this.accessToken():i=this.accessTokenValue,this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(o=>{const l={access_token:i,version:bM};i&&o.updateJoinPayload(l),o.joinedOnce&&o._isJoined()&&o._push(Ht.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(i=>{this.log("error",`error setting auth in ${e}`,i)})}_triggerStateCallbacks(e,i){try{this.stateChangeCallbacks[e].forEach(o=>{try{o(i)}catch(l){this.log("error",`error in ${e} callback`,l)}})}catch(o){this.log("error",`error triggering ${e} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new py(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},tr.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var i,o,l,f,d,m,g,p,v;if(this.transport=(i=e==null?void 0:e.transport)!==null&&i!==void 0?i:null,this.timeout=(o=e==null?void 0:e.timeout)!==null&&o!==void 0?o:uc,this.heartbeatIntervalMs=(l=e==null?void 0:e.heartbeatIntervalMs)!==null&&l!==void 0?l:tr.HEARTBEAT_INTERVAL,this.worker=(f=e==null?void 0:e.worker)!==null&&f!==void 0?f:!1,this.accessToken=(d=e==null?void 0:e.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(m=e==null?void 0:e.heartbeatCallback)!==null&&m!==void 0?m:$u,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=e==null?void 0:e.reconnectAfterMs)!==null&&g!==void 0?g:(T=>BM[T-1]||GM),this.encode=(p=e==null?void 0:e.encode)!==null&&p!==void 0?p:((T,S)=>S(JSON.stringify(T))),this.decode=(v=e==null?void 0:e.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Uc extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Xe(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class FM extends Uc{constructor(e,i,o){super(e),this.name="StorageApiError",this.status=i,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class dc extends Uc{constructor(e,i){super(e),this.name="StorageUnknownError",this.originalError=i}}var zM=function(t,e,i,o){function l(f){return f instanceof i?f:new i(function(d){d(f)})}return new(i||(i=Promise))(function(f,d){function m(v){try{p(o.next(v))}catch(T){d(T)}}function g(v){try{p(o.throw(v))}catch(T){d(T)}}function p(v){v.done?f(v.value):l(v.value).then(m,g)}p((o=o.apply(t,e||[])).next())})};const yy=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...i)=>Ps(async()=>{const{default:o}=await Promise.resolve().then(()=>xo);return{default:o}},void 0).then(({default:o})=>o(...i)):e=fetch,(...i)=>e(...i)},$M=()=>zM(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ps(()=>Promise.resolve().then(()=>xo),void 0)).Response:Response}),hc=t=>{if(Array.isArray(t))return t.map(i=>hc(i));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([i,o])=>{const l=i.replace(/([-_][a-z])/gi,f=>f.toUpperCase().replace(/[-_]/g,""));e[l]=hc(o)}),e},JM=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var gi=function(t,e,i,o){function l(f){return f instanceof i?f:new i(function(d){d(f)})}return new(i||(i=Promise))(function(f,d){function m(v){try{p(o.next(v))}catch(T){d(T)}}function g(v){try{p(o.throw(v))}catch(T){d(T)}}function p(v){v.done?f(v.value):l(v.value).then(m,g)}p((o=o.apply(t,e||[])).next())})};const Ju=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),YM=(t,e,i)=>gi(void 0,void 0,void 0,function*(){const o=yield $M();t instanceof o&&!(i!=null&&i.noResolveJson)?t.json().then(l=>{const f=t.status||500,d=(l==null?void 0:l.statusCode)||f+"";e(new FM(Ju(l),f,d))}).catch(l=>{e(new dc(Ju(l),l))}):e(new dc(Ju(t),t))}),KM=(t,e,i,o)=>{const l={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!o?l:(JM(o)?(l.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),l.body=JSON.stringify(o)):l.body=o,e!=null&&e.duplex&&(l.duplex=e.duplex),Object.assign(Object.assign({},l),i))};function Ls(t,e,i,o,l,f){return gi(this,void 0,void 0,function*(){return new Promise((d,m)=>{t(i,KM(e,o,l,f)).then(g=>{if(!g.ok)throw g;return o!=null&&o.noResolveJson?g:g.json()}).then(g=>d(g)).catch(g=>YM(g,m,o))})})}function dr(t,e,i,o){return gi(this,void 0,void 0,function*(){return Ls(t,"GET",e,i,o)})}function Qt(t,e,i,o,l){return gi(this,void 0,void 0,function*(){return Ls(t,"POST",e,o,l,i)})}function pc(t,e,i,o,l){return gi(this,void 0,void 0,function*(){return Ls(t,"PUT",e,o,l,i)})}function XM(t,e,i,o){return gi(this,void 0,void 0,function*(){return Ls(t,"HEAD",e,Object.assign(Object.assign({},i),{noResolveJson:!0}),o)})}function vy(t,e,i,o,l){return gi(this,void 0,void 0,function*(){return Ls(t,"DELETE",e,o,l,i)})}var ct=function(t,e,i,o){function l(f){return f instanceof i?f:new i(function(d){d(f)})}return new(i||(i=Promise))(function(f,d){function m(v){try{p(o.next(v))}catch(T){d(T)}}function g(v){try{p(o.throw(v))}catch(T){d(T)}}function p(v){v.done?f(v.value):l(v.value).then(m,g)}p((o=o.apply(t,e||[])).next())})};const QM={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},yg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ZM{constructor(e,i={},o,l){this.shouldThrowOnError=!1,this.url=e,this.headers=i,this.bucketId=o,this.fetch=yy(l)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,i,o,l){return ct(this,void 0,void 0,function*(){try{let f;const d=Object.assign(Object.assign({},yg),l);let m=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(d.upsert)});const g=d.metadata;typeof Blob<"u"&&o instanceof Blob?(f=new FormData,f.append("cacheControl",d.cacheControl),g&&f.append("metadata",this.encodeMetadata(g)),f.append("",o)):typeof FormData<"u"&&o instanceof FormData?(f=o,f.append("cacheControl",d.cacheControl),g&&f.append("metadata",this.encodeMetadata(g))):(f=o,m["cache-control"]=`max-age=${d.cacheControl}`,m["content-type"]=d.contentType,g&&(m["x-metadata"]=this.toBase64(this.encodeMetadata(g)))),l!=null&&l.headers&&(m=Object.assign(Object.assign({},m),l.headers));const p=this._removeEmptyFolders(i),v=this._getFinalPath(p),T=yield(e=="PUT"?pc:Qt)(this.fetch,`${this.url}/object/${v}`,f,Object.assign({headers:m},d!=null&&d.duplex?{duplex:d.duplex}:{}));return{data:{path:p,id:T.Id,fullPath:T.Key},error:null}}catch(f){if(this.shouldThrowOnError)throw f;if(Xe(f))return{data:null,error:f};throw f}})}upload(e,i,o){return ct(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,i,o)})}uploadToSignedUrl(e,i,o,l){return ct(this,void 0,void 0,function*(){const f=this._removeEmptyFolders(e),d=this._getFinalPath(f),m=new URL(this.url+`/object/upload/sign/${d}`);m.searchParams.set("token",i);try{let g;const p=Object.assign({upsert:yg.upsert},l),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&o instanceof Blob?(g=new FormData,g.append("cacheControl",p.cacheControl),g.append("",o)):typeof FormData<"u"&&o instanceof FormData?(g=o,g.append("cacheControl",p.cacheControl)):(g=o,v["cache-control"]=`max-age=${p.cacheControl}`,v["content-type"]=p.contentType);const T=yield pc(this.fetch,m.toString(),g,{headers:v});return{data:{path:f,fullPath:T.Key},error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(Xe(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(e,i){return ct(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e);const l=Object.assign({},this.headers);i!=null&&i.upsert&&(l["x-upsert"]="true");const f=yield Qt(this.fetch,`${this.url}/object/upload/sign/${o}`,{},{headers:l}),d=new URL(this.url+f.url),m=d.searchParams.get("token");if(!m)throw new Uc("No token returned by API");return{data:{signedUrl:d.toString(),path:e,token:m},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Xe(o))return{data:null,error:o};throw o}})}update(e,i,o){return ct(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,i,o)})}move(e,i,o){return ct(this,void 0,void 0,function*(){try{return{data:yield Qt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:i,destinationBucket:o==null?void 0:o.destinationBucket},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Xe(l))return{data:null,error:l};throw l}})}copy(e,i,o){return ct(this,void 0,void 0,function*(){try{return{data:{path:(yield Qt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:i,destinationBucket:o==null?void 0:o.destinationBucket},{headers:this.headers})).Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Xe(l))return{data:null,error:l};throw l}})}createSignedUrl(e,i,o){return ct(this,void 0,void 0,function*(){try{let l=this._getFinalPath(e),f=yield Qt(this.fetch,`${this.url}/object/sign/${l}`,Object.assign({expiresIn:i},o!=null&&o.transform?{transform:o.transform}:{}),{headers:this.headers});const d=o!=null&&o.download?`&download=${o.download===!0?"":o.download}`:"";return f={signedUrl:encodeURI(`${this.url}${f.signedURL}${d}`)},{data:f,error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Xe(l))return{data:null,error:l};throw l}})}createSignedUrls(e,i,o){return ct(this,void 0,void 0,function*(){try{const l=yield Qt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:i,paths:e},{headers:this.headers}),f=o!=null&&o.download?`&download=${o.download===!0?"":o.download}`:"";return{data:l.map(d=>Object.assign(Object.assign({},d),{signedUrl:d.signedURL?encodeURI(`${this.url}${d.signedURL}${f}`):null})),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Xe(l))return{data:null,error:l};throw l}})}download(e,i){return ct(this,void 0,void 0,function*(){const l=typeof(i==null?void 0:i.transform)<"u"?"render/image/authenticated":"object",f=this.transformOptsToQueryString((i==null?void 0:i.transform)||{}),d=f?`?${f}`:"";try{const m=this._getFinalPath(e);return{data:yield(yield dr(this.fetch,`${this.url}/${l}/${m}${d}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(m){if(this.shouldThrowOnError)throw m;if(Xe(m))return{data:null,error:m};throw m}})}info(e){return ct(this,void 0,void 0,function*(){const i=this._getFinalPath(e);try{const o=yield dr(this.fetch,`${this.url}/object/info/${i}`,{headers:this.headers});return{data:hc(o),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Xe(o))return{data:null,error:o};throw o}})}exists(e){return ct(this,void 0,void 0,function*(){const i=this._getFinalPath(e);try{return yield XM(this.fetch,`${this.url}/object/${i}`,{headers:this.headers}),{data:!0,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Xe(o)&&o instanceof dc){const l=o.originalError;if([400,404].includes(l==null?void 0:l.status))return{data:!1,error:o}}throw o}})}getPublicUrl(e,i){const o=this._getFinalPath(e),l=[],f=i!=null&&i.download?`download=${i.download===!0?"":i.download}`:"";f!==""&&l.push(f);const m=typeof(i==null?void 0:i.transform)<"u"?"render/image":"object",g=this.transformOptsToQueryString((i==null?void 0:i.transform)||{});g!==""&&l.push(g);let p=l.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${m}/public/${o}${p}`)}}}remove(e){return ct(this,void 0,void 0,function*(){try{return{data:yield vy(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Xe(i))return{data:null,error:i};throw i}})}list(e,i,o){return ct(this,void 0,void 0,function*(){try{const l=Object.assign(Object.assign(Object.assign({},QM),i),{prefix:e||""});return{data:yield Qt(this.fetch,`${this.url}/object/list/${this.bucketId}`,l,{headers:this.headers},o),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Xe(l))return{data:null,error:l};throw l}})}listV2(e,i){return ct(this,void 0,void 0,function*(){try{const o=Object.assign({},e);return{data:yield Qt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,o,{headers:this.headers},i),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Xe(o))return{data:null,error:o};throw o}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const i=[];return e.width&&i.push(`width=${e.width}`),e.height&&i.push(`height=${e.height}`),e.resize&&i.push(`resize=${e.resize}`),e.format&&i.push(`format=${e.format}`),e.quality&&i.push(`quality=${e.quality}`),i.join("&")}}const WM="2.12.1",jM={"X-Client-Info":`storage-js/${WM}`};var ro=function(t,e,i,o){function l(f){return f instanceof i?f:new i(function(d){d(f)})}return new(i||(i=Promise))(function(f,d){function m(v){try{p(o.next(v))}catch(T){d(T)}}function g(v){try{p(o.throw(v))}catch(T){d(T)}}function p(v){v.done?f(v.value):l(v.value).then(m,g)}p((o=o.apply(t,e||[])).next())})};class eN{constructor(e,i={},o,l){this.shouldThrowOnError=!1;const f=new URL(e);l!=null&&l.useNewHostname&&/supabase\.(co|in|red)$/.test(f.hostname)&&!f.hostname.includes("storage.supabase.")&&(f.hostname=f.hostname.replace("supabase.","storage.supabase.")),this.url=f.href,this.headers=Object.assign(Object.assign({},jM),i),this.fetch=yy(o)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return ro(this,void 0,void 0,function*(){try{return{data:yield dr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Xe(e))return{data:null,error:e};throw e}})}getBucket(e){return ro(this,void 0,void 0,function*(){try{return{data:yield dr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Xe(i))return{data:null,error:i};throw i}})}createBucket(e,i={public:!1}){return ro(this,void 0,void 0,function*(){try{return{data:yield Qt(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Xe(o))return{data:null,error:o};throw o}})}updateBucket(e,i){return ro(this,void 0,void 0,function*(){try{return{data:yield pc(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Xe(o))return{data:null,error:o};throw o}})}emptyBucket(e){return ro(this,void 0,void 0,function*(){try{return{data:yield Qt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Xe(i))return{data:null,error:i};throw i}})}deleteBucket(e){return ro(this,void 0,void 0,function*(){try{return{data:yield vy(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Xe(i))return{data:null,error:i};throw i}})}}class tN extends eN{constructor(e,i={},o,l){super(e,i,o,l)}from(e){return new ZM(this.url,this.headers,e,this.fetch)}}const nN="2.57.4";let Rs="";typeof Deno<"u"?Rs="deno":typeof document<"u"?Rs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Rs="react-native":Rs="node";const iN={"X-Client-Info":`supabase-js-${Rs}/${nN}`},oN={headers:iN},sN={schema:"public"},lN={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},rN={};var aN=function(t,e,i,o){function l(f){return f instanceof i?f:new i(function(d){d(f)})}return new(i||(i=Promise))(function(f,d){function m(v){try{p(o.next(v))}catch(T){d(T)}}function g(v){try{p(o.throw(v))}catch(T){d(T)}}function p(v){v.done?f(v.value):l(v.value).then(m,g)}p((o=o.apply(t,e||[])).next())})};const uN=t=>{let e;return t?e=t:typeof fetch>"u"?e=ay:e=fetch,(...i)=>e(...i)},cN=()=>typeof Headers>"u"?uy:Headers,fN=(t,e,i)=>{const o=uN(i),l=cN();return(f,d)=>aN(void 0,void 0,void 0,function*(){var m;const g=(m=yield e())!==null&&m!==void 0?m:t;let p=new l(d==null?void 0:d.headers);return p.has("apikey")||p.set("apikey",t),p.has("Authorization")||p.set("Authorization",`Bearer ${g}`),o(f,Object.assign(Object.assign({},d),{headers:p}))})};var dN=function(t,e,i,o){function l(f){return f instanceof i?f:new i(function(d){d(f)})}return new(i||(i=Promise))(function(f,d){function m(v){try{p(o.next(v))}catch(T){d(T)}}function g(v){try{p(o.throw(v))}catch(T){d(T)}}function p(v){v.done?f(v.value):l(v.value).then(m,g)}p((o=o.apply(t,e||[])).next())})};function hN(t){return t.endsWith("/")?t:t+"/"}function pN(t,e){var i,o;const{db:l,auth:f,realtime:d,global:m}=t,{db:g,auth:p,realtime:v,global:T}=e,S={db:Object.assign(Object.assign({},g),l),auth:Object.assign(Object.assign({},p),f),realtime:Object.assign(Object.assign({},v),d),storage:{},global:Object.assign(Object.assign(Object.assign({},T),m),{headers:Object.assign(Object.assign({},(i=T==null?void 0:T.headers)!==null&&i!==void 0?i:{}),(o=m==null?void 0:m.headers)!==null&&o!==void 0?o:{})}),accessToken:()=>dN(this,void 0,void 0,function*(){return""})};return t.accessToken?S.accessToken=t.accessToken:delete S.accessToken,S}function mN(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(hN(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Ty="2.71.1",po=30*1e3,mc=3,Yu=mc*po,gN="http://localhost:9999",yN="supabase.auth.token",vN={"X-Client-Info":`gotrue-js/${Ty}`},gc="X-Supabase-Api-Version",_y={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},TN=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,_N=600*1e3;class Ic extends Error{constructor(e,i,o){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=o}}function he(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class SN extends Ic{constructor(e,i,o){super(e,i,o),this.name="AuthApiError",this.status=i,this.code=o}}function CN(t){return he(t)&&t.name==="AuthApiError"}class Sy extends Ic{constructor(e,i){super(e),this.name="AuthUnknownError",this.originalError=i}}class zn extends Ic{constructor(e,i,o,l){super(e,o,l),this.name=i,this.status=o}}class Hn extends zn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function EN(t){return he(t)&&t.name==="AuthSessionMissingError"}class nr extends zn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ir extends zn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class or extends zn{constructor(e,i=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function AN(t){return he(t)&&t.name==="AuthImplicitGrantRedirectError"}class vg extends zn{constructor(e,i=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class yc extends zn{constructor(e,i){super(e,"AuthRetryableFetchError",i,void 0)}}function Ku(t){return he(t)&&t.name==="AuthRetryableFetchError"}class Tg extends zn{constructor(e,i,o){super(e,"AuthWeakPasswordError",i,"weak_password"),this.reasons=o}}class vc extends zn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const hr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),_g=` 	
\r=`.split(""),wN=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<_g.length;e+=1)t[_g[e].charCodeAt(0)]=-2;for(let e=0;e<hr.length;e+=1)t[hr[e].charCodeAt(0)]=e;return t})();function Sg(t,e,i){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const o=e.queue>>e.queuedBits-6&63;i(hr[o]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const o=e.queue>>e.queuedBits-6&63;i(hr[o]),e.queuedBits-=6}}function Cy(t,e,i){const o=wN[t];if(o>-1)for(e.queue=e.queue<<6|o,e.queuedBits+=6;e.queuedBits>=8;)i(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Cg(t){const e=[],i=d=>{e.push(String.fromCodePoint(d))},o={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},f=d=>{bN(d,o,i)};for(let d=0;d<t.length;d+=1)Cy(t.charCodeAt(d),l,f);return e.join("")}function xN(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function RN(t,e){for(let i=0;i<t.length;i+=1){let o=t.charCodeAt(i);if(o>55295&&o<=56319){const l=(o-55296)*1024&65535;o=(t.charCodeAt(i+1)-56320&65535|l)+65536,i+=1}xN(o,e)}}function bN(t,e,i){if(e.utf8seq===0){if(t<=127){i(t);return}for(let o=1;o<6;o+=1)if((t>>7-o&1)===0){e.utf8seq=o;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&i(e.codepoint)}}function MN(t){const e=[],i={queue:0,queuedBits:0},o=l=>{e.push(l)};for(let l=0;l<t.length;l+=1)Cy(t.charCodeAt(l),i,o);return new Uint8Array(e)}function NN(t){const e=[];return RN(t,i=>e.push(i)),new Uint8Array(e)}function DN(t){const e=[],i={queue:0,queuedBits:0},o=l=>{e.push(l)};return t.forEach(l=>Sg(l,i,o)),Sg(null,i,o),e.join("")}function UN(t){return Math.round(Date.now()/1e3)+t}function IN(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Ot=()=>typeof window<"u"&&typeof document<"u",ui={tested:!1,writable:!1},Ey=()=>{if(!Ot())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ui.tested)return ui.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ui.tested=!0,ui.writable=!0}catch{ui.tested=!0,ui.writable=!1}return ui.writable};function kN(t){const e={},i=new URL(t);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((l,f)=>{e[f]=l})}catch{}return i.searchParams.forEach((o,l)=>{e[l]=o}),e}const Ay=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...i)=>Ps(async()=>{const{default:o}=await Promise.resolve().then(()=>xo);return{default:o}},void 0).then(({default:o})=>o(...i)):e=fetch,(...i)=>e(...i)},PN=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",mo=async(t,e,i)=>{await t.setItem(e,JSON.stringify(i))},ci=async(t,e)=>{const i=await t.getItem(e);if(!i)return null;try{return JSON.parse(i)}catch{return i}},On=async(t,e)=>{await t.removeItem(e)};class yr{constructor(){this.promise=new yr.promiseConstructor((e,i)=>{this.resolve=e,this.reject=i})}}yr.promiseConstructor=Promise;function Xu(t){const e=t.split(".");if(e.length!==3)throw new vc("Invalid JWT structure");for(let o=0;o<e.length;o++)if(!TN.test(e[o]))throw new vc("JWT not in base64url format");return{header:JSON.parse(Cg(e[0])),payload:JSON.parse(Cg(e[1])),signature:MN(e[2]),raw:{header:e[0],payload:e[1]}}}async function LN(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function qN(t,e){return new Promise((o,l)=>{(async()=>{for(let f=0;f<1/0;f++)try{const d=await t(f);if(!e(f,null,d)){o(d);return}}catch(d){if(!e(f,d)){l(d);return}}})()})}function VN(t){return("0"+t.toString(16)).substr(-2)}function BN(){const e=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=i.length;let l="";for(let f=0;f<56;f++)l+=i.charAt(Math.floor(Math.random()*o));return l}return crypto.getRandomValues(e),Array.from(e,VN).join("")}async function GN(t){const i=new TextEncoder().encode(t),o=await crypto.subtle.digest("SHA-256",i),l=new Uint8Array(o);return Array.from(l).map(f=>String.fromCharCode(f)).join("")}async function ON(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const i=await GN(t);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ao(t,e,i=!1){const o=BN();let l=o;i&&(l+="/PASSWORD_RECOVERY"),await mo(t,`${e}-code-verifier`,l);const f=await ON(o);return[f,o===f?"plain":"s256"]}const HN=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function FN(t){const e=t.headers.get(gc);if(!e||!e.match(HN))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function zN(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function $N(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const JN=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function uo(t){if(!JN.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Qu(){const t={};return new Proxy(t,{get:(e,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const o=i.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Eg(t){return JSON.parse(JSON.stringify(t))}var YN=function(t,e){var i={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(i[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(t);l<o.length;l++)e.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(t,o[l])&&(i[o[l]]=t[o[l]]);return i};const fi=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),KN=[502,503,504];async function Ag(t){var e;if(!PN(t))throw new yc(fi(t),0);if(KN.includes(t.status))throw new yc(fi(t),t.status);let i;try{i=await t.json()}catch(f){throw new Sy(fi(f),f)}let o;const l=FN(t);if(l&&l.getTime()>=_y["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?o=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(o=i.error_code),o){if(o==="weak_password")throw new Tg(fi(i),t.status,((e=i.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(o==="session_not_found")throw new Hn}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((f,d)=>f&&typeof d=="string",!0))throw new Tg(fi(i),t.status,i.weak_password.reasons);throw new SN(fi(i),t.status||500,o)}const XN=(t,e,i,o)=>{const l={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),l.body=JSON.stringify(o),Object.assign(Object.assign({},l),i))};async function _e(t,e,i,o){var l;const f=Object.assign({},o==null?void 0:o.headers);f[gc]||(f[gc]=_y["2024-01-01"].name),o!=null&&o.jwt&&(f.Authorization=`Bearer ${o.jwt}`);const d=(l=o==null?void 0:o.query)!==null&&l!==void 0?l:{};o!=null&&o.redirectTo&&(d.redirect_to=o.redirectTo);const m=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",g=await QN(t,e,i+m,{headers:f,noResolveJson:o==null?void 0:o.noResolveJson},{},o==null?void 0:o.body);return o!=null&&o.xform?o==null?void 0:o.xform(g):{data:Object.assign({},g),error:null}}async function QN(t,e,i,o,l,f){const d=XN(e,o,l,f);let m;try{m=await t(i,Object.assign({},d))}catch(g){throw console.error(g),new yc(fi(g),0)}if(m.ok||await Ag(m),o!=null&&o.noResolveJson)return m;try{return await m.json()}catch(g){await Ag(g)}}function hn(t){var e;let i=null;eD(t)&&(i=Object.assign({},t),t.expires_at||(i.expires_at=UN(t.expires_in)));const o=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:i,user:o},error:null}}function wg(t){const e=hn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Fn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function ZN(t){return{data:t,error:null}}function WN(t){const{action_link:e,email_otp:i,hashed_token:o,redirect_to:l,verification_type:f}=t,d=YN(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:e,email_otp:i,hashed_token:o,redirect_to:l,verification_type:f},g=Object.assign({},d);return{data:{properties:m,user:g},error:null}}function jN(t){return t}function eD(t){return t.access_token&&t.refresh_token&&t.expires_in}const Zu=["global","local","others"];var tD=function(t,e){var i={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(i[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(t);l<o.length;l++)e.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(t,o[l])&&(i[o[l]]=t[o[l]]);return i};class nD{constructor({url:e="",headers:i={},fetch:o}){this.url=e,this.headers=i,this.fetch=Ay(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,i=Zu[0]){if(Zu.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Zu.join(", ")}`);try{return await _e(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(o){if(he(o))return{data:null,error:o};throw o}}async inviteUserByEmail(e,i={}){try{return await _e(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:Fn})}catch(o){if(he(o))return{data:{user:null},error:o};throw o}}async generateLink(e){try{const{options:i}=e,o=tD(e,["options"]),l=Object.assign(Object.assign({},o),i);return"newEmail"in o&&(l.new_email=o==null?void 0:o.newEmail,delete l.newEmail),await _e(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:WN,redirectTo:i==null?void 0:i.redirectTo})}catch(i){if(he(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(e){try{return await _e(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Fn})}catch(i){if(he(i))return{data:{user:null},error:i};throw i}}async listUsers(e){var i,o,l,f,d,m,g;try{const p={nextPage:null,lastPage:0,total:0},v=await _e(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(i=e==null?void 0:e.page)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:"",per_page:(f=(l=e==null?void 0:e.perPage)===null||l===void 0?void 0:l.toString())!==null&&f!==void 0?f:""},xform:jN});if(v.error)throw v.error;const T=await v.json(),S=(d=v.headers.get("x-total-count"))!==null&&d!==void 0?d:0,E=(g=(m=v.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&g!==void 0?g:[];return E.length>0&&(E.forEach(b=>{const N=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),L=JSON.parse(b.split(";")[1].split("=")[1]);p[`${L}Page`]=N}),p.total=parseInt(S)),{data:Object.assign(Object.assign({},T),p),error:null}}catch(p){if(he(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){uo(e);try{return await _e(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Fn})}catch(i){if(he(i))return{data:{user:null},error:i};throw i}}async updateUserById(e,i){uo(e);try{return await _e(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:i,headers:this.headers,xform:Fn})}catch(o){if(he(o))return{data:{user:null},error:o};throw o}}async deleteUser(e,i=!1){uo(e);try{return await _e(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:i},xform:Fn})}catch(o){if(he(o))return{data:{user:null},error:o};throw o}}async _listFactors(e){uo(e.userId);try{const{data:i,error:o}=await _e(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:i,error:o}}catch(i){if(he(i))return{data:null,error:i};throw i}}async _deleteFactor(e){uo(e.userId),uo(e.id);try{return{data:await _e(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(i){if(he(i))return{data:null,error:i};throw i}}}function xg(t={}){return{getItem:e=>t[e]||null,setItem:(e,i)=>{t[e]=i},removeItem:e=>{delete t[e]}}}function iD(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const co={debug:!!(globalThis&&Ey()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class wy extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class oD extends wy{}async function sD(t,e,i){co.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const o=new globalThis.AbortController;return e>0&&setTimeout(()=>{o.abort(),co.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async l=>{if(l){co.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,l.name);try{return await i()}finally{co.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,l.name)}}else{if(e===0)throw co.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new oD(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(co.debug)try{const f=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(f,null,"  "))}catch(f){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",f)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await i()}}))}iD();const lD={url:gN,storageKey:yN,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:vN,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Rg(t,e,i){return await i()}const fo={};class Is{constructor(e){var i,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Is.nextInstanceID,Is.nextInstanceID+=1,this.instanceID>0&&Ot()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const l=Object.assign(Object.assign({},lD),e);if(this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.persistSession=l.persistSession,this.storageKey=l.storageKey,this.autoRefreshToken=l.autoRefreshToken,this.admin=new nD({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=Ay(l.fetch),this.lock=l.lock||Rg,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,l.lock?this.lock=l.lock:Ot()&&(!((i=globalThis==null?void 0:globalThis.navigator)===null||i===void 0)&&i.locks)?this.lock=sD:this.lock=Rg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:Ey()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=xg(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=xg(this.memoryStorage)),Ot()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(f){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",f)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async f=>{this._debug("received broadcast notification from other tab or client",f),await this._notifyAllSubscribers(f.data.event,f.data.session,!1)})}this.initialize()}get jwks(){var e,i;return(i=(e=fo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(e){fo[this.storageKey]=Object.assign(Object.assign({},fo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,i;return(i=(e=fo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){fo[this.storageKey]=Object.assign(Object.assign({},fo[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Ty}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const i=kN(window.location.href);let o="none";if(this._isImplicitGrantCallback(i)?o="implicit":await this._isPKCECallback(i)&&(o="pkce"),Ot()&&this.detectSessionInUrl&&o!=="none"){const{data:l,error:f}=await this._getSessionFromURL(i,o);if(f){if(this._debug("#_initialize()","error detecting session from URL",f),AN(f)){const g=(e=f.details)===null||e===void 0?void 0:e.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:f}}return await this._removeSession(),{error:f}}const{session:d,redirectType:m}=l;return this._debug("#_initialize()","detected session in URL",d,"redirect type",m),await this._saveSession(d),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return he(i)?{error:i}:{error:new Sy("Unexpected error during initialization",i)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var i,o,l;try{const f=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(l=e==null?void 0:e.options)===null||l===void 0?void 0:l.captchaToken}},xform:hn}),{data:d,error:m}=f;if(m||!d)return{data:{user:null,session:null},error:m};const g=d.session,p=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:p,session:g},error:null}}catch(f){if(he(f))return{data:{user:null,session:null},error:f};throw f}}async signUp(e){var i,o,l;try{let f;if("email"in e){const{email:v,password:T,options:S}=e;let E=null,b=null;this.flowType==="pkce"&&([E,b]=await ao(this.storage,this.storageKey)),f=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S==null?void 0:S.emailRedirectTo,body:{email:v,password:T,data:(i=S==null?void 0:S.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken},code_challenge:E,code_challenge_method:b},xform:hn})}else if("phone"in e){const{phone:v,password:T,options:S}=e;f=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:T,data:(o=S==null?void 0:S.data)!==null&&o!==void 0?o:{},channel:(l=S==null?void 0:S.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken}},xform:hn})}else throw new ir("You must provide either an email or phone number and a password");const{data:d,error:m}=f;if(m||!d)return{data:{user:null,session:null},error:m};const g=d.session,p=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:p,session:g},error:null}}catch(f){if(he(f))return{data:{user:null,session:null},error:f};throw f}}async signInWithPassword(e){try{let i;if("email"in e){const{email:f,password:d,options:m}=e;i=await _e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:f,password:d,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:wg})}else if("phone"in e){const{phone:f,password:d,options:m}=e;i=await _e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:f,password:d,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:wg})}else throw new ir("You must provide either an email or phone number and a password");const{data:o,error:l}=i;return l?{data:{user:null,session:null},error:l}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new nr}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:l})}catch(i){if(he(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithOAuth(e){var i,o,l,f;return await this._handleProviderSignIn(e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(f=e.options)===null||f===void 0?void 0:f.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:i}=e;if(i==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}async signInWithSolana(e){var i,o,l,f,d,m,g,p,v,T,S,E;let b,N;if("message"in e)b=e.message,N=e.signature;else{const{chain:L,wallet:q,statement:V,options:U}=e;let $;if(Ot())if(typeof q=="object")$=q;else{const Y=window;if("solana"in Y&&typeof Y.solana=="object"&&("signIn"in Y.solana&&typeof Y.solana.signIn=="function"||"signMessage"in Y.solana&&typeof Y.solana.signMessage=="function"))$=Y.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof q!="object"||!(U!=null&&U.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");$=q}const z=new URL((i=U==null?void 0:U.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in $&&$.signIn){const Y=await $.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},U==null?void 0:U.signInWithSolana),{version:"1",domain:z.host,uri:z.href}),V?{statement:V}:null));let Z;if(Array.isArray(Y)&&Y[0]&&typeof Y[0]=="object")Z=Y[0];else if(Y&&typeof Y=="object"&&"signedMessage"in Y&&"signature"in Y)Z=Y;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in Z&&"signature"in Z&&(typeof Z.signedMessage=="string"||Z.signedMessage instanceof Uint8Array)&&Z.signature instanceof Uint8Array)b=typeof Z.signedMessage=="string"?Z.signedMessage:new TextDecoder().decode(Z.signedMessage),N=Z.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in $)||typeof $.signMessage!="function"||!("publicKey"in $)||typeof $!="object"||!$.publicKey||!("toBase58"in $.publicKey)||typeof $.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${z.host} wants you to sign in with your Solana account:`,$.publicKey.toBase58(),...V?["",V,""]:[""],"Version: 1",`URI: ${z.href}`,`Issued At: ${(l=(o=U==null?void 0:U.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((f=U==null?void 0:U.signInWithSolana)===null||f===void 0)&&f.notBefore?[`Not Before: ${U.signInWithSolana.notBefore}`]:[],...!((d=U==null?void 0:U.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${U.signInWithSolana.expirationTime}`]:[],...!((m=U==null?void 0:U.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${U.signInWithSolana.chainId}`]:[],...!((g=U==null?void 0:U.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${U.signInWithSolana.nonce}`]:[],...!((p=U==null?void 0:U.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${U.signInWithSolana.requestId}`]:[],...!((T=(v=U==null?void 0:U.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||T===void 0)&&T.length?["Resources",...U.signInWithSolana.resources.map(Z=>`- ${Z}`)]:[]].join(`
`);const Y=await $.signMessage(new TextEncoder().encode(b),"utf8");if(!Y||!(Y instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");N=Y}}try{const{data:L,error:q}=await _e(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:DN(N)},!((S=e.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(E=e.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:hn});if(q)throw q;return!L||!L.session||!L.user?{data:{user:null,session:null},error:new nr}:(L.session&&(await this._saveSession(L.session),await this._notifyAllSubscribers("SIGNED_IN",L.session)),{data:Object.assign({},L),error:q})}catch(L){if(he(L))return{data:{user:null,session:null},error:L};throw L}}async _exchangeCodeForSession(e){const i=await ci(this.storage,`${this.storageKey}-code-verifier`),[o,l]=(i??"").split("/");try{const{data:f,error:d}=await _e(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:o},xform:hn});if(await On(this.storage,`${this.storageKey}-code-verifier`),d)throw d;return!f||!f.session||!f.user?{data:{user:null,session:null,redirectType:null},error:new nr}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:Object.assign(Object.assign({},f),{redirectType:l??null}),error:d})}catch(f){if(he(f))return{data:{user:null,session:null,redirectType:null},error:f};throw f}}async signInWithIdToken(e){try{const{options:i,provider:o,token:l,access_token:f,nonce:d}=e,m=await _e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:l,access_token:f,nonce:d,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:hn}),{data:g,error:p}=m;return p?{data:{user:null,session:null},error:p}:!g||!g.session||!g.user?{data:{user:null,session:null},error:new nr}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:g,error:p})}catch(i){if(he(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithOtp(e){var i,o,l,f,d;try{if("email"in e){const{email:m,options:g}=e;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await ao(this.storage,this.storageKey));const{error:T}=await _e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(i=g==null?void 0:g.data)!==null&&i!==void 0?i:{},create_user:(o=g==null?void 0:g.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:p,code_challenge_method:v},redirectTo:g==null?void 0:g.emailRedirectTo});return{data:{user:null,session:null},error:T}}if("phone"in e){const{phone:m,options:g}=e,{data:p,error:v}=await _e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(l=g==null?void 0:g.data)!==null&&l!==void 0?l:{},create_user:(f=g==null?void 0:g.shouldCreateUser)!==null&&f!==void 0?f:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},channel:(d=g==null?void 0:g.channel)!==null&&d!==void 0?d:"sms"}});return{data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:v}}throw new ir("You must provide either an email or phone number.")}catch(m){if(he(m))return{data:{user:null,session:null},error:m};throw m}}async verifyOtp(e){var i,o;try{let l,f;"options"in e&&(l=(i=e.options)===null||i===void 0?void 0:i.redirectTo,f=(o=e.options)===null||o===void 0?void 0:o.captchaToken);const{data:d,error:m}=await _e(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:f}}),redirectTo:l,xform:hn});if(m)throw m;if(!d)throw new Error("An error occurred on token verification.");const g=d.session,p=d.user;return g!=null&&g.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),{data:{user:p,session:g},error:null}}catch(l){if(he(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithSSO(e){var i,o,l;try{let f=null,d=null;return this.flowType==="pkce"&&([f,d]=await ao(this.storage,this.storageKey)),await _e(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(o=(i=e.options)===null||i===void 0?void 0:i.redirectTo)!==null&&o!==void 0?o:void 0}),!((l=e==null?void 0:e.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:d}),headers:this.headers,xform:ZN})}catch(f){if(he(f))return{data:null,error:f};throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:i},error:o}=e;if(o)throw o;if(!i)throw new Hn;const{error:l}=await _e(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return{data:{user:null,session:null},error:l}})}catch(e){if(he(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const i=`${this.url}/resend`;if("email"in e){const{email:o,type:l,options:f}=e,{error:d}=await _e(this.fetch,"POST",i,{headers:this.headers,body:{email:o,type:l,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},redirectTo:f==null?void 0:f.emailRedirectTo});return{data:{user:null,session:null},error:d}}else if("phone"in e){const{phone:o,type:l,options:f}=e,{data:d,error:m}=await _e(this.fetch,"POST",i,{headers:this.headers,body:{phone:o,type:l,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:m}}throw new ir("You must provide either an email or phone number and a type")}catch(i){if(he(i))return{data:{user:null,session:null},error:i};throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async i=>i))}async _acquireLock(e,i){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await o,await i()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=i();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await e(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const i=await ci(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?e=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const o=e.expires_at?e.expires_at*1e3-Date.now()<Yu:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",e.expires_at),!o){if(this.userStorage){const d=await ci(this.userStorage,this.storageKey+"-user");d!=null&&d.user?e.user=d.user:e.user=Qu()}if(this.storage.isServer&&e.user){let d=this.suppressGetSessionWarning;e=new Proxy(e,{get:(g,p,v)=>(!d&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),d=!0,this.suppressGetSessionWarning=!0),Reflect.get(g,p,v))})}return{data:{session:e},error:null}}const{session:l,error:f}=await this._callRefreshToken(e.refresh_token);return f?{data:{session:null},error:f}:{data:{session:l},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await _e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Fn}):await this._useSession(async i=>{var o,l,f;const{data:d,error:m}=i;if(m)throw m;return!(!((o=d.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Hn}:await _e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(f=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&f!==void 0?f:void 0,xform:Fn})})}catch(i){if(he(i))return EN(i)&&(await this._removeSession(),await On(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:i};throw i}}async updateUser(e,i={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,i))}async _updateUser(e,i={}){try{return await this._useSession(async o=>{const{data:l,error:f}=o;if(f)throw f;if(!l.session)throw new Hn;const d=l.session;let m=null,g=null;this.flowType==="pkce"&&e.email!=null&&([m,g]=await ao(this.storage,this.storageKey));const{data:p,error:v}=await _e(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i==null?void 0:i.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:m,code_challenge_method:g}),jwt:d.access_token,xform:Fn});if(v)throw v;return d.user=p.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),{data:{user:d.user},error:null}})}catch(o){if(he(o))return{data:{user:null},error:o};throw o}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Hn;const i=Date.now()/1e3;let o=i,l=!0,f=null;const{payload:d}=Xu(e.access_token);if(d.exp&&(o=d.exp,l=o<=i),l){const{session:m,error:g}=await this._callRefreshToken(e.refresh_token);if(g)return{data:{user:null,session:null},error:g};if(!m)return{data:{user:null,session:null},error:null};f=m}else{const{data:m,error:g}=await this._getUser(e.access_token);if(g)throw g;f={access_token:e.access_token,refresh_token:e.refresh_token,user:m.user,token_type:"bearer",expires_in:o-i,expires_at:o},await this._saveSession(f),await this._notifyAllSubscribers("SIGNED_IN",f)}return{data:{user:f.user,session:f},error:null}}catch(i){if(he(i))return{data:{session:null,user:null},error:i};throw i}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async i=>{var o;if(!e){const{data:d,error:m}=i;if(m)throw m;e=(o=d.session)!==null&&o!==void 0?o:void 0}if(!(e!=null&&e.refresh_token))throw new Hn;const{session:l,error:f}=await this._callRefreshToken(e.refresh_token);return f?{data:{user:null,session:null},error:f}:l?{data:{user:l.user,session:l},error:null}:{data:{user:null,session:null},error:null}})}catch(i){if(he(i))return{data:{user:null,session:null},error:i};throw i}}async _getSessionFromURL(e,i){try{if(!Ot())throw new or("No browser detected.");if(e.error||e.error_description||e.error_code)throw new or(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new vg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new or("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new vg("No code detected.");const{data:V,error:U}=await this._exchangeCodeForSession(e.code);if(U)throw U;const $=new URL(window.location.href);return $.searchParams.delete("code"),window.history.replaceState(window.history.state,"",$.toString()),{data:{session:V.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:l,access_token:f,refresh_token:d,expires_in:m,expires_at:g,token_type:p}=e;if(!f||!m||!d||!p)throw new or("No session defined in URL");const v=Math.round(Date.now()/1e3),T=parseInt(m);let S=v+T;g&&(S=parseInt(g));const E=S-v;E*1e3<=po&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${E}s, should have been closer to ${T}s`);const b=S-T;v-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,S,v):v-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,S,v);const{data:N,error:L}=await this._getUser(f);if(L)throw L;const q={provider_token:o,provider_refresh_token:l,access_token:f,expires_in:T,expires_at:S,refresh_token:d,token_type:p,user:N.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:q,redirectType:e.type},error:null}}catch(o){if(he(o))return{data:{session:null,redirectType:null},error:o};throw o}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const i=await ci(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&i)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async i=>{var o;const{data:l,error:f}=i;if(f)return{error:f};const d=(o=l.session)===null||o===void 0?void 0:o.access_token;if(d){const{error:m}=await this.admin.signOut(d,e);if(m&&!(CN(m)&&(m.status===404||m.status===401||m.status===403)))return{error:m}}return e!=="others"&&(await this._removeSession(),await On(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const i=IN(),o={id:i,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:o}}}async _emitInitialSession(e){return await this._useSession(async i=>{var o,l;try{const{data:{session:f},error:d}=i;if(d)throw d;await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",f)),this._debug("INITIAL_SESSION","callback id",e,"session",f)}catch(f){await((l=this.stateChangeEmitters.get(e))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",f),console.error(f)}})}async resetPasswordForEmail(e,i={}){let o=null,l=null;this.flowType==="pkce"&&([o,l]=await ao(this.storage,this.storageKey,!0));try{return await _e(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:o,code_challenge_method:l,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(f){if(he(f))return{data:null,error:f};throw f}}async getUserIdentities(){var e;try{const{data:i,error:o}=await this.getUser();if(o)throw o;return{data:{identities:(e=i.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(i){if(he(i))return{data:null,error:i};throw i}}async linkIdentity(e){var i;try{const{data:o,error:l}=await this._useSession(async f=>{var d,m,g,p,v;const{data:T,error:S}=f;if(S)throw S;const E=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(d=e.options)===null||d===void 0?void 0:d.redirectTo,scopes:(m=e.options)===null||m===void 0?void 0:m.scopes,queryParams:(g=e.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await _e(this.fetch,"GET",E,{headers:this.headers,jwt:(v=(p=T.session)===null||p===void 0?void 0:p.access_token)!==null&&v!==void 0?v:void 0})});if(l)throw l;return Ot()&&!(!((i=e.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(o==null?void 0:o.url),{data:{provider:e.provider,url:o==null?void 0:o.url},error:null}}catch(o){if(he(o))return{data:{provider:e.provider,url:null},error:o};throw o}}async unlinkIdentity(e){try{return await this._useSession(async i=>{var o,l;const{data:f,error:d}=i;if(d)throw d;return await _e(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(l=(o=f.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0})})}catch(i){if(he(i))return{data:null,error:i};throw i}}async _refreshAccessToken(e){const i=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{const o=Date.now();return await qN(async l=>(l>0&&await LN(200*Math.pow(2,l-1)),this._debug(i,"refreshing attempt",l),await _e(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:hn})),(l,f)=>{const d=200*Math.pow(2,l);return f&&Ku(f)&&Date.now()+d-o<po})}catch(o){if(this._debug(i,"error",o),he(o))return{data:{session:null,user:null},error:o};throw o}finally{this._debug(i,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,i){const o=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",i,"url",o),Ot()&&!i.skipBrowserRedirect&&window.location.assign(o),{data:{provider:e,url:o},error:null}}async _recoverAndRefresh(){var e,i;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const l=await ci(this.storage,this.storageKey);if(l&&this.userStorage){let d=await ci(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:l.user},await mo(this.userStorage,this.storageKey+"-user",d)),l.user=(e=d==null?void 0:d.user)!==null&&e!==void 0?e:Qu()}else if(l&&!l.user&&!l.user){const d=await ci(this.storage,this.storageKey+"-user");d&&(d!=null&&d.user)?(l.user=d.user,await On(this.storage,this.storageKey+"-user"),await mo(this.storage,this.storageKey,l)):l.user=Qu()}if(this._debug(o,"session from storage",l),!this._isValidSession(l)){this._debug(o,"session is not valid"),l!==null&&await this._removeSession();return}const f=((i=l.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<Yu;if(this._debug(o,`session has${f?"":" not"} expired with margin of ${Yu}s`),f){if(this.autoRefreshToken&&l.refresh_token){const{error:d}=await this._callRefreshToken(l.refresh_token);d&&(console.error(d),Ku(d)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:m}=await this._getUser(l.access_token);!m&&(d!=null&&d.user)?(l.user=d.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(o,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(o,"error",l),console.error(l);return}finally{this._debug(o,"end")}}async _callRefreshToken(e){var i,o;if(!e)throw new Hn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new yr;const{data:f,error:d}=await this._refreshAccessToken(e);if(d)throw d;if(!f.session)throw new Hn;await this._saveSession(f.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",f.session);const m={session:f.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(f){if(this._debug(l,"error",f),he(f)){const d={session:null,error:f};return Ku(f)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(d),d}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(f),f}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(e,i,o=!0){const l=`#_notifyAllSubscribers(${e})`;this._debug(l,"begin",i,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:e,session:i});const f=[],d=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(e,i)}catch(g){f.push(g)}});if(await Promise.all(d),f.length>0){for(let m=0;m<f.length;m+=1)console.error(f[m]);throw f[0]}}finally{this._debug(l,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const i=Object.assign({},e),o=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&i.user&&await mo(this.userStorage,this.storageKey+"-user",{user:i.user});const l=Object.assign({},i);delete l.user;const f=Eg(l);await mo(this.storage,this.storageKey,f)}else{const l=Eg(i);await mo(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),await On(this.storage,this.storageKey),await On(this.storage,this.storageKey+"-code-verifier"),await On(this.storage,this.storageKey+"-user"),this.userStorage&&await On(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ot()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(i){console.error("removing visibilitychange callback failed",i)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),po);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async i=>{const{data:{session:o}}=i;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((o.expires_at*1e3-e)/po);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${po}ms, refresh threshold is ${mc} ticks`),l<=mc&&await this._callRefreshToken(o.refresh_token)})}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof wy)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ot()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const i=`#_onVisibilityChanged(${e})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,i,o){const l=[`provider=${encodeURIComponent(i)}`];if(o!=null&&o.redirectTo&&l.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o!=null&&o.scopes&&l.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[f,d]=await ao(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(f)}`,code_challenge_method:`${encodeURIComponent(d)}`});l.push(m.toString())}if(o!=null&&o.queryParams){const f=new URLSearchParams(o.queryParams);l.push(f.toString())}return o!=null&&o.skipBrowserRedirect&&l.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${e}?${l.join("&")}`}async _unenroll(e){try{return await this._useSession(async i=>{var o;const{data:l,error:f}=i;return f?{data:null,error:f}:await _e(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(o=l==null?void 0:l.session)===null||o===void 0?void 0:o.access_token})})}catch(i){if(he(i))return{data:null,error:i};throw i}}async _enroll(e){try{return await this._useSession(async i=>{var o,l;const{data:f,error:d}=i;if(d)return{data:null,error:d};const m=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:g,error:p}=await _e(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(o=f==null?void 0:f.session)===null||o===void 0?void 0:o.access_token});return p?{data:null,error:p}:(e.factorType==="totp"&&(!((l=g==null?void 0:g.totp)===null||l===void 0)&&l.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),{data:g,error:null})})}catch(i){if(he(i))return{data:null,error:i};throw i}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var o;const{data:l,error:f}=i;if(f)return{data:null,error:f};const{data:d,error:m}=await _e(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(o=l==null?void 0:l.session)===null||o===void 0?void 0:o.access_token});return m?{data:null,error:m}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:m})})}catch(i){if(he(i))return{data:null,error:i};throw i}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var o;const{data:l,error:f}=i;return f?{data:null,error:f}:await _e(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(o=l==null?void 0:l.session)===null||o===void 0?void 0:o.access_token})})}catch(i){if(he(i))return{data:null,error:i};throw i}})}async _challengeAndVerify(e){const{data:i,error:o}=await this._challenge({factorId:e.factorId});return o?{data:null,error:o}:await this._verify({factorId:e.factorId,challengeId:i.id,code:e.code})}async _listFactors(){const{data:{user:e},error:i}=await this.getUser();if(i)return{data:null,error:i};const o=(e==null?void 0:e.factors)||[],l=o.filter(d=>d.factor_type==="totp"&&d.status==="verified"),f=o.filter(d=>d.factor_type==="phone"&&d.status==="verified");return{data:{all:o,totp:l,phone:f},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var i,o;const{data:{session:l},error:f}=e;if(f)return{data:null,error:f};if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=Xu(l.access_token);let m=null;d.aal&&(m=d.aal);let g=m;((o=(i=l.user.factors)===null||i===void 0?void 0:i.filter(T=>T.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(g="aal2");const v=d.amr||[];return{data:{currentLevel:m,nextLevel:g,currentAuthenticationMethods:v},error:null}}))}async fetchJwk(e,i={keys:[]}){let o=i.keys.find(m=>m.kid===e);if(o)return o;const l=Date.now();if(o=this.jwks.keys.find(m=>m.kid===e),o&&this.jwks_cached_at+_N>l)return o;const{data:f,error:d}=await _e(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!f.keys||f.keys.length===0||(this.jwks=f,this.jwks_cached_at=l,o=f.keys.find(m=>m.kid===e),!o)?null:o}async getClaims(e,i={}){try{let o=e;if(!o){const{data:E,error:b}=await this.getSession();if(b||!E.session)return{data:null,error:b};o=E.session.access_token}const{header:l,payload:f,signature:d,raw:{header:m,payload:g}}=Xu(o);i!=null&&i.allowExpired||zN(f.exp);const p=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,i!=null&&i.keys?{keys:i.keys}:i==null?void 0:i.jwks);if(!p){const{error:E}=await this.getUser(o);if(E)throw E;return{data:{claims:f,header:l,signature:d},error:null}}const v=$N(l.alg),T=await crypto.subtle.importKey("jwk",p,v,!0,["verify"]);if(!await crypto.subtle.verify(v,T,d,NN(`${m}.${g}`)))throw new vc("Invalid JWT signature");return{data:{claims:f,header:l,signature:d},error:null}}catch(o){if(he(o))return{data:null,error:o};throw o}}}Is.nextInstanceID=0;const rD=Is;class aD extends rD{constructor(e){super(e)}}var uD=function(t,e,i,o){function l(f){return f instanceof i?f:new i(function(d){d(f)})}return new(i||(i=Promise))(function(f,d){function m(v){try{p(o.next(v))}catch(T){d(T)}}function g(v){try{p(o.throw(v))}catch(T){d(T)}}function p(v){v.done?f(v.value):l(v.value).then(m,g)}p((o=o.apply(t,e||[])).next())})};class cD{constructor(e,i,o){var l,f,d;this.supabaseUrl=e,this.supabaseKey=i;const m=mN(e);if(!i)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const g=`sb-${m.hostname.split(".")[0]}-auth-token`,p={db:sN,realtime:rN,auth:Object.assign(Object.assign({},lN),{storageKey:g}),global:oN},v=pN(o??{},p);this.storageKey=(l=v.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(f=v.global.headers)!==null&&f!==void 0?f:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(T,S)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(S)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((d=v.auth)!==null&&d!==void 0?d:{},this.headers,v.global.fetch),this.fetch=fN(i,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.rest=new wM(new URL("rest/v1",m).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new tN(this.storageUrl.href,this.headers,this.fetch,o==null?void 0:o.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new mM(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,i={},o={}){return this.rest.rpc(e,i,o)}channel(e,i={config:{}}){return this.realtime.channel(e,i)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,i;return uD(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:o}=yield this.auth.getSession();return(i=(e=o.session)===null||e===void 0?void 0:e.access_token)!==null&&i!==void 0?i:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:i,detectSessionInUrl:o,storage:l,userStorage:f,storageKey:d,flowType:m,lock:g,debug:p},v,T){const S={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new aD({url:this.authUrl.href,headers:Object.assign(Object.assign({},S),v),storageKey:d,autoRefreshToken:e,persistSession:i,detectSessionInUrl:o,storage:l,userStorage:f,flowType:m,lock:g,debug:p,fetch:T,hasCustomAuthorizationHeader:Object.keys(this.headers).some(E=>E.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new HM(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((i,o)=>{this._handleTokenChanged(i,"CLIENT",o==null?void 0:o.access_token)})}_handleTokenChanged(e,i,o){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==o?this.changedAccessToken=o:e==="SIGNED_OUT"&&(this.realtime.setAuth(),i=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const vr=(t,e,i)=>new cD(t,e,i);function fD(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}fD()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Tc=async(t,e,i,o)=>{if(!i||!o)throw new Error("Supabase URL or Key not provided.");const l=vr(i,o),f=new Blob([t],{type:"text/csv;charset=utf-t;"}),d="library",{data:m,error:g}=await l.storage.from(d).upload(e,f,{upsert:!0});if(g)throw console.error("Supabase upload error:",g),g.message.includes("Bucket not found")?new Error(`Storage bucket "${d}" not found in your Supabase project.`):new Error(`Failed to upload to Supabase: ${g.message}`);console.log("Supabase upload successful:",m)},xy=async(t,e)=>{const i=vr(t,e),{data:o,error:l}=await i.storage.from("library").list("",{sortBy:{column:"created_at",order:"desc"}});if(l)throw console.error("Error listing files:",l),new Error(`Could not list files from Supabase: ${l.message}`);return o},ar=async(t,e,i)=>{const o=vr(e,i),{data:l,error:f}=await o.storage.from("library").download(t);if(f)throw console.error("Error downloading file:",f),new Error(`Could not download file: ${f.message}`);return l.text()},dD=async(t,e,i)=>{const o=vr(e,i),{error:l}=await o.storage.from("library").remove([t]);if(l)throw console.error("Error deleting file:",l),new Error(`Could not delete file: ${l.message}`)},So=({message:t})=>A.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-400",children:[A.jsxs("svg",{className:"animate-spin h-10 w-10 text-blue-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),A.jsx("p",{className:"mt-4 text-lg font-medium",children:t})]}),hD=({imageSrc:t,books:e,onReset:i,settings:o,lastSavedCollection:l,onSaveSuccess:f})=>{const[d,m]=se.useState(!1),[g,p]=se.useState("new"),[v,T]=se.useState([]),[S,E]=se.useState(!1),[b,N]=se.useState(""),[L,q]=se.useState(""),[V,U]=se.useState("idle"),[$,z]=se.useState(""),Y=()=>{const ee=rr(e),ie=new Blob([ee],{type:"text/csv;charset=utf-8;"}),fe=document.createElement("a");fe.href&&URL.revokeObjectURL(fe.href),fe.href=URL.createObjectURL(ie),fe.download="book_data.csv",document.body.appendChild(fe),fe.click(),document.body.removeChild(fe)},Z=()=>{m(!d),U("idle"),z("")};se.useEffect(()=>{if(!d||!(o!=null&&o.supabaseUrl)||!(o!=null&&o.supabaseKey)){T([]);return}(async()=>{E(!0);try{const fe=(await xy(o.supabaseUrl,o.supabaseKey)).filter($e=>$e.name.endsWith(".csv"));T(fe),l&&fe.some($e=>$e.name===l)?(p("existing"),N(l)):fe.length>0?(p("existing"),N(fe[0].name)):p("new")}catch(ie){U("error"),z(ie instanceof Error?`Error: ${ie.message}`:"Could not fetch existing collections.")}finally{E(!1)}})()},[d,o,l]);const ue=async()=>{if(!(o!=null&&o.supabaseUrl)||!(o!=null&&o.supabaseKey)){U("error"),z("Supabase credentials not found.");return}U("saving"),z("");try{let ee;if(g==="new"){if(!L.trim())throw new Error("Please provide a name for the new collection.");const ie=L.trim().endsWith(".csv")?L.trim():`${L.trim()}.csv`;ee=ie;const fe=rr(e);await Tc(fe,ie,o.supabaseUrl,o.supabaseKey),U("success"),z(`Successfully created and saved to "${ie}". Redirecting...`)}else{if(!b)throw new Error("Please select a collection to add to.");ee=b;const ie=await ar(b,o.supabaseUrl,o.supabaseKey),fe=Ms(ie),{mergedBooks:ot,addedCount:$e}=aM(fe,e),we=rr(ot);await Tc(we,b,o.supabaseUrl,o.supabaseKey),U("success"),z($e===0?`Collection "${b}" is already up-to-date. Redirecting...`:`Added ${$e} new book(s) to "${b}". Total is now ${ot.length}. Redirecting...`)}f(ee),q(""),setTimeout(()=>{i()},2500)}catch(ee){U("error");const ie=ee instanceof Error?ee.message:"An unknown error occurred.";z(`Save failed: ${ie}`),console.error(ee)}},ne=(o==null?void 0:o.supabaseUrl)&&(o==null?void 0:o.supabaseKey);return A.jsxs("div",{className:`grid grid-cols-1 ${t?"lg:grid-cols-2":""} gap-8 animate-fade-in`,children:[t&&A.jsxs("div",{className:"flex flex-col items-center",children:[A.jsx("h3",{className:"text-xl font-semibold mb-4 text-gray-300",children:"Your Uploaded Image"}),A.jsx("img",{src:t,alt:"Uploaded books",className:"rounded-lg shadow-lg max-h-[500px] w-auto object-contain"})]}),A.jsxs("div",{className:t?"":"col-span-1",children:[A.jsxs("div",{className:"bg-green-900/50 border border-green-700 text-green-300 px-4 py-3 rounded-md mb-6",role:"alert",children:[A.jsx("p",{className:"font-bold",children:"Success!"}),A.jsxs("p",{className:"text-sm",children:["Successfully identified and processed ",e.length," book(s)."]})]}),A.jsx("div",{className:"overflow-x-auto bg-gray-900/60 rounded-lg border border-gray-700",children:A.jsxs("table",{className:"min-w-full text-sm text-left text-gray-300",children:[A.jsx("thead",{className:"text-xs text-gray-200 uppercase bg-gray-700/50",children:A.jsxs("tr",{children:[A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Title"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Author"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"First Published"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Genre"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Description"})]})}),A.jsx("tbody",{children:e.map((ee,ie)=>A.jsxs("tr",{className:"border-b border-gray-700 hover:bg-gray-800/50",children:[A.jsx("td",{className:"px-6 py-4 font-medium text-white",children:ee.title}),A.jsx("td",{className:"px-6 py-4",children:ee.author}),A.jsx("td",{className:"px-6 py-4",children:ee.publicationYear}),A.jsx("td",{className:"px-6 py-4",children:ee.genre}),A.jsx("td",{className:"px-6 py-4 text-gray-400 italic text-xs",children:ee.description})]},ie))})]})}),A.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-4",children:[A.jsx(dt,{onClick:Y,text:"Download CSV",primary:!1}),ne&&A.jsx(dt,{onClick:Z,text:"Save to Library",primary:!1}),A.jsx(dt,{onClick:i,text:"Add More Books",primary:!0})]}),d&&A.jsxs("div",{className:"mt-6 p-6 bg-gray-900/50 rounded-lg border border-gray-700 animate-fade-in",children:[A.jsx("h4",{className:"text-lg font-semibold text-gray-200 mb-4",children:"Save to Supabase Library"}),S?A.jsx(So,{message:"Loading collections..."}):A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{className:"flex gap-4",children:[A.jsx("button",{onClick:()=>p("new"),className:`px-4 py-2 text-sm rounded-md flex-1 transition ${g==="new"?"bg-blue-600 text-white":"bg-gray-700 hover:bg-gray-600"}`,children:"Create New Collection"}),A.jsx("button",{onClick:()=>p("existing"),disabled:v.length===0,className:`px-4 py-2 text-sm rounded-md flex-1 transition ${g==="existing"?"bg-blue-600 text-white":"bg-gray-700 hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed"}`,children:"Add to Existing"})]}),g==="new"?A.jsxs("div",{children:[A.jsx("label",{htmlFor:"collectionName",className:"block text-sm font-medium text-gray-300 mb-1",children:"New Collection Name"}),A.jsx("input",{type:"text",id:"collectionName",value:L,onChange:ee=>q(ee.target.value),placeholder:"e.g., My Sci-Fi Books",className:"w-full bg-gray-800 border border-gray-600 rounded-md px-3 py-2 text-gray-200 focus:ring-2 focus:ring-blue-500"})]}):A.jsxs("div",{children:[A.jsx("label",{htmlFor:"selectCollection",className:"block text-sm font-medium text-gray-300 mb-1",children:"Select Collection"}),v.length>0?A.jsx("select",{id:"selectCollection",value:b,onChange:ee=>N(ee.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded-md px-3 py-2 text-gray-200 focus:ring-2 focus:ring-blue-500",children:v.map(ee=>A.jsx("option",{value:ee.name,children:ee.name},ee.id))}):A.jsx("p",{className:"text-sm text-gray-500 italic",children:"No existing collections found. Create a new one to get started."})]}),A.jsx("div",{className:"pt-2",children:A.jsx(dt,{onClick:ue,text:V==="saving"?"Saving...":"Confirm Save",primary:!0,disabled:V==="saving"||g==="existing"&&v.length===0})})]}),V!=="idle"&&A.jsxs("div",{className:`mt-4 px-4 py-3 rounded-md text-sm text-center transition-all duration-300
                    ${V==="success"?"bg-green-900/50 border border-green-700 text-green-300":""}
                    ${V==="error"?"bg-red-900/50 border border-red-700 text-red-300":""}
                    ${V==="saving"?"bg-blue-900/50 border border-blue-700 text-blue-300":""}
                  `,children:[V==="saving"&&A.jsxs("div",{className:"flex items-center justify-center gap-2",children:[A.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),A.jsx("span",{children:"Saving data..."})]}),$]})]})]})]})},pD=({message:t,onReset:e})=>A.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[A.jsxs("div",{className:"bg-red-900/50 border border-red-700 text-red-300 px-4 py-3 rounded-md mb-6 w-full max-w-lg",role:"alert",children:[A.jsx("strong",{className:"font-bold",children:"An Error Occurred"}),A.jsx("span",{className:"block sm:inline ml-2",children:t})]}),A.jsx(dt,{onClick:e,text:"Try Again",primary:!0})]}),mD=({onCapture:t,onCancel:e})=>{const i=se.useRef(null),o=se.useRef(null),l=se.useRef(null),[f,d]=se.useState(null),[m,g]=se.useState(null),[p,v]=se.useState(!0),T=se.useCallback(()=>{l.current&&(l.current.getTracks().forEach(q=>q.stop()),l.current=null)},[]),S=se.useCallback(async()=>{T(),v(!0),g(null);try{const q={video:{facingMode:"environment",width:{ideal:1920},height:{ideal:1080}}},V=await navigator.mediaDevices.getUserMedia(q);l.current=V,i.current?(i.current.srcObject=V,i.current.onloadedmetadata=()=>{v(!1)}):v(!1)}catch(q){console.error("Error accessing camera with environment facingMode:",q);try{const V={video:{width:{ideal:1920},height:{ideal:1080}}},U=await navigator.mediaDevices.getUserMedia(V);l.current=U,i.current?(i.current.srcObject=U,i.current.onloadedmetadata=()=>{v(!1)}):v(!1)}catch(V){console.error("Final error accessing camera:",V),g("Could not access the camera. Please ensure you have granted permission and that your camera is not in use by another application."),v(!1)}}},[T]);se.useEffect(()=>(f||S(),()=>{T()}),[f,S,T]);const E=(q,V)=>{const U=q.split(","),$=U[0].match(/:(.*?);/);if(!$)throw new Error("Could not parse mime type from data URL");const z=$[1],Y=atob(U[1]);let Z=Y.length;const ue=new Uint8Array(Z);for(;Z--;)ue[Z]=Y.charCodeAt(Z);return new File([ue],V,{type:z})},b=()=>{if(i.current&&o.current&&!p){const q=i.current,V=o.current;V.width=q.videoWidth,V.height=q.videoHeight;const U=V.getContext("2d");if(U){U.drawImage(q,0,0,q.videoWidth,q.videoHeight);const $=V.toDataURL("image/jpeg",.9);d($),T()}}},N=()=>{d(null)},L=()=>{if(f){const q=E(f,`capture-${Date.now()}.jpg`);t(q)}};return m?A.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[A.jsxs("div",{className:"bg-red-900/50 border border-red-700 text-red-300 px-4 py-3 rounded-md mb-6 w-full max-w-lg",role:"alert",children:[A.jsx("strong",{className:"font-bold",children:"Camera Error"}),A.jsx("span",{className:"block sm:inline ml-2",children:m})]}),A.jsx(dt,{onClick:e,text:"Go Back",primary:!0})]}):A.jsxs("div",{className:"flex flex-col items-center w-full animate-fade-in",children:[A.jsxs("div",{className:"relative w-full max-w-2xl aspect-video bg-gray-900 rounded-lg overflow-hidden shadow-lg border border-gray-700 flex items-center justify-center",children:[p&&!f&&A.jsx(So,{message:"Starting camera..."}),f?A.jsx("img",{src:f,alt:"Captured",className:"w-full h-full object-contain"}):A.jsx("video",{ref:i,autoPlay:!0,playsInline:!0,muted:!0,className:`w-full h-full object-contain ${p?"hidden":"block"}`}),A.jsx("canvas",{ref:o,className:"hidden"})]}),A.jsx("div",{className:"mt-6 flex flex-col sm:flex-row gap-4",children:f?A.jsxs(A.Fragment,{children:[A.jsx(dt,{onClick:N,text:"Retake",primary:!1}),A.jsx(dt,{onClick:L,text:"Use This Picture",primary:!0})]}):A.jsxs(A.Fragment,{children:[A.jsx(dt,{onClick:e,text:"Cancel",primary:!1}),A.jsx(dt,{onClick:b,text:"Take Picture",primary:!0,disabled:p})]})})]})},gD=({settings:t})=>{const[e,i]=se.useState(He.IDLE),[o,l]=se.useState(null),[f,d]=se.useState([]),[m,g]=se.useState(null),[p,v]=se.useState(null),T=se.useCallback(async L=>{if(!(t!=null&&t.apiKey)){g("Google Gemini API Key is not configured. Please go to Settings."),i(He.ERROR);return}i(He.PROCESSING),g(null),d([]);const q=new FileReader;q.readAsDataURL(L),q.onload=async()=>{const V=q.result.split(",")[1];l(q.result);try{const U=await rM(V,L.type,t.apiKey);U&&U.length>0?(d(U),i(He.RESULTS)):(g("No books could be identified in the image. Please try another one."),i(He.ERROR))}catch(U){console.error("Error identifying books:",U),g("An error occurred while analyzing the image. Please check your API key and try again."),i(He.ERROR)}},q.onerror=()=>{g("Failed to read the uploaded image file."),i(He.ERROR)}},[t]),S=se.useCallback(async L=>{i(He.PROCESSING),g(null),d([]),l(null);const q=new FileReader;q.readAsText(L),q.onload=()=>{try{const V=q.result,U=Ms(V);U&&U.length>0?(d(U),i(He.RESULTS)):(g("Could not parse any books from the file. Please check the format."),i(He.ERROR))}catch(V){console.error("Error parsing file:",V),g("An error occurred while parsing the file."),i(He.ERROR)}},q.onerror=()=>{g("Failed to read the uploaded text file."),i(He.ERROR)}},[]),E=L=>{const q=L.type;q.startsWith("image/")?T(L):q==="text/csv"||q==="text/plain"||L.name.endsWith(".csv")||L.name.endsWith(".txt")?S(L):(g(`Unsupported file type: ${q}. Please upload an image, CSV, or TXT file.`),i(He.ERROR))},b=()=>{i(He.IDLE),l(null),d([]),g(null)},N=()=>{i(He.TAKING_PICTURE)};switch(e){case He.IDLE:return A.jsx(uM,{onFileUpload:E,onTakePhotoClick:N});case He.TAKING_PICTURE:return A.jsx(mD,{onCapture:T,onCancel:b});case He.PROCESSING:return A.jsx(So,{message:"Processing your file..."});case He.RESULTS:return A.jsx(hD,{imageSrc:o,books:f,onReset:b,settings:t,lastSavedCollection:p,onSaveSuccess:v});case He.ERROR:return A.jsx(pD,{message:m||"An unknown error occurred.",onReset:b});default:return null}},yD=({settings:t})=>{const[e,i]=se.useState([]),[o,l]=se.useState(null),[f,d]=se.useState([]),[m,g]=se.useState(!1),[p,v]=se.useState(null),[T,S]=se.useState(!1),[E,b]=se.useState(!1),[N,L]=se.useState({}),[q,V]=se.useState(!1),[U,$]=se.useState("idle"),[z,Y]=se.useState(""),Z=se.useMemo(()=>e.length===0||Object.keys(N).length<e.length?null:Object.values(N).reduce((X,x)=>X+(x||0),0),[N,e]),ue=se.useCallback(async()=>{if(!(t!=null&&t.supabaseUrl)||!(t!=null&&t.supabaseKey)){v("Supabase credentials are not configured.");return}g("list"),v(null);try{const X=await xy(t.supabaseUrl,t.supabaseKey);i(X)}catch(X){const x=X instanceof Error?X.message:"An unknown error occurred.";v(`Failed to load library: ${x}`)}finally{g(!1),b(!0)}},[t]);se.useEffect(()=>{if(!(t!=null&&t.supabaseUrl)||!(t!=null&&t.supabaseKey)||e.length===0)return;(async()=>{const x=e.filter(J=>N[J.name]===void 0);if(x.length===0)return;const O=x.map(async J=>{try{const te=await ar(J.name,t.supabaseUrl,t.supabaseKey),ye=Ms(te);return{name:J.name,count:ye.length}}catch(te){return console.error(`Failed to fetch count for ${J.name}:`,te),{name:J.name,count:null}}}),K=await Promise.all(O);L(J=>{const te={...J};return K.forEach(ye=>{te[ye.name]=ye.count}),te})})()},[e,t,N]);const ne=se.useCallback(async()=>{if(!(!(t!=null&&t.supabaseUrl)||!(t!=null&&t.supabaseKey)||e.length===0)){g("content"),l(null),S(!0),V(!1),v(null),d([]);try{const X=e.map(K=>ar(K.name,t.supabaseUrl,t.supabaseKey).then(J=>Ms(J))),O=(await Promise.all(X)).flat();d(O)}catch(X){const x=X instanceof Error?X.message:"An unknown error occurred.";v(`Failed to load all collections: ${x}`),d([]),S(!1)}finally{g(!1)}}},[t,e]);se.useEffect(()=>{ue()},[ue]),se.useEffect(()=>{E&&e.length>0&&!T&&!o&&ne()},[E,e,T,o,ne]);const ee=async(X,x=!1)=>{if(!(!(t!=null&&t.supabaseUrl)||!(t!=null&&t.supabaseKey))){g("content"),l(X),S(!1),V(x),v(null),$("idle");try{const O=await ar(X.name,t.supabaseUrl,t.supabaseKey),K=Ms(O);d(K)}catch(O){const K=O instanceof Error?O.message:"An unknown error occurred.";v(`Failed to load file content: ${K}`),d([])}finally{g(!1)}}},ie=async X=>{if(!(!(t!=null&&t.supabaseUrl)||!(t!=null&&t.supabaseKey))&&window.confirm(`Are you sure you want to delete "${X}"? This action cannot be undone.`))try{await dD(X,t.supabaseUrl,t.supabaseKey),fe()}catch(x){const O=x instanceof Error?x.message:"An unknown error occurred.";v(`Failed to delete file: ${O}`)}},fe=()=>{l(null),d([]),S(!1),V(!1),b(!1),L({}),ue()},ot=(X,x,O)=>{const K=[...f];K[X]={...K[X],[x]:O},d(K)},$e=X=>{d(f.filter((x,O)=>O!==X))},we=()=>{d([...f,{title:"",author:"",publicationYear:"",genre:"",description:""}])},B=()=>{V(!1),$("idle"),o&&ee(o,!1)},Q=async()=>{if(!(!o||!(t!=null&&t.supabaseUrl)||!(t!=null&&t.supabaseKey))){$("saving"),Y("Saving changes...");try{const X=rr(f);await Tc(X,o.name,t.supabaseUrl,t.supabaseKey),$("success"),Y("Collection updated successfully!"),L(x=>({...x,[o.name]:f.length})),setTimeout(()=>{V(!1),$("idle")},2e3)}catch(X){const x=X instanceof Error?X.message:"An unknown error occurred.";$("error"),Y(`Save failed: ${x}`)}}};if(m==="list"&&!E)return A.jsx(So,{message:"Loading your library..."});if(p&&e.length===0)return A.jsxs("div",{className:"text-center",children:[A.jsx("p",{className:"text-red-400 mb-4",children:p}),A.jsx(dt,{onClick:ue,text:"Retry",primary:!0})]});const le=()=>q?A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[A.jsx(dt,{onClick:Q,text:U==="saving"?"Saving...":"Save Changes",primary:!0,disabled:U==="saving"}),A.jsx(dt,{onClick:B,text:"Cancel",disabled:U==="saving"})]}),U!=="idle"&&A.jsx("div",{className:`px-4 py-3 rounded-md text-sm text-center transition-all duration-300
                            ${U==="success"?"bg-green-900/50 border border-green-700 text-green-300":""}
                            ${U==="error"?"bg-red-900/50 border border-red-700 text-red-300":""}
                            ${U==="saving"?"bg-blue-900/50 border border-blue-700 text-blue-300":""}
                        `,children:z}),A.jsx("div",{className:"overflow-x-auto bg-gray-900/60 rounded-lg border border-gray-700",children:A.jsxs("table",{className:"min-w-full text-sm text-left text-gray-300",children:[A.jsx("thead",{className:"text-xs text-gray-200 uppercase bg-gray-700/50",children:A.jsxs("tr",{children:[A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Title"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Author"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Published"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Genre"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Description"}),A.jsx("th",{scope:"col",className:"px-1 py-3 text-center",children:"Del"})]})}),A.jsx("tbody",{children:f.map((X,x)=>A.jsxs("tr",{className:"border-b border-gray-700",children:[["title","author","publicationYear","genre","description"].map(O=>A.jsx("td",{className:"px-2 py-1 sm:px-6 sm:py-2",children:A.jsx("input",{type:"text",value:X[O],onChange:K=>ot(x,O,K.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded-md px-2 py-1 text-gray-200 focus:ring-1 focus:ring-blue-500 focus:border-blue-500"})},O)),A.jsx("td",{className:"px-1 py-1 text-center align-middle",children:A.jsx("button",{onClick:()=>$e(x),className:"text-red-500 hover:text-red-400 p-1 rounded-full hover:bg-red-900/50",children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})})]},x))})]})}),A.jsx(dt,{onClick:we,text:"Add Book"})]}):A.jsx("div",{className:"overflow-x-auto bg-gray-900/60 rounded-lg border border-gray-700",children:A.jsxs("table",{className:"min-w-full text-sm text-left text-gray-300",children:[A.jsx("thead",{className:"text-xs text-gray-200 uppercase bg-gray-700/50",children:A.jsxs("tr",{children:[A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Title"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Author"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"First Published"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Genre"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Description"})]})}),A.jsx("tbody",{children:f.map((X,x)=>A.jsxs("tr",{className:"border-b border-gray-700 hover:bg-gray-800/50",children:[A.jsx("td",{className:"px-6 py-4 font-medium text-white",children:X.title}),A.jsx("td",{className:"px-6 py-4",children:X.author}),A.jsx("td",{className:"px-6 py-4",children:X.publicationYear}),A.jsx("td",{className:"px-6 py-4",children:X.genre}),A.jsx("td",{className:"px-6 py-4 text-gray-400 italic text-xs",children:X.description})]},x))})]})});return A.jsxs("div",{className:"animate-fade-in",children:[A.jsxs("div",{className:"flex justify-between items-center mb-6",children:[A.jsx("h2",{className:"text-2xl font-bold text-gray-200",children:"My Library"}),A.jsx("button",{onClick:fe,className:"p-2 text-gray-400 hover:text-white transition-colors duration-200","aria-label":"Refresh library list",children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h5M20 20v-5h-5M4 4l1.5 1.5A9 9 0 0120.5 9.5M20 20l-1.5-1.5A9 9 0 003.5 14.5"})})})]}),p&&A.jsx("p",{className:"text-red-400 mb-4 text-center",children:p}),e.length===0&&!m&&A.jsxs("div",{className:"text-center py-10 px-4 bg-gray-900/50 rounded-lg",children:[A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 9.776c.112-.017.227-.026.344-.026h15.812c.117 0 .232.009.344.026m-16.5 0a2.25 2.25 0 00-1.883 2.542l.857 6a2.25 2.25 0 002.227 1.932H19.05a2.25 2.25 0 002.227-1.932l.857-6a2.25 2.25 0 00-1.883-2.542m-16.5 0A2.25 2.25 0 015.625 7.5h12.75c1.131 0 2.162.8 2.344 1.932m-16.5 0a2.25 2.25 0 00-1.883 2.542m16.5 0a2.25 2.25 0 01-1.883 2.542m0 0v6a2.25 2.25 0 01-2.25 2.25H5.625a2.25 2.25 0 01-2.25-2.25v-6m16.5 0v-2.25a2.25 2.25 0 00-2.25-2.25H5.625a2.25 2.25 0 00-2.25 2.25v2.25"})}),A.jsx("h3",{className:"mt-2 text-lg font-medium text-white",children:"Your library is empty."}),A.jsx("p",{className:"mt-1 text-sm text-gray-400",children:"Upload a book collection to see it here."})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.length>0&&A.jsxs("div",{className:"md:col-span-1 bg-gray-900/50 rounded-lg border border-gray-700 p-4 h-fit max-h-[70vh] overflow-y-auto",children:[A.jsx("h3",{className:"font-semibold text-gray-300 mb-2 text-sm uppercase tracking-wider",children:"Collections"}),A.jsxs("button",{onClick:ne,disabled:e.length===0,className:`w-full text-left p-2 rounded-md mb-2 font-semibold transition-colors flex items-center justify-between gap-2 ${T?"bg-blue-600 text-white":"bg-gray-700 text-gray-200 hover:bg-gray-600 disabled:opacity-50"}`,children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),A.jsx("span",{children:"View All"})]}),A.jsx("span",{className:"text-xs font-mono bg-gray-800/50 px-1.5 py-0.5 rounded",children:Z!==null?Z:e.length})]}),A.jsx("div",{className:"border-t border-gray-700 my-2"}),A.jsx("ul",{children:e.map(X=>A.jsxs("li",{className:"group flex justify-between items-center rounded-md hover:bg-blue-900/50 transition-colors",children:[A.jsxs("button",{onClick:()=>ee(X,!1),className:`w-full text-left p-2 rounded-md flex items-center justify-between ${!T&&(o==null?void 0:o.id)===X.id?"text-blue-400 font-semibold":"text-gray-300"}`,children:[A.jsx("span",{className:"truncate pr-2",children:X.name}),A.jsx("span",{className:"flex-shrink-0 text-xs text-gray-500 font-normal group-hover:text-gray-300",children:N[X.name]!==void 0?N[X.name]===null?"N/A":N[X.name]:"..."})]}),A.jsxs("div",{className:"flex items-center opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:[A.jsx("button",{onClick:()=>ee(X,!0),className:"p-2 text-gray-400 hover:text-blue-400","aria-label":`Edit ${X.name}`,children:A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[A.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),A.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]})}),A.jsx("button",{onClick:()=>ie(X.name),className:"p-2 text-gray-400 hover:text-red-500","aria-label":`Delete ${X.name}`,children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},X.id))})]}),A.jsxs("div",{className:"md:col-span-2",children:[m==="content"&&A.jsx(So,{message:"Loading collection..."}),(o||T)&&!m&&f.length>0&&A.jsxs("div",{children:[A.jsx("h4",{className:"text-lg font-semibold text-gray-300 mb-4",children:q?`Editing: ${o==null?void 0:o.name}`:T?`All Books (${f.length})`:`Contents of ${o==null?void 0:o.name}`}),le()]}),(o||T)&&!m&&f.length===0&&!p&&(q?le():A.jsx("p",{children:"This collection appears to be empty or in an incorrect format."})),!o&&!T&&e.length>0&&!m&&A.jsxs("div",{className:"text-center py-10 px-4 h-full flex flex-col items-center justify-center",children:[A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})}),A.jsx("h3",{className:"mt-2 text-lg font-medium text-white",children:"Select a Collection"}),A.jsx("p",{className:"mt-1 text-sm text-gray-400",children:"Choose a file from the list to view or edit its contents."})]})]})]})]})},vD=()=>{const[t,e]=se.useState(null),[i,o]=se.useState("upload");se.useEffect(()=>{try{const d=localStorage.getItem("appSettings");if(d){const m=JSON.parse(d);e(m),m.apiKey||o("settings")}else e({}),o("settings")}catch(d){console.error("Could not parse settings from localStorage",d),e({}),o("settings")}},[]);const l=d=>{localStorage.setItem("appSettings",JSON.stringify(d)),e(d),i==="settings"&&d.apiKey&&o("upload")},f=()=>{if(!t)return null;switch(i){case"settings":return A.jsx(cT,{initialSettings:t,onSave:l});case"upload":return A.jsx(gD,{settings:t});case"library":return A.jsx(yD,{settings:t});default:return null}};return t===null?A.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:A.jsx(So,{message:"Loading configuration..."})}):A.jsx("div",{className:"min-h-screen bg-gray-900 text-gray-100 flex flex-col items-center p-4 sm:p-6 lg:p-8",children:A.jsxs("div",{className:"w-full max-w-6xl mx-auto",children:[A.jsx(uT,{currentView:i,onNavigate:o,isLibraryEnabled:!!(t.supabaseUrl&&t.supabaseKey)}),A.jsx("main",{className:"bg-gray-800/50 rounded-xl shadow-2xl p-6 md:p-10 border border-gray-700 mt-8",children:f()}),A.jsx("footer",{className:"text-center mt-8 text-gray-500 text-sm",children:A.jsx("p",{children:"Powered by Google Gemini AI"})})]})})},Ry=document.getElementById("root");if(!Ry)throw new Error("Could not find root element to mount to");const TD=aT.createRoot(Ry);TD.render(A.jsx(eT.StrictMode,{children:A.jsx(vD,{})}));
